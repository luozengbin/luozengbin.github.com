#+TITLE: [メモ]Otcopressにプラグインを導入する-その１
#+DATE: 2014-07-01
#+SETUPFILE: ~/.emacs.d/blogs/octopress/setupfile.org
#+JEKYLL_LAYOUT: post
#+JEKYLL_CATEGORIES: misc
#+JEKYLL_TAGS: Otcopress
#+JEKYLL_COMMENTS: true
#+JEKYLL_PUBLISHED: true

* TagCloudとカテゴリリスト

[[https://github.com/tokkonopapa/octopress-tagcloud][このから]] ダウンロードする
#+begin_example
[akira@jizai tmp]$ git clone https://github.com/tokkonopapa/octopress-tagcloud.git
Cloning into 'octopress-tagcloud'...
remote: Reusing existing pack: 65, done.
remote: Total 65 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (65/65), done.
Checking connectivity... done.
[akira@jizai tmp]$ 
#+end_example

=octopress-tagcloud/plugin/= 配下のファイルを =octopress/plugins= へコピーする。
=octopress-tagcloud/source/= 配下のファイルを =octopress/source= へコピーする。

#+begin_example
[akira@jizai tmp]$ cd octopress-tagcloud/
[akira@jizai octopress-tagcloud]$ cp -rfv plugins/* ~/.emacs.d/blogs/octopress/plugins
`plugins/tag_cloud.rb' -> `/home/akira/.emacs.d/blogs/octopress/plugins/tag_cloud.rb'
[akira@jizai octopress-tagcloud]$ cp -rfv source/* ~/.emacs.d/blogs/octopress/source
`source/_includes/custom/asides/tag_cloud.html' -> `/home/akira/.emacs.d/blogs/octopress/source/_includes/custom/asides/tag_cloud.html'
`source/_includes/custom/asides/category_list.html' -> `/home/akira/.emacs.d/blogs/octopress/source/_includes/custom/asides/category_list.html'
[akira@jizai octopress-tagcloud]$
#+end_example

=octopress/_config.yml= の =default_asides= 項目に =custom/asides/tag_cloud.html= と
=custom/asides/category_list.html= を追加する。
#+begin_example
default_asides: [...., custom/asides/tag_cloud.html, custom/asides/category_list.html, ..... ]
#+end_example

このままだとTagCloudカテゴリリストが同じものになったしまうので、[[http://komasaru.github.io/blog/2012/12/19/octopress-add-tag-cloud/][ここ]] と [[http://rcmdnk.github.io/blog/2013/04/12/blog-octopress/][ここ]] の記事を
参考してカテゴライズ機能を流用してTagCloud機能を実装する。以下TagCloud機能を実現する
ためには変更及び追加したファイル一覧です。

#+begin_example
[akira@hakusai octopress]$ git status
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
  (commit or discard the untracked or modified content in submodules)

	modified:   _config.yml
	modified:   sass/partials/_archive.scss
	modified:   sass/partials/_blog.scss
	modified:   source/_includes/archive_post.html
	modified:   source/_includes/post/categories.html
	modified:   source/_layouts/page.html
	modified:   source/_layouts/post.html

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	plugins/tag_cloud.old.rb
	plugins/tag_cloud.rb
	plugins/tag_generator.rb
	source/_includes/custom/asides/related.html
	source/_includes/custom/asides/tag_cloud.html
	source/_includes/custom/tag_feed.xml
	source/_includes/post/tags.html
	source/_layouts/tag_index.html
#+end_example

記事書く際にヘッダの属性リストに =tags= と =category= を記述するすればOKです。

#+begin_example
---
title: "[メモ]Otcopressにプラグインを導入する-その１"
date: 2014-07-01
layout: post
category: misc
tags: Octopress blog
published: true
comments: true
---
#+end_example

* QRコード
Google Chart APIで記事URLのQRコードイメージを自動的に生成する。

=octopress/source/_includes/custom/asides/qrcode.html=
#+begin_example
<section>
  <!-- create at 2017/07/01 
       Google Chart Tools: Infographics
       https://developers.google.com/chart/infographics/docs/qr_codes?csw=1
  -->

  <div style="position: relative; text-align: center">

    <!-- Google Chart API でQRコード取得 -->
    <img src="http://chart.apis.google.com/chart?chs=180x180&amp;cht=qr&amp;choe=UTF-8&amp;chl={{ site.url }}{{ page.url }}" alt="post-qrcode" height="180" width="180" />

    <!-- サイトのfaviconを重ねて表示する -->
    <div style="position: absolute; top: 75px; width: 100%; margin: 0 auto; text-align: center">
      <img style="border: 0.2em solid #FFF;" src="{{ root_url }}/favicon.png" alt="post-qrcode" height="30" width="30" />
    </div>
  </div>

</section>
#+end_example

=octopress/_config.yml= の =default_asides= 項目に =custom/asides/qrcode.html= を追加
する。
#+begin_example
default_asides: [...., custom/asides/qrcode.html, ..... ]
#+end_example


* 月間アーカイブ
作成中...

* 参考リンク
- [[http://komasaru.github.io/blog/2012/12/19/octopress-add-tag-cloud/][Octopress - タグクラウドの追加]]
- [[http://rcmdnk.github.io/blog/2013/04/12/blog-octopress/][Octopressでのタグの運用]]
- [[http://komasaru.github.io/blog/2013/02/15/octopress-monthly-archives/][Octopress - 月別アーカイブ！]]
- [[http://rcmdnk.github.io/blog/2013/10/01/blog-octopress/][月間アーカイブ for Octopress]]
