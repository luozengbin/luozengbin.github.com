<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Java | Akira's Tech Notes]]></title>
  <link href="http://luozengbin.github.io/blog/categories/java/atom.xml" rel="self"/>
  <link href="http://luozengbin.github.io/"/>
  <updated>2014-11-20T15:12:30+09:00</updated>
  <id>http://luozengbin.github.io/</id>
  <author>
    <name><![CDATA[luozengbin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[メモ]CMS GCログの見方]]></title>
    <link href="http://luozengbin.github.io/blog/2014-11-05-%5B%E3%83%A1%E3%83%A2%5Dcms-gc%E3%83%AD%E3%82%B0%E3%81%AE%E8%A6%8B%E6%96%B9.html"/>
    <updated>2014-11-05T00:00:00+09:00</updated>
    <id>http://luozengbin.github.io/blog/[メモ]cms-gcログの見方</id>
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 基本おさらい</a></li>
<li><a href="#sec-2">2. 実験するためのプログラム</a></li>
<li><a href="#sec-3">3. CMSログの見方</a>
<ul>
<li><a href="#sec-3-1">3.1. New領域GCログ</a></li>
<li><a href="#sec-3-2">3.2. Old領域GCログ</a></li>
<li><a href="#sec-3-3">3.3. concurrent mode failure</a></li>
<li><a href="#sec-3-4">3.4. 手動FullGC時のログ</a></li>
</ul>
</li>
<li><a href="#sec-4">4. 参考</a></li>
</ul>
</div>
</div>




<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 基本おさらい</h2>
<div class="outline-text-2" id="text-1">
<p>
CMSとは <code>Concurrent Mark &amp; Sweep</code> 、JVM OLD領域GC処理アルゴリズムの一種です。
CMSはアプリケーションを停止する時間を削減することが出来ます。処理の流れは下図に示す。
</p>

<p>
※Concurrentは同時という意味です。
</p>

<pre class="example">
       ①        ②          ③    ④
---&gt; | ==&gt; | ============&gt; | ==&gt; | ==========&gt; -----&gt;
---&gt; |     | ------------&gt; | ==&gt; | -----------------&gt;
---&gt; |     | ------------&gt; | ==&gt; | -----------------&gt;
---&gt; |     | ------------&gt; | ==&gt; | -----------------&gt;
---&gt; |     | ------------&gt; | ==&gt; | -----------------&gt;
---&gt; |     | ------------&gt; | ==&gt; | -----------------&gt;
       STW                   STW

凡例
+--------------------+
| ==&gt; GCスレッド     |
| --&gt; アプリスレッド |
+--------------------+
</pre>

<p>
図上示している通り、①と③の処理だけアプリケーションが停止する。
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">①</td>
<td class="left">Initial Mark</td>
<td class="left">STW</td>
<td class="left">Rootを起点に利用されてるオブジェクトをマークする</td>
</tr>

<tr>
<td class="left">②-1</td>
<td class="left">Concurrent Mark</td>
<td class="left">&#xa0;</td>
<td class="left">①でマークされたオブジェクトを起点に使用中のオブジェクトをマークする</td>
</tr>

<tr>
<td class="left">②-2</td>
<td class="left">Concurrent precleaning</td>
<td class="left">&#xa0;</td>
<td class="left">②-1処理中アプリによる生じた変化部分をマークする、③の処理時間を短縮するため</td>
</tr>

<tr>
<td class="left">③</td>
<td class="left">Parallel Remark</td>
<td class="left">STW</td>
<td class="left">②処理中アプリによる生じた変化部分をマークする</td>
</tr>

<tr>
<td class="left">④-1</td>
<td class="left">Concurrent Sweeping</td>
<td class="left">&#xa0;</td>
<td class="left">マーク処理によって判明した使用済みオブジェクトを削除する</td>
</tr>

<tr>
<td class="left">④-2</td>
<td class="left">Concurrent Reset</td>
<td class="left">&#xa0;</td>
<td class="left">CMS処理自体のリセット</td>
</tr>
</tbody>
</table>

<p>
<!-- more -->
</p>
</div>
</div>




<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 実験するためのプログラム</h2>
<div class="outline-text-2" id="text-2">
<p>
メモリを大量に消費するWebサービス
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #8ac6f2; font-weight: bold;">package</span> test.<span style="color: #e5786d;">example</span>;

<span style="color: #8ac6f2; font-weight: bold;">import</span> <span style="color: #e5786d;">javax</span>.<span style="color: #e5786d;">jws</span>.<span style="color: #92a65e; font-weight: bold;">WebMethod</span>;
<span style="color: #8ac6f2; font-weight: bold;">import</span> <span style="color: #e5786d;">javax</span>.<span style="color: #e5786d;">jws</span>.<span style="color: #92a65e; font-weight: bold;">WebParam</span>;
<span style="color: #8ac6f2; font-weight: bold;">import</span> <span style="color: #e5786d;">javax</span>.<span style="color: #e5786d;">jws</span>.<span style="color: #92a65e; font-weight: bold;">WebService</span>;
<span style="color: #8ac6f2; font-weight: bold;">import</span> <span style="color: #e5786d;">javax</span>.<span style="color: #e5786d;">jws</span>.<span style="color: #e5786d;">soap</span>.<span style="color: #92a65e; font-weight: bold;">SOAPBinding</span>;

<span style="color: #e5786d;">@WebService</span>
<span style="color: #e5786d;">@SOAPBinding</span>(style = <span style="color: #e5786d;">SOAPBinding</span>.<span style="color: #e5786d;">Style</span>.DOCUMENT, use = <span style="color: #e5786d;">SOAPBinding</span>.<span style="color: #e5786d;">Use</span>.LITERAL, parameterStyle = <span style="color: #e5786d;">SOAPBinding</span>.<span style="color: #e5786d;">ParameterStyle</span>.WRAPPED)
<span style="color: #8ac6f2; font-weight: bold;">public</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">HelloWorld</span> {

    <span style="color: #e5786d;">@WebMethod</span>(action = <span style="color: #95e454;">"sayHello"</span>)
    <span style="color: #8ac6f2; font-weight: bold;">public</span> <span style="color: #92a65e; font-weight: bold;">String</span> <span style="color: #cae682;">sayHello</span>(<span style="color: #e5786d;">@WebParam</span>(name = <span style="color: #95e454;">"name"</span> ) <span style="color: #92a65e; font-weight: bold;">String</span> <span style="color: #cae682;">name</span>) <span style="color: #8ac6f2; font-weight: bold;">throws</span> <span style="color: #92a65e; font-weight: bold;">CustomException</span> {

        System.out.println(<span style="color: #95e454;">"Hello: "</span> + name);

        <span style="color: #e5786d;">java</span>.<span style="color: #e5786d;">util</span>.<span style="color: #92a65e; font-weight: bold;">List</span> <span style="color: #cae682;">l</span>  =  <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #e5786d;">java</span>.<span style="color: #e5786d;">util</span>.<span style="color: #92a65e; font-weight: bold;">ArrayList</span>&lt;&gt;();
        <span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">x</span>  = 0;
        <span style="color: #8ac6f2; font-weight: bold;">while</span> (x &lt; 6300) {
            <span style="color: #92a65e; font-weight: bold;">Thread</span> <span style="color: #cae682;">t</span>  =  <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #92a65e; font-weight: bold;">Thread</span>();
            l.add(t);

            <span style="color: #8ac6f2; font-weight: bold;">try</span> {
                Thread.sleep(10);
            } <span style="color: #8ac6f2; font-weight: bold;">catch</span> (<span style="color: #92a65e; font-weight: bold;">Exception</span> <span style="color: #cae682;">e</span>) {
            }
            x++;
            System.out.println(x);
        }
        <span style="color: #8ac6f2; font-weight: bold;">return</span> <span style="color: #95e454;">"Hello "</span> + name + <span style="color: #95e454;">"!"</span>;
    }
}
</pre>
</div>

<p>
Webサービスを載せるAPサーバの起動オプションにGC関係のパラメータを追加する。
Old領域のGCを発生しやすくため、ヒープサイズを小さめに割り当てる。
</p>
<pre class="example">
JAVA_OPTS="$JAVA_OPTS -Xms512m -Xmx512m -XX:MaxPermSize=256m"
JAVA_OPTS="$JAVA_OPTS -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled"
JAVA_OPTS="$JAVA_OPTS -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps"
JAVA_OPTS="$JAVA_OPTS -Xloggc:/tmp/gc-`date '+%Y-%m-%d'`.log"
</pre>

<p>
以下のオプション、GC時に詳細なオブジェクト統計情報も出力する。ここでは略します。
</p>
<pre class="example">
JAVA_OPTS="$JAVA_OPTS -XX:+PrintHeapAtGC -XX:+PrintTenuringDistribution"
</pre>

<p>
SoapUIから100多重で負荷を掛けて、テストアプリを実行させる。
</p>

<p>
SoapUIから負荷を掛けた後はしばらく、New領域のGCログが出続ける。Old領域が満タンな状態
になる前にOld領域のGCログが出始める。以下はOld領域GC発生前後のログを示す。
</p>

<pre class="example">
2014-11-05T14:24:49.336+0900: 214.204: [GC2014-11-05T14:24:49.336+0900: 214.204: [DefNew: 76672K-&gt;8512K(76672K), 0.0978870 secs] 455251K-&gt;395770K(515776K), 0.0981100 secs] [Times: user=0.08 sys=0.00, real=0.10 secs] 
2014-11-05T14:24:51.971+0900: 216.840: [GC2014-11-05T14:24:51.971+0900: 216.840: [DefNew: 76672K-&gt;8412K(76672K), 0.0816580 secs] 463930K-&gt;404301K(515776K), 0.0818720 secs] [Times: user=0.06 sys=0.00, real=0.08 secs] 
2014-11-05T14:24:54.767+0900: 219.636: [GC2014-11-05T14:24:54.767+0900: 219.636: [DefNew: 76572K-&gt;8415K(76672K), 0.1165260 secs] 472461K-&gt;412833K(515776K), 0.1172920 secs] [Times: user=0.06 sys=0.01, real=0.12 secs] 
2014-11-05T14:24:54.899+0900: 219.768: [GC [1 CMS-initial-mark: 404417K(439104K)] 414152K(515776K), 0.0252080 secs] [Times: user=0.02 sys=0.00, real=0.03 secs] 
2014-11-05T14:24:55.043+0900: 219.912: [CMS-concurrent-mark-start]
2014-11-05T14:24:56.941+0900: 221.810: [GC2014-11-05T14:24:56.941+0900: 221.810: [DefNew: 76575K-&gt;8512K(76672K), 0.0933500 secs] 480993K-&gt;423185K(515776K), 0.0935560 secs] [Times: user=0.07 sys=0.00, real=0.10 secs] 
2014-11-05T14:24:58.119+0900: 222.988: [CMS-concurrent-mark: 2.773/3.076 secs] [Times: user=2.38 sys=0.46, real=3.07 secs] 
2014-11-05T14:24:58.119+0900: 222.988: [CMS-concurrent-preclean-start]
2014-11-05T14:24:58.127+0900: 222.996: [CMS-concurrent-preclean: 0.007/0.008 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
2014-11-05T14:24:58.127+0900: 222.996: [CMS-concurrent-abortable-preclean-start]
 CMS: abort preclean due to time 2014-11-05T14:25:03.224+0900: 228.092: [CMS-concurrent-abortable-preclean: 2.683/5.096 secs] [Times: user=2.44 sys=0.08, real=5.10 secs] 
2014-11-05T14:25:03.224+0900: 228.093: [GC[YG occupancy: 48273 K (76672 K)]2014-11-05T14:25:03.224+0900: 228.093: [Rescan (non-parallel) 2014-11-05T14:25:03.224+0900: 228.093: [grey object rescan, 0.0011680 secs]2014-11-05T14:25:03.225+0900: 228.094: [root rescan, 0.2362360 secs], 0.2375020 secs]2014-11-05T14:25:03.462+0900: 228.331: [weak refs processing, 0.0044290 secs]2014-11-05T14:25:03.466+0900: 228.335: [class unloading, 0.0089260 secs]2014-11-05T14:25:03.475+0900: 228.344: [scrub symbol table, 0.0179240 secs]2014-11-05T14:25:03.493+0900: 228.362: [scrub string table, 0.0013030 secs] [1 CMS-remark: 414673K(439104K)] 462947K(515776K), 0.2714240 secs] [Times: user=0.26 sys=0.00, real=0.27 secs] 
2014-11-05T14:25:03.504+0900: 228.373: [CMS-concurrent-sweep-start]
2014-11-05T14:25:03.816+0900: 228.685: [CMS-concurrent-sweep: 0.310/0.312 secs] [Times: user=0.23 sys=0.00, real=0.31 secs] 
2014-11-05T14:25:03.817+0900: 228.686: [CMS-concurrent-reset-start]
2014-11-05T14:25:03.819+0900: 228.687: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
2014-11-05T14:25:04.454+0900: 229.323: [GC [1 CMS-initial-mark: 394635K(439104K)] 443918K(515776K), 0.0809520 secs] [Times: user=0.08 sys=0.00, real=0.08 secs] 
2014-11-05T14:25:04.538+0900: 229.407: [CMS-concurrent-mark-start]
2014-11-05T14:25:05.602+0900: 230.471: [CMS-concurrent-mark: 1.064/1.064 secs] [Times: user=1.01 sys=0.00, real=1.07 secs] 
2014-11-05T14:25:05.603+0900: 230.471: [CMS-concurrent-preclean-start]
2014-11-05T14:25:05.605+0900: 230.474: [CMS-concurrent-preclean: 0.003/0.003 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
2014-11-05T14:25:05.605+0900: 230.474: [CMS-concurrent-abortable-preclean-start]
 CMS: abort preclean due to time 2014-11-05T14:25:10.648+0900: 235.516: [CMS-concurrent-abortable-preclean: 1.979/5.042 secs] [Times: user=1.89 sys=0.01, real=5.04 secs] 
2014-11-05T14:25:10.648+0900: 235.517: [GC[YG occupancy: 55959 K (76672 K)]2014-11-05T14:25:10.648+0900: 235.517: [Rescan (non-parallel) 2014-11-05T14:25:10.648+0900: 235.517: [grey object rescan, 0.0012890 secs]2014-11-05T14:25:10.649+0900: 235.518: [root rescan, 0.1016560 secs], 0.1030300 secs]2014-11-05T14:25:10.751+0900: 235.620: [weak refs processing, 0.0000500 secs]2014-11-05T14:25:10.751+0900: 235.620: [class unloading, 0.0078410 secs]2014-11-05T14:25:10.759+0900: 235.628: [scrub symbol table, 0.0162830 secs]2014-11-05T14:25:10.775+0900: 235.644: [scrub string table, 0.0010720 secs] [1 CMS-remark: 394635K(439104K)] 450595K(515776K), 0.1292870 secs] [Times: user=0.12 sys=0.01, real=0.13 secs] 
2014-11-05T14:25:10.777+0900: 235.646: [CMS-concurrent-sweep-start]
2014-11-05T14:25:10.981+0900: 235.850: [CMS-concurrent-sweep: 0.203/0.203 secs] [Times: user=0.20 sys=0.00, real=0.20 secs] 
2014-11-05T14:25:10.981+0900: 235.850: [CMS-concurrent-reset-start]
2014-11-05T14:25:10.983+0900: 235.852: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
2014-11-05T14:25:32.473+0900: 257.342: [GC2014-11-05T14:25:32.474+0900: 257.342: [DefNew: 76664K-&gt;2361K(76672K), 0.0146410 secs] 463666K-&gt;389381K(515776K), 0.0148600 secs] [Times: user=0.01 sys=0.00, real=0.02 secs] 
2014-11-05T14:26:44.480+0900: 329.349: [GC2014-11-05T14:26:44.480+0900: 329.349: [DefNew: 70521K-&gt;1291K(76672K), 0.0214830 secs] 457541K-&gt;388311K(515776K), 0.0216760 secs] [Times: user=0.01 sys=0.00, real=0.02 secs] 
2014-11-05T14:27:56.504+0900: 401.373: [GC2014-11-05T14:27:56.504+0900: 401.373: [DefNew: 69451K-&gt;1214K(76672K), 0.0102000 secs] 456471K-&gt;388234K(515776K), 0.0103740 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
</pre>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> CMSログの見方</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> New領域GCログ</h3>
<div class="outline-text-3" id="text-3-1">
<p>
New領域のGCは <code>minor GC</code> と呼ばれる場合があります。
</p>

<p>
<code>DefNew</code> と <code>PraNew</code> 文字が含まれた行は <code>New</code> 領域のGC処理ログです。シングルコアの場合
<code>DefNew=、マルチコアは =PraNew</code> となります。
</p>

<p>
New領域のGCログは一行で完結する。ログ先頭の <code>GC</code> タグはSTWであることを示している。(つ
まりNew領域のGC処理はStop the worldです)続きの部分はGC前後New領域内メモリの変化を示し
ている、その次の部分は、JVM全体のメモリ使用量の変化を示している。
</p>
<pre class="example">
2014-11-05T16:59:21.544+0900: 9486.413: [GC2014-11-05T16:59:21.544+0900: 9486.413: [DefNew: 68932K-&gt;1046K(76672K), 0.0122090 secs] 472847K-&gt;405094K(515776K), 0.0123880 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
                                          ★                                        ~~~~~~  ~~~~~   ~~~~  ~~~~                     ~~~~~~~  ~~~~~~
                                                                                      A       B       C     D                         E       F
</pre>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">A</td>
<td class="left">New領域のGC</td>
<td class="left">DefNew</td>
</tr>

<tr>
<td class="left">B</td>
<td class="left">GC前New領域の使用量</td>
<td class="left">68932K</td>
</tr>

<tr>
<td class="left">C</td>
<td class="left">GC後New領域の使用量</td>
<td class="left">1046K</td>
</tr>

<tr>
<td class="left">D</td>
<td class="left">New領域GCの閾値</td>
<td class="left">76672K</td>
</tr>

<tr>
<td class="left">E</td>
<td class="left">GC前JVMメモリの使用量</td>
<td class="left">472847K</td>
</tr>

<tr>
<td class="left">F</td>
<td class="left">GC後JVMメモリの使用量</td>
<td class="left">405094K</td>
</tr>
</tbody>
</table>

<p>
New領域容量の変化とJMV全体のメモリ容量の変化からOLD領域の増加サイズを算出する。
</p>

<pre class="example">
New領域変化容量： 68932 K - 1046K   = 67886K
JVM全体変化容量： 472847K - 405094K = 67753K
★OLD領域の増加サイズ： New領域変化容量 - JVM全体変化容量 = 133K
</pre>

<p>
最後の <code>real</code> 部分はSTW(アプリ停止時間)の時間となります、10ミリ秒ですね。
</p>
<pre class="example">
[Times: user=0.01 sys=0.00, real=0.01 secs]
</pre>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Old領域GCログ</h3>
<div class="outline-text-3" id="text-3-2">
<p>
以下は通常なCMS処理のログです。
</p>
<pre class="example">
★CMS起きる前のNewGCログ
2014-11-05T16:59:21.544+0900: 9486.413: [GC2014-11-05T16:59:21.544+0900: 9486.413: [DefNew: 68932K-&gt;1046K(76672K), 0.0122090 secs] 472847K-&gt;405094K(515776K), 0.0123880 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 

★①
2014-11-05T16:59:21.564+0900: 9486.433: [GC [1 CMS-initial-mark: 404047K(439104K)] 405358K(515776K), 0.0084940 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 

★②-1
2014-11-05T16:59:21.573+0900: 9486.442: [CMS-concurrent-mark-start]
2014-11-05T16:59:21.727+0900: 9486.596: [CMS-concurrent-mark: 0.154/0.154 secs] [Times: user=0.14 sys=0.00, real=0.15 secs] 

★②-2
2014-11-05T16:59:21.727+0900: 9486.596: [CMS-concurrent-preclean-start]
2014-11-05T16:59:21.754+0900: 9486.623: [CMS-concurrent-preclean: 0.027/0.027 secs] [Times: user=0.00 sys=0.00, real=0.03 secs] 

★③
2014-11-05T16:59:21.754+0900: 9486.623: [GC[YG occupancy: 1535 K (76672 K)]2014-11-05T16:59:21.754+0900: 9486.623: [Rescan (non-parallel) 2014-11-05T16:59:21.754+0900: 9486.623: [grey object rescan, 0.0012560 secs]2014-11-05T16:59:21.755+0900: 9486.624: [root rescan, 0.0064000 secs], 0.0077470 secs]2014-11-05T16:59:21.762+0900: 9486.631: [weak refs processing, 0.0003290 secs]2014-11-05T16:59:21.762+0900: 9486.631: [class unloading, 0.0108870 secs]2014-11-05T16:59:21.773+0900: 9486.642: [scrub symbol table, 0.0156480 secs]2014-11-05T16:59:21.789+0900: 9486.658: [scrub string table, 0.0012200 secs] [1 CMS-remark: 404047K(439104K)] 405583K(515776K), 0.0371740 secs] [Times: user=0.04 sys=0.01, real=0.04 secs] 

★④-1
2014-11-05T16:59:21.792+0900: 9486.661: [CMS-concurrent-sweep-start]
2014-11-05T16:59:22.187+0900: 9487.056: [CMS-concurrent-sweep: 0.395/0.395 secs] [Times: user=0.38 sys=0.00, real=0.39 secs] 

★④-2
2014-11-05T16:59:22.189+0900: 9487.057: [CMS-concurrent-reset-start]

2014-11-05T16:59:22.190+0900: 9487.059: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 

★CMS後のNewGCログ
2014-11-05T17:00:32.559+0900: 9557.428: [GC2014-11-05T17:00:32.559+0900: 9557.428: [DefNew: 69206K-&gt;1062K(76672K), 0.0103860 secs] 104633K-&gt;36628K(515776K), 0.0105880 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
</pre>
<p>
CMS前後のNewGCログのJVMメモリ使用量からメモリが掃除されることをわかります。
405094K → 104633K、約293MBが掃除された。
</p>

<p>
Initial Markフェースログの先頭に <code>GC</code> 文字が現れるので、STWが発生することが分かります。
</p>
<pre class="example">
★①
2014-11-05T16:59:21.564+0900: 9486.433: [GC [1 CMS-initial-mark: 404047K(439104K)] 405358K(515776K), 0.0084940 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
                                                                 ~~~~~~  ~~~~~~    ~~~~~~  ~~~~~~                                                 ~~~~~~~~~~~~
                                                                   A        B        C       D                                                         E
</pre>
<p>
Initial Markフェースログの内訳
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">A</td>
<td class="left">CMS起動時のOLD領域使用量</td>
<td class="left">404047K</td>
</tr>

<tr>
<td class="left">B</td>
<td class="left">CMSトリガーするOLD領域閾値</td>
<td class="left">439104K</td>
</tr>

<tr>
<td class="left">C</td>
<td class="left">CMS起動時JVMのメモリの使用量</td>
<td class="left">405358K</td>
</tr>

<tr>
<td class="left">D</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">E</td>
<td class="left">Initial Markフェースで消費した時間</td>
<td class="left">10 ミリ秒</td>
</tr>
</tbody>
</table>

<p>
続いて、Concurrent MarkとConcurrent precleaning処理の時間を示している。この部分の処理
はアプリケーションと平行で行われるため、停止時間生じない。
</p>
<pre class="example">
★②-1
2014-11-05T16:59:21.573+0900: 9486.442: [CMS-concurrent-mark-start]
2014-11-05T16:59:21.727+0900: 9486.596: [CMS-concurrent-mark: 0.154/0.154 secs] [Times: user=0.14 sys=0.00, real=0.15 secs] 
                                                                                                            ~~~~~~~~~~~~~~
                                                                                                                  F
★②-2
2014-11-05T16:59:21.727+0900: 9486.596: [CMS-concurrent-preclean-start]
2014-11-05T16:59:21.754+0900: 9486.623: [CMS-concurrent-preclean: 0.027/0.027 secs] [Times: user=0.00 sys=0.00, real=0.03 secs] 
                                                                                                                ~~~~~~~~~~~~~~
                                                                                                                      G
</pre>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">F</td>
<td class="left">Concurrent Markフェースで消費した時間</td>
<td class="left">150 ミリ秒</td>
</tr>

<tr>
<td class="left">G</td>
<td class="left">Concurrent Precleanフェースで消費した時間</td>
<td class="left">30ミリ秒</td>
</tr>
</tbody>
</table>

<p>
Parallel Remarkフェーズのログは１行で完結する、折り返してインデントを付けると次の形に
なります。
</p>
<pre class="example">
★③
2014-11-05T16:59:21.754+0900: 9486.623:
[GC
    [YG occupancy: 1535 K (76672 K)]
                   ~~~~    ~~~~~
                    H        I
    2014-11-05T16:59:21.754+0900: 9486.623:
                                            [
                                              Rescan (non-parallel)
                                                2014-11-05T16:59:21.754+0900: 9486.623: [grey object rescan, 0.0012560 secs]
                                                2014-11-05T16:59:21.755+0900: 9486.624: [root rescan, 0.0064000 secs]
                                             , 0.0077470 secs
                                            ]
    2014-11-05T16:59:21.762+0900: 9486.631: [weak refs processing, 0.0003290 secs]
    2014-11-05T16:59:21.762+0900: 9486.631: [class unloading, 0.0108870 secs]
    2014-11-05T16:59:21.773+0900: 9486.642: [scrub symbol table, 0.0156480 secs]
    2014-11-05T16:59:21.789+0900: 9486.658: [scrub string table, 0.0012200 secs]

    [1 CMS-remark: 404047K(439104K)] 405583K(515776K), 0.0371740 secs
                   ~~~~~~  ~~~~~~    ~~~~~~  ~~~~~~
                     J       K         L       M
]
[Times: user=0.04 sys=0.01, real=0.04 secs]
                            ~~~~~~~~~~~~~~
                                 N
</pre>
<p>
内訳
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">H</td>
<td class="left">現時点New領域の使用量</td>
<td class="left">1535K</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">I</td>
<td class="left">New領域GCの閾値</td>
<td class="left">76672K</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">J</td>
<td class="left">現時点OLD領域使用量</td>
<td class="left">404047K</td>
<td class="left">変化なし</td>
</tr>

<tr>
<td class="left">K</td>
<td class="left">CMSトリガーするOLD領域閾値</td>
<td class="left">439104K</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">L</td>
<td class="left">現時点JVMのメモリの使用量</td>
<td class="left">405583K</td>
<td class="left">225K増加</td>
</tr>

<tr>
<td class="left">M</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">N</td>
<td class="left">Parallel Remarkフェーズで消費した時間</td>
<td class="left">40 ミリ秒</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
<p>
処理時間からみるとParallel RemarkフェーズはInitial Markフフェーズより時間がかかること
が分かりました。
</p>

<p>
続いて、Concurrent SweepとConcurrent Reset処理の時間を示している。この部分の処理
はアプリケーションと平行で行われるため、停止時間生じない。
</p>
<pre class="example">
★④-1
2014-11-05T16:59:21.792+0900: 9486.661: [CMS-concurrent-sweep-start]
2014-11-05T16:59:22.187+0900: 9487.056: [CMS-concurrent-sweep: 0.395/0.395 secs] [Times: user=0.38 sys=0.00, real=0.39 secs]
                                                                                                             ~~~~~~~~~~~~~~
                                                                                                                   O
★④-2
2014-11-05T16:59:22.189+0900: 9487.057: [CMS-concurrent-reset-start]
2014-11-05T16:59:22.190+0900: 9487.059: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.01 secs]
                                                                                                             ~~~~~~~~~~~~~~~
                                                                                                                   P
</pre>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">O</td>
<td class="left">Concurrent Sweepフェースで消費した時間</td>
<td class="left">390 ミリ秒</td>
</tr>

<tr>
<td class="left">P</td>
<td class="left">Concurrent Resetフェースで消費した時間</td>
<td class="left">10ミリ秒</td>
</tr>
</tbody>
</table>

<p>
フェース①〜④の処理時間とJVMメモリ容量変化は以下となります。
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="right" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">フェーズ名</th>
<th scope="col" class="left">一時停止</th>
<th scope="col" class="right">処理時間(ミリ秒)</th>
<th scope="col" class="right">JVMメモリ(MB)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">①</td>
<td class="left">Initial Mark</td>
<td class="left">◯</td>
<td class="right">10</td>
<td class="right">395.8</td>
</tr>

<tr>
<td class="left">②-1</td>
<td class="left">Concurrent Mark</td>
<td class="left">&#xa0;</td>
<td class="right">150</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">②-2</td>
<td class="left">Concurrent precleaning</td>
<td class="left">&#xa0;</td>
<td class="right">30</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">③</td>
<td class="left">Parallel Remark</td>
<td class="left">◯</td>
<td class="right">40</td>
<td class="right">396.0</td>
</tr>

<tr>
<td class="left">④-1</td>
<td class="left">Concurrent Sweeping</td>
<td class="left">&#xa0;</td>
<td class="right">390</td>
<td class="right">102.0</td>
</tr>

<tr>
<td class="left">④-2</td>
<td class="left">Concurrent Reset</td>
<td class="left">&#xa0;</td>
<td class="right">10</td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="right">630</td>
<td class="right">-294</td>
</tr>
</tbody>
</table>
<p>
CMS全体処理で630ミリ秒かかる、そのうち50ミリ秒の停止時間が発生する。掃除されたメモリ
容量約294MB。
</p>
</div>
</div>


<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> concurrent mode failure</h3>
<div class="outline-text-3" id="text-3-3">
<p>
次の状況に置いて、コンカレントGCが縮退しFullGCを引き起こす可能性があります。
</p>
<ul class="org-ul">
<li>システムが高負荷時に、新しいオブジェクトの生成速度がGCのメモリ解放速度より早い
</li>
<li>Java ヒープの断片化率が非常に高い時
</li>
</ul>

<p>
また、縮退後のFullGCは <code>Serial Old</code> モードで行われるため、アプリ停止時間が長くなります。
</p>

<p>
<code>Initial Mark</code> 次の <code>Concurrent Mark</code> で縮退が起きて、 <code>FullGC</code> が起こった例。
</p>
<pre class="example">
2014-11-20T14:04:17.969+0900: 423.523: [GC [1 CMS-initial-mark: 439103K(439104K)] 451488K(515776K), 0.0209760 secs] [Times: user=0.02 sys=0.00, real=0.02 secs] 
2014-11-20T14:04:18.110+0900: 423.663: [CMS-concurrent-mark-start]
2014-11-20T14:04:19.105+0900: 424.659: [Full GC2014-11-20T14:04:19.105+0900: 424.659: [CMS2014-11-20T14:04:19.745+0900: 425.299: [CMS-concurrent-mark: 1.632/1.636 secs] [Times: user=1.41 sys=0.17, real=1.64 secs] 
 (concurrent mode failure): 439103K-&gt;439103K(439104K), 1.7507640 secs] 515775K-&gt;458321K(515776K), [CMS Perm : 57066K-&gt;57066K(95504K)], 1.7509190 secs] [Times: user=1.74 sys=0.00, real=1.75 secs]
</pre>

<p>
<code>FullGC</code> を示すログに内容を分解すると次のようになります。
</p>
<pre class="example">
2014-11-20T14:04:19.105+0900: 424.659:
    [Full GC2014-11-20T14:04:19.105+0900: 424.659: 

          ★CMS失敗時の内容
          [CMS2014-11-20T14:04:19.745+0900: 425.299: 
               [CMS-concurrent-mark: 1.632/1.636 secs]
               [Times: user=1.41 sys=0.17, real=1.64 secs]  
               (concurrent mode failure): 439103K-&gt;439103K(439104K), 1.7507640 secs] 

          ★縮退後、FullGC実施後の結果
          515775K-&gt;458321K(515776K), [CMS Perm : 57066K-&gt;57066K(95504K)], 1.7509190 secs]

    [Times: user=1.74 sys=0.00, real=1.75 secs]
</pre>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 手動FullGC時のログ</h3>
<div class="outline-text-3" id="text-3-4">
<p>
CMS GCを利用した場合でも手動でFullGCを起こすことは可能です。以下は手動GC掛けられた時
にのGCログとなります。
</p>

<pre class="example">
2014-11-20T15:03:39.462+0900: 2611.658: [Full GC2014-11-20T15:03:39.462+0900: 2611.658: [CMS: 365597K-&gt;33109K(439104K), 0.3923750 secs] 408803K-&gt;33109K(515776K), [CMS Perm : 57580K-&gt;57357K(95888K)], 0.3925240 secs] [Times: user=0.36 sys=0.00, real=0.39 secs] 

★分解
2014-11-20T15:03:39.462+0900: 2611.658: 
    [Full GC2014-11-20T15:03:39.462+0900: 2611.658: 
          [CMS: 365597K-&gt;33109K(439104K), 0.3923750 secs] 408803K-&gt;33109K(515776K), 
          [CMS Perm : 57580K-&gt;57357K(95888K)], 0.3925240 secs] 
    [Times: user=0.36 sys=0.00, real=0.39 secs]
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 参考</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><a href="http://wall-climb.com/2009/10/12/%25E3%2582%25B3%25E3%2583%25B3%25E3%2582%25AB%25E3%2583%25AC%25E3%2583%25B3%25E3%2583%2588gc%25E3%2581%25AE%25E6%25B3%25A8%25E6%2584%258F%25E7%2582%25B9/">コンカレントGCの注意点</a>
</li>
<li><a href="http://automation123.blogspot.jp/2012/02/understanding-concurrent-mark-sweep.html">Understanding Concurrent Mark Sweep Garbage Collector Logs</a>
</li>
<li><a href="https://blogs.oracle.com/poonam/entry/understanding_cms_gc_logs">Understanding CMS GC Logs</a>
</li>
<li><a href="http://a4dosanddos.hatenablog.com/entry/2014/01/24/011007">「Java」GC ログを出力する</a>
</li>
<li><a href="http://h50146.www5.hp.com/products/software/oe/hpux/developer/column02/gabage_02/">Javaのかなめ、「ガベージ・コレクション」をやさしく学ぶ・後編</a>
</li>
</ul>
</div>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[調査]JBossAS7のソケット操作タイムアウト値について]]></title>
    <link href="http://luozengbin.github.io/blog/2014-10-08-%5B%E8%AA%BF%E6%9F%BB%5Djbossas7%E3%81%AE%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E6%93%8D%E4%BD%9C%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E5%80%A4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6.html"/>
    <updated>2014-10-08T00:00:00+09:00</updated>
    <id>http://luozengbin.github.io/blog/[調査]jbossas7のソケット操作タイムアウト値について</id>
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. DEFAULT_CONNECTION_TIMEOUTオプションの役割</a></li>
<li><a href="#sec-2">2. JBossASの実装</a></li>
<li><a href="#sec-3">3. 注意書き</a></li>
<li><a href="#sec-4">4. 参考リンク</a></li>
</ul>
</div>
</div>


<p>
JBossAS の起動オプション <code>org.apache.coyote.http11.DEFAULT_CONNECTION_TIMEOUT</code> につい
て誤解があったので、メモしておきます。
</p>




<p>
まず、ドキュメントの説明。デフォルトタイムアウト値が60秒ですね。
</p>


<pre class="example">
org.apache.coyote.http11.DEFAULT_CONNECTION_TIMEOUT
Default socket timeout. The default value is 60000 ms.
</pre>


<p>
説明だけでよく分からない、最初はサーバサイトワーカスレッドの処理時間タイムアウト値
と理解しました。
</p>




<p>
テストアプリでタイムアウト時の動作を確認する。
</p>


<pre class="example">
+----------+            +----------------+
| SoapUI   +------------+  テストアプリ  |
+----------+            |                |
                        +----------------+
                        |  JBossAS 7.x   |
                        +----------------+
</pre>


<p>
SoapUIのリードタイムアウトを120秒に変更する、テストアプリに <code>Thread.sleep(70 * 1000)</code>
コードを仕込んで処理時間を長くする。これでタイムアウトになると考えたのですが、結果的に
タイムアウトせず、正常なレスポンスでした。これで、 <code>DEFAULT_CONNECTION_TIMEOUT</code> はワー
カスレッドのタイムアウト値ではないことが分かりました。
</p>




<p>
説明文にソケットのタイムアウト値であることが書かれたので <code>telnet</code> でソケット通信の各
stepの処理時間をあえて長くして動作状況を観測してみました。
</p>




<ol class="org-ol">
<li>telnetでコネクションを貼る
</li>
<li>ヘッダを途中まで送信する
</li>
<li>60秒待つこと
</li>
</ol>




<pre class="example">
$ telnet localhost 8080
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
POST http://localhost:8080/testapp/HelloWorld HTTP/1.1
Connection: close
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: "sayHello"
Content-Length: 318
Host: localhost:8080
★ここで60秒を待つ
Connection closed by foreign host.
</pre>




<p>
step3のところで60秒後、サーバからfinパケットが送出されてコネクションが切れた。
<code>DEFAULT_CONNECTION_TIMEOUT</code> パラメータの意味が少し掴みました。
</p>




<p>
少し掘り下げて見たいので、コードリーディングして実装の概要を以下に紹介します。
</p>




<p>
<!-- more -->
</p>




<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> DEFAULT_CONNECTION_TIMEOUTオプションの役割</h2>
<div class="outline-text-2" id="text-1">
<p>
JBossASのJava起動オプションで指定する
<code>-Dorg.apache.coyote.http11.DEFAULT_CONNECTION_TIMEOUT=xxxxx</code> オプションの値は最終的に
ソケット操作のブロックタイムアウト値 <code>java.net.ServerSocket.setSoTimeout(xx)</code> に反映さ
れる。
</p>

<p>
サーバ側で以下のソケット操作でブロックされる時間が指定時間より超えるとタイムアウトさせ
る機能です。
</p>
<pre class="example">
ServerSocket.accept();
SocketInputStream.read();
DatagramSocket.receive();
</pre>

<p>
例えば、HTTPヘッダ受信途中クライアント側がストール状態になり、
<code>SocketInputStream.read()</code> 処理がずっと待ち続けるには行けないので（FDのリソース枯渇に
なるかも知らない）、タイムアウトさせる必要があります。
</p>
</div>
</div>




<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> JBossASの実装</h2>
<div class="outline-text-2" id="text-2">
<p>
<code>org.apache.coyote.http11.Constants</code> にデフォルト値が60秒で定義されている。
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #729fcf; font-weight: bold;">public</span> <span style="color: #729fcf; font-weight: bold;">final</span> <span style="color: #729fcf; font-weight: bold;">class</span> <span style="color: #2DA6F5; font-weight: bold;">Constants</span> {
    ...............
    <span style="color: #888a85; font-style: italic;">//</span><span style="color: #888a85; font-style: italic;">&#9733;&#12371;&#12371;&#12391;Java&#12458;&#12503;&#12471;&#12519;&#12531;&#12363;&#12425;&#20516;&#12434;&#21442;&#29031;&#12375;&#12390;&#12356;&#12427;</span>
    <span style="color: #729fcf; font-weight: bold;">public</span> <span style="color: #729fcf; font-weight: bold;">static</span> <span style="color: #729fcf; font-weight: bold;">final</span> <span style="color: #2DA6F5; font-weight: bold;">int</span> DEFAULT_CONNECTION_TIMEOUT =
            Integer.valueOf(System.getProperty(<span style="color: #ad7fa8;">"org.apache.coyote.http11.DEFAULT_CONNECTION_TIMEOUT"</span>, <span style="color: #ad7fa8;">"60000"</span>)).intValue();
    .............
</pre>
</div>

<p>
この値は以下の流れで、 <code>JIoEndpoint</code> クラスの <code>soTimeout</code> 属性に反映される。
</p>
<pre class="example">
1.org.jboss.as.web.WebConnectorService.start()
2.  org.apache.catalina.connector.Connectorのコンストラクタ処理
3.    apache.coyote.http11.Http11Protocolのコンストラクタ処理
4.      org.apache.tomcat.util.net.JIoEndpoint.setSoTimeout(xx)
</pre>

<p>
<code>acceptor</code> スレッドで新規コネクションをacceptしワーカスレッドに渡した後にワーカスレッ
ドの <code>run</code> 関数内 <code>java.net.ServerSocket.setSoTimeout(xx)</code> 関数を呼び出し、値を設定す
る。具体的な流れは以下となります。
</p>

<pre class="example">
1. org.apache.tomcat.util.net.JIoEndpoint.Acceptor.run()
2.   org.apache.tomcat.util.net.JIoEndpoint.processSocket(socket)
3.     ★ここで分岐がある、別途検証する
4.     org.apache.tomcat.util.net.JIoEndpoint.Workerが起動される
5.       org.apache.tomcat.util.net.JIoEndpoint.Worker.run()
6.         org.apache.tomcat.util.net.JIoEndpoint.setSocketOptions(socket)
7.           socket.setSoTimeout(soTimeout);
</pre>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 注意書き</h2>
<div class="outline-text-2" id="text-3">
<p>
<code>org.apache.coyote.http11.DEFAULT_CONNECTION_TIMEOUT</code> が次のように誤解されることもあ
るので、要注意です。
</p>
<pre class="example">
ワーカスレッドの実行時間のタイムアウト値
</pre>

<p>
あくまでもソケットのブロックタイムアウト値なので、アプリのロジック処理時と関係ないで
す。主にHTTPヘッダとHTTP本文の読み取り処理のブロック時間を監視するために使われる。
</p>

<p>
以下、HTTP本文読み取り処理でブロックタイムアウトが起きた時のサーバログです。
</p>
<pre class="example">
Caused by: java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method) [rt.jar:1.7.0_65]
    at java.net.SocketInputStream.read(SocketInputStream.java:152) [rt.jar:1.7.0_65]
    at java.net.SocketInputStream.read(SocketInputStream.java:122) [rt.jar:1.7.0_65]
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:737) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:767) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:116) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    at org.apache.coyote.http11.InternalInputBuffer.doRead(InternalInputBuffer.java:697) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    at org.apache.coyote.Request.doRead(Request.java:438) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:341) [jbossweb-7.2.2.Final-redhat-1.jar:7.2.2.Final-redhat-1]
    ... 47 more
</pre>
</div>
</div>




<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 参考リンク</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><a href="https://docs.jboss.org/jbossweb/7.0.x/sysprops.html">JBossWeb System Properties</a>
</li>
<li><a href="http://docs.oracle.com/javase/jp/1.4/api/java/net/Socket.html#getSoTimeout%2528%2529">Java API Doc クラス Socket</a>
</li>
<li><a href="http://docs.oracle.com/javase/jp/6/api/java/net/SocketOptions.html#SO_TIMEOUT">Java API Doc - インタフェース SocketOptions</a>
</li>
</ul>
</div>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[メモ]JBossAS稼働情報収取得方法]]></title>
    <link href="http://luozengbin.github.io/blog/2014-09-30-%5B%E3%83%A1%E3%83%A2%5Djbossas%E7%A8%BC%E5%83%8D%E6%83%85%E5%A0%B1%E5%8F%8E%E5%8F%96%E5%BE%97%E6%96%B9%E6%B3%95.html"/>
    <updated>2014-09-30T00:00:00+09:00</updated>
    <id>http://luozengbin.github.io/blog/[メモ]jbossas稼働情報収取得方法</id>
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. <code>jboss-cli.sh</code> 方式</a>
<ul>
<li><a href="#sec-1-1">1.1. JBoss管理インスタンスへ接続する</a></li>
<li><a href="#sec-1-2">1.2. JVMスレッドプール情報取得</a></li>
<li><a href="#sec-1-3">1.3. JVMメモリ情報取得</a></li>
<li><a href="#sec-1-4">1.4. データベース接続プール情報取得</a></li>
<li><a href="#sec-1-5">1.5. JDBCステートメントキャッシュ情報</a></li>
<li><a href="#sec-1-6">1.6. 起動オプション、システム属性などの確認</a></li>
<li><a href="#sec-1-7">1.7. EJBスレッドプールの確認</a></li>
<li><a href="#sec-1-8">1.8. トランザクション情報の確認</a></li>
</ul>
</li>
<li><a href="#sec-2">2. <code>remoting-jmx</code> 方式</a>
<ul>
<li><a href="#sec-2-1">2.1. JBossAS接続用のjmxterm起動スクリプト</a></li>
<li><a href="#sec-2-2">2.2. jmxterm基本的な使い方</a></li>
<li><a href="#sec-2-3">2.3. Web系ワーカスレッドの情報取得</a></li>
<li><a href="#sec-2-4">2.4. リクエストプロセッサーの稼働状況</a></li>
</ul>
</li>
<li><a href="#sec-3">3. <code>RESTful</code> 方式</a></li>
<li><a href="#sec-4">4. 参考情報</a></li>
</ul>
</div>
</div>


<p>
コマンドインタフェースから <code>JBossAS 7.x</code> アプリケーションサーバの稼働情報収取得方法に
ついて検証してみた。主に以下の方法が存在する。
</p>




<ol class="org-ol">
<li><code>jboss-cli.sh</code> コマンドでサーバの設定情報やRuntime情報を取得する。
</li>
<li>RESTful Management Interfaces HTTP通信でJSON形式で情報ヲ取得する。
</li>
<li>remoting-jmx インタフェースでMBeanサーバから情報を取得する。
</li>
</ol>




<p>
1と2の情報源が一緒です。取れる情報が次のようなイメージ、用途に応じて選ぶことになると思
います。
</p>


<pre class="example">
+-------------+
| jboss-cli   |
|   +---------+-----+
|   |         |     |
|   |         | JMX |
|   |         |     |
|   +---------+-----+
+-------------+
</pre>




<p>
<!-- more -->
</p>




<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> <code>jboss-cli.sh</code> 方式</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> JBoss管理インスタンスへ接続する</h3>
<div class="outline-text-3" id="text-1-1">
<pre class="example">
$ jboss-cli.sh -c controller=&lt;hostname:port&gt;
</pre>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> JVMスレッドプール情報取得</h3>
<div class="outline-text-3" id="text-1-2">
<pre class="example">
[standalone@localhost:9999 /] /core-service=platform-mbean/type=threading:read-resource(recursive=true, include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "all-thread-ids" =&gt; [
            137L,
            .......
            2L
        ],
        "thread-contention-monitoring-supported" =&gt; true,
        "thread-cpu-time-supported" =&gt; true,
        "current-thread-cpu-time-supported" =&gt; true,
        "object-monitor-usage-supported" =&gt; true,
        "synchronizer-usage-supported" =&gt; true,
        "thread-contention-monitoring-enabled" =&gt; false,
        "thread-cpu-time-enabled" =&gt; true,
        "thread-count" =&gt; 36,
        "peak-thread-count" =&gt; 78,
        "total-started-thread-count" =&gt; 130L,
        "daemon-thread-count" =&gt; 14,
        "current-thread-cpu-time" =&gt; 5399864L,
        "current-thread-user-time" =&gt; 0L,
        "object-name" =&gt; "java.lang:type=Threading"
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> JVMメモリ情報取得</h3>
<div class="outline-text-3" id="text-1-3">
<p>
メモリ概要情報
</p>
<pre class="example">
[standalone@localhost:9999 /] /core-service=platform-mbean/type=memory:read-resource(recursive=true, include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "heap-memory-usage" =&gt; {
            "init" =&gt; 1366294528L,
            "used" =&gt; 253812744L,
            "committed" =&gt; 1320878080L,
            "max" =&gt; 1321795584L
        },
        "non-heap-memory-usage" =&gt; {
            "init" =&gt; 24313856L,
            "used" =&gt; 62715312L,
            "committed" =&gt; 63045632L,
            "max" =&gt; 318767104L
        },
        "object-name" =&gt; "java.lang:type=Memory",
        "object-pending-finalization-count" =&gt; 0,
        "verbose" =&gt; false
    }
}
[standalone@localhost:9999 /]
</pre>

<p>
メモリ詳細情報
</p>
<pre class="example">
[standalone@localhost:9999 /] /core-service=platform-mbean/type=memory-pool:read-resource(recursive=true, include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {"name" =&gt; {
        "Eden_Space" =&gt; {
            "name" =&gt; "Eden_Space",
            "type" =&gt; "HEAP",
            "valid" =&gt; true,
            "memory-manager-names" =&gt; [
                "MarkSweepCompact",
                "Copy"
            ],
            "usage-threshold-supported" =&gt; false,
            "collection-usage-threshold-supported" =&gt; true,
            "usage-threshold" =&gt; undefined,
            "collection-usage-threshold" =&gt; 0L,
            "usage" =&gt; {
                "init" =&gt; 364445696L,
                "used" =&gt; 227453064L,
                "committed" =&gt; 364445696L,
                "max" =&gt; 364642304L
            },
            "peak-usage" =&gt; {
                "init" =&gt; 364445696L,
                "used" =&gt; 364445696L,
                "committed" =&gt; 364642304L,
                "max" =&gt; 364642304L
            },
            "usage-threshold-exceeded" =&gt; undefined,
            "usage-threshold-count" =&gt; undefined,
            "collection-usage-threshold-exceeded" =&gt; false,
            "collection-usage-threshold-count" =&gt; 0L,
            "collection-usage" =&gt; {
                "init" =&gt; 364445696L,
                "used" =&gt; 0L,
                "committed" =&gt; 364445696L,
                "max" =&gt; 364642304L
            },
            "object-name" =&gt; "java.lang:type=MemoryPool,name=\"Eden Space\""
        },
        "Survivor_Space" =&gt; {
            "name" =&gt; "Survivor_Space",
            "type" =&gt; "HEAP",
            "valid" =&gt; true,
            "memory-manager-names" =&gt; [
                "MarkSweepCompact",
                "Copy"
            ],
            "usage-threshold-supported" =&gt; false,
            "collection-usage-threshold-supported" =&gt; true,
            "usage-threshold" =&gt; undefined,
            "collection-usage-threshold" =&gt; 0L,
            "usage" =&gt; {
                "init" =&gt; 45481984L,
                "used" =&gt; 970896L,
                "committed" =&gt; 45547520L,
                "max" =&gt; 45547520L
            },
            "peak-usage" =&gt; {
                "init" =&gt; 45481984L,
                "used" =&gt; 24101280L,
                "committed" =&gt; 45547520L,
                "max" =&gt; 45547520L
            },
            "usage-threshold-exceeded" =&gt; undefined,
            "usage-threshold-count" =&gt; undefined,
            "collection-usage-threshold-exceeded" =&gt; false,
            "collection-usage-threshold-count" =&gt; 0L,
            "collection-usage" =&gt; {
                "init" =&gt; 45481984L,
                "used" =&gt; 970896L,
                "committed" =&gt; 45547520L,
                "max" =&gt; 45547520L
            },
            "object-name" =&gt; "java.lang:type=MemoryPool,name=\"Survivor Space\""
        },
        "Perm_Gen" =&gt; {
            "name" =&gt; "Perm_Gen",
            "type" =&gt; "NON_HEAP",
            "valid" =&gt; true,
            "memory-manager-names" =&gt; ["MarkSweepCompact"],
            "usage-threshold-supported" =&gt; true,
            "collection-usage-threshold-supported" =&gt; true,
            "usage-threshold" =&gt; 0L,
            "collection-usage-threshold" =&gt; 0L,
            "usage" =&gt; {
                "init" =&gt; 21757952L,
                "used" =&gt; 57597424L,
                "committed" =&gt; 57802752L,
                "max" =&gt; 268435456L
            },
            "peak-usage" =&gt; {
                "init" =&gt; 21757952L,
                "used" =&gt; 57597424L,
                "committed" =&gt; 57802752L,
                "max" =&gt; 268435456L
            },
            "usage-threshold-exceeded" =&gt; false,
            "usage-threshold-count" =&gt; 0L,
            "collection-usage-threshold-exceeded" =&gt; false,
            "collection-usage-threshold-count" =&gt; 0L,
            "collection-usage" =&gt; {
                "init" =&gt; 21757952L,
                "used" =&gt; 55181008L,
                "committed" =&gt; 55181312L,
                "max" =&gt; 268435456L
            },
            "object-name" =&gt; "java.lang:type=MemoryPool,name=\"Perm Gen\""
        },
        "Code_Cache" =&gt; {
            "name" =&gt; "Code_Cache",
            "type" =&gt; "NON_HEAP",
            "valid" =&gt; true,
            "memory-manager-names" =&gt; ["CodeCacheManager"],
            "usage-threshold-supported" =&gt; true,
            "collection-usage-threshold-supported" =&gt; false,
            "usage-threshold" =&gt; 0L,
            "collection-usage-threshold" =&gt; undefined,
            "usage" =&gt; {
                "init" =&gt; 2555904L,
                "used" =&gt; 5117888L,
                "committed" =&gt; 5242880L,
                "max" =&gt; 50331648L
            },
            "peak-usage" =&gt; {
                "init" =&gt; 2555904L,
                "used" =&gt; 5123264L,
                "committed" =&gt; 5242880L,
                "max" =&gt; 50331648L
            },
            "usage-threshold-exceeded" =&gt; false,
            "usage-threshold-count" =&gt; 0L,
            "collection-usage-threshold-exceeded" =&gt; undefined,
            "collection-usage-threshold-count" =&gt; undefined,
            "collection-usage" =&gt; undefined,
            "object-name" =&gt; "java.lang:type=MemoryPool,name=\"Code Cache\""
        },
        "Tenured_Gen" =&gt; {
            "name" =&gt; "Tenured_Gen",
            "type" =&gt; "HEAP",
            "valid" =&gt; true,
            "memory-manager-names" =&gt; ["MarkSweepCompact"],
            "usage-threshold-supported" =&gt; true,
            "collection-usage-threshold-supported" =&gt; true,
            "usage-threshold" =&gt; 0L,
            "collection-usage-threshold" =&gt; 0L,
            "usage" =&gt; {
                "init" =&gt; 910884864L,
                "used" =&gt; 36957616L,
                "committed" =&gt; 910884864L,
                "max" =&gt; 911605760L
            },
            "peak-usage" =&gt; {
                "init" =&gt; 910884864L,
                "used" =&gt; 36957616L,
                "committed" =&gt; 910884864L,
                "max" =&gt; 911605760L
            },
            "usage-threshold-exceeded" =&gt; false,
            "usage-threshold-count" =&gt; 0L,
            "collection-usage-threshold-exceeded" =&gt; false,
            "collection-usage-threshold-count" =&gt; 0L,
            "collection-usage" =&gt; {
                "init" =&gt; 910884864L,
                "used" =&gt; 36957616L,
                "committed" =&gt; 910884864L,
                "max" =&gt; 911605760L
            },
            "object-name" =&gt; "java.lang:type=MemoryPool,name=\"Tenured Gen\""
        }
    }}
}
[standalone@localhost:9999 /]
</pre>

<p>
GCの実行状況
</p>
<pre class="example">
[standalone@localhost:9999 /] /core-service=platform-mbean/type=garbage-collector:read-resource(recursive=true, include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {"name" =&gt; {
        "MarkSweepCompact" =&gt; {
            "collection-count" =&gt; 6L,
            "collection-time" =&gt; 1183L,
            "memory-pool-names" =&gt; [
                "Eden_Space",
                "Survivor_Space",
                "Tenured_Gen",
                "Perm_Gen"
            ],
            "name" =&gt; "MarkSweepCompact",
            "object-name" =&gt; "java.lang:type=GarbageCollector,name=MarkSweepCompact",
            "valid" =&gt; true
        },
        "Copy" =&gt; {
            "collection-count" =&gt; 13L,
            "collection-time" =&gt; 3003L,
            "memory-pool-names" =&gt; [
                "Eden_Space",
                "Survivor_Space"
            ],
            "name" =&gt; "Copy",
            "object-name" =&gt; "java.lang:type=GarbageCollector,name=Copy",
            "valid" =&gt; true
        }
    }}
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> データベース接続プール情報取得</h3>
<div class="outline-text-3" id="text-1-4">
<pre class="example">
[standalone@localhost:9999 /] /subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true, recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "ActiveCount" =&gt; "0",
        "AvailableCount" =&gt; "20",
        "AverageBlockingTime" =&gt; "0",
        "AverageCreationTime" =&gt; "0",
        "CreatedCount" =&gt; "0",
        "DestroyedCount" =&gt; "0",
        "InUseCount" =&gt; "0",
        "MaxCreationTime" =&gt; "0",
        "MaxUsedCount" =&gt; "0",
        "MaxWaitCount" =&gt; "0",
        "MaxWaitTime" =&gt; "0",
        "TimedOut" =&gt; "0",
        "TotalBlockingTime" =&gt; "0",
        "TotalCreationTime" =&gt; "0"
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> JDBCステートメントキャッシュ情報</h3>
<div class="outline-text-3" id="text-1-5">
<pre class="example">
[standalone@localhost:9999 /] /subsystem=datasources/data-source=ExampleDS/statistics=jdbc:read-resource(include-runtime=true, recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "PreparedStatementCacheAccessCount" =&gt; "0",
        "PreparedStatementCacheAddCount" =&gt; "0",
        "PreparedStatementCacheCurrentSize" =&gt; "0",
        "PreparedStatementCacheDeleteCount" =&gt; "0",
        "PreparedStatementCacheHitCount" =&gt; "0",
        "PreparedStatementCacheMissCount" =&gt; "0"
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> 起動オプション、システム属性などの確認</h3>
<div class="outline-text-3" id="text-1-6">
<pre class="example">
[standalone@localhost:9999 /] /core-service=platform-mbean/type=runtime:read-resource(recursive=true, include-runtime=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "name" =&gt; "2147@localhost",
        "vm-name" =&gt; "OpenJDK 64-Bit Server VM",
        "vm-vendor" =&gt; "Oracle Corporation",
        "vm-version" =&gt; "24.65-b04",
        "spec-name" =&gt; "Java Virtual Machine Specification",
        "spec-vendor" =&gt; "Oracle Corporation",
        "spec-version" =&gt; "1.7",
        "management-spec-version" =&gt; "1.2",
        "class-path" =&gt; "/opt/jboss-eap-6.2/jboss-modules.jar",
        "library-path" =&gt; "/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib",
        "boot-class-path-supported" =&gt; true,
        "boot-class-path" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/resources.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/rt.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jsse.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jce.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/charsets.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/rhino.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jfr.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/classes",
        "input-arguments" =&gt; [
            "-D[Standalone]",
            "-XX:+UseCompressedOops",
            "-Xms1303m",
            "-Xmx1303m",
            "-XX:MaxPermSize=256m",
            "-Djava.net.preferIPv4Stack=true",
            "-Djboss.modules.system.pkgs=org.jboss.byteman",
            "-Djava.awt.headless=true",
            "-Djboss.modules.metrics=true",
            "-Dorg.apache.tomcat.util.ENABLE_MODELER=true",
            "-Dorg.jboss.boot.log.file=/opt/jboss-eap-6.2/standalone/log/server.log",
            "-Dlogging.configuration=file:/opt/jboss-eap-6.2/standalone/configuration/logging.properties"
        ],
        "start-time" =&gt; 1412040330424L,
        "system-properties" =&gt; {
            "[Standalone]" =&gt; "",
            "awt.toolkit" =&gt; "sun.awt.X11.XToolkit",
            "catalina.home" =&gt; "/opt/jboss-eap-6.2/standalone/tmp",
            "file.encoding" =&gt; "UTF-8",
            "file.encoding.pkg" =&gt; "sun.io",
            "file.separator" =&gt; "/",
            "java.awt.graphicsenv" =&gt; "sun.awt.X11GraphicsEnvironment",
            "java.awt.headless" =&gt; "true",
            "java.awt.printerjob" =&gt; "sun.print.PSPrinterJob",
            "java.class.path" =&gt; "/opt/jboss-eap-6.2/jboss-modules.jar",
            "java.class.version" =&gt; "51.0",
            "java.endorsed.dirs" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/endorsed",
            "java.ext.dirs" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/ext:/usr/java/packages/lib/ext",
            "java.home" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre",
            "java.io.tmpdir" =&gt; "/tmp",
            "java.library.path" =&gt; "/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib",
            "java.naming.factory.url.pkgs" =&gt; "org.jboss.as.naming.interfaces:org.jboss.ejb.client.naming",
            "java.net.preferIPv4Stack" =&gt; "true",
            "java.protocol.handler.pkgs" =&gt; "org.jboss.net.protocol|org.jboss.vfs.protocol",
            "java.runtime.name" =&gt; "OpenJDK Runtime Environment",
            "java.runtime.version" =&gt; "1.7.0_65-mockbuild_2014_07_16_06_06-b00",
            "java.specification.name" =&gt; "Java Platform API Specification",
            "java.specification.vendor" =&gt; "Oracle Corporation",
            "java.specification.version" =&gt; "1.7",
            "java.util.logging.manager" =&gt; "org.jboss.logmanager.LogManager",
            "java.vendor" =&gt; "Oracle Corporation",
            "java.vendor.url" =&gt; "http://java.oracle.com/",
            "java.vendor.url.bug" =&gt; "http://bugreport.sun.com/bugreport/",
            "java.version" =&gt; "1.7.0_65",
            "java.vm.info" =&gt; "mixed mode",
            "java.vm.name" =&gt; "OpenJDK 64-Bit Server VM",
            "java.vm.specification.name" =&gt; "Java Virtual Machine Specification",
            "java.vm.specification.vendor" =&gt; "Oracle Corporation",
            "java.vm.specification.version" =&gt; "1.7",
            "java.vm.vendor" =&gt; "Oracle Corporation",
            "java.vm.version" =&gt; "24.65-b04",
            "javax.management.builder.initial" =&gt; "org.jboss.as.jmx.PluggableMBeanServerBuilder",
            "javax.xml.datatype.DatatypeFactory" =&gt; "__redirected.__DatatypeFactory",
            "javax.xml.parsers.DocumentBuilderFactory" =&gt; "__redirected.__DocumentBuilderFactory",
            "javax.xml.parsers.SAXParserFactory" =&gt; "__redirected.__SAXParserFactory",
            "javax.xml.stream.XMLEventFactory" =&gt; "__redirected.__XMLEventFactory",
            "javax.xml.stream.XMLInputFactory" =&gt; "__redirected.__XMLInputFactory",
            "javax.xml.stream.XMLOutputFactory" =&gt; "__redirected.__XMLOutputFactory",
            "javax.xml.transform.TransformerFactory" =&gt; "__redirected.__TransformerFactory",
            "javax.xml.validation.SchemaFactory:http://www.w3.org/2001/XMLSchema" =&gt; "__redirected.__SchemaFactory",
            "javax.xml.xpath.XPathFactory:http://java.sun.com/jaxp/xpath/dom" =&gt; "__redirected.__XPathFactory",
            "jboss.home.dir" =&gt; "/opt/jboss-eap-6.2",
            "jboss.host.name" =&gt; "localhost",
            "jboss.modules.dir" =&gt; "/opt/jboss-eap-6.2/modules",
            "jboss.modules.metrics" =&gt; "true",
            "jboss.modules.system.pkgs" =&gt; "org.jboss.byteman",
            "jboss.node.name" =&gt; "localhost",
            "jboss.qualified.host.name" =&gt; "localhost",
            "jboss.server.base.dir" =&gt; "/opt/jboss-eap-6.2/standalone",
            "jboss.server.config.dir" =&gt; "/opt/jboss-eap-6.2/standalone/configuration",
            "jboss.server.data.dir" =&gt; "/opt/jboss-eap-6.2/standalone/data",
            "jboss.server.deploy.dir" =&gt; "/opt/jboss-eap-6.2/standalone/data/content",
            "jboss.server.log.dir" =&gt; "/opt/jboss-eap-6.2/standalone/log",
            "jboss.server.name" =&gt; "localhost",
            "jboss.server.persist.config" =&gt; "true",
            "jboss.server.temp.dir" =&gt; "/opt/jboss-eap-6.2/standalone/tmp",
            "line.separator" =&gt; "
",
            "logging.configuration" =&gt; "file:/opt/jboss-eap-6.2/standalone/configuration/logging.properties",
            "module.path" =&gt; "/opt/jboss-eap-6.2/modules",
            "org.apache.tomcat.util.ENABLE_MODELER" =&gt; "true",
            "org.apache.xml.security.ignoreLineBreaks" =&gt; "true",
            "org.jboss.boot.log.file" =&gt; "/opt/jboss-eap-6.2/standalone/log/server.log",
            "org.jboss.resolver.warning" =&gt; "true",
            "org.jboss.security.context.ThreadLocal" =&gt; "true",
            "org.xml.sax.driver" =&gt; "__redirected.__XMLReaderFactory",
            "os.arch" =&gt; "amd64",
            "os.name" =&gt; "Linux",
            "os.version" =&gt; "2.6.32-358.el6.x86_64",
            "path.separator" =&gt; ":",
            "sun.arch.data.model" =&gt; "64",
            "sun.boot.class.path" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/resources.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/rt.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jsse.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jce.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/charsets.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/rhino.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/jfr.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/classes",
            "sun.boot.library.path" =&gt; "/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.65.x86_64/jre/lib/amd64",
            "sun.cpu.endian" =&gt; "little",
            "sun.cpu.isalist" =&gt; "",
            "sun.io.unicode.encoding" =&gt; "UnicodeLittle",
            "sun.java.command" =&gt; "/opt/jboss-eap-6.2/jboss-modules.jar -mp /opt/jboss-eap-6.2/modules -jaxpmodule javax.xml.jaxp-provider org.jboss.as.standalone -Djboss.home.dir=/opt/jboss-eap-6.2 -Djboss.server.base.dir=/opt/jboss-eap-6.2/standalone",
            "sun.java.launcher" =&gt; "SUN_STANDARD",
            "sun.jnu.encoding" =&gt; "UTF-8",
            "sun.management.compiler" =&gt; "HotSpot 64-Bit Tiered Compilers",
            "sun.os.patch.level" =&gt; "unknown",
            "user.country" =&gt; "JP",
            "user.dir" =&gt; "/root",
            "user.home" =&gt; "/root",
            "user.language" =&gt; "ja",
            "user.name" =&gt; "root",
            "user.timezone" =&gt; "Asia/Tokyo"
        },
        "uptime" =&gt; 11324677L,
        "object-name" =&gt; "java.lang:type=Runtime"
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> EJBスレッドプールの確認</h3>
<div class="outline-text-3" id="text-1-7">
<pre class="example">
[standalone@localhost:9999 /] /subsystem=ejb3/thread-pool=default:read-resource(include-runtime=true, recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "active-count" =&gt; 0,
        "completed-task-count" =&gt; 0L,
        "current-thread-count" =&gt; 0,
        "keepalive-time" =&gt; {
            "time" =&gt; 100L,
            "unit" =&gt; "MILLISECONDS"
        },
        "largest-thread-count" =&gt; 0,
        "max-threads" =&gt; 10,
        "name" =&gt; "default",
        "queue-size" =&gt; 0,
        "rejected-count" =&gt; 0,
        "task-count" =&gt; 0L,
        "thread-factory" =&gt; undefined
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> トランザクション情報の確認</h3>
<div class="outline-text-3" id="text-1-8">
<pre class="example">
[standalone@localhost:9999 /] /subsystem=transactions:read-resource(include-runtime=true, recursive=true)
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "default-timeout" =&gt; 300,
        "enable-statistics" =&gt; false,
        "enable-tsm-status" =&gt; false,
        "hornetq-store-enable-async-io" =&gt; false,
        "jdbc-action-store-drop-table" =&gt; false,
        "jdbc-action-store-table-prefix" =&gt; undefined,
        "jdbc-communication-store-drop-table" =&gt; false,
        "jdbc-communication-store-table-prefix" =&gt; undefined,
        "jdbc-state-store-drop-table" =&gt; false,
        "jdbc-state-store-table-prefix" =&gt; undefined,
        "jdbc-store-datasource" =&gt; undefined,
        "jts" =&gt; false,
        "node-identifier" =&gt; "1",
        "number-of-aborted-transactions" =&gt; 0L,
        "number-of-application-rollbacks" =&gt; 0L,
        "number-of-committed-transactions" =&gt; 0L,
        "number-of-heuristics" =&gt; 0L,
        "number-of-inflight-transactions" =&gt; 0L,
        "number-of-nested-transactions" =&gt; 0L,
        "number-of-resource-rollbacks" =&gt; 0L,
        "number-of-timed-out-transactions" =&gt; 0L,
        "number-of-transactions" =&gt; 0L,
        "object-store-path" =&gt; "tx-object-store",
        "object-store-relative-to" =&gt; "jboss.server.data.dir",
        "path" =&gt; "var",
        "process-id-socket-binding" =&gt; undefined,
        "process-id-socket-max-ports" =&gt; 10,
        "process-id-uuid" =&gt; true,
        "recovery-listener" =&gt; false,
        "relative-to" =&gt; "jboss.server.data.dir",
        "socket-binding" =&gt; "txn-recovery-environment",
        "status-socket-binding" =&gt; "txn-status-manager",
        "use-hornetq-store" =&gt; false,
        "use-jdbc-store" =&gt; false,
        "log-store" =&gt; {"log-store" =&gt; {
            "type" =&gt; "default",
            "transactions" =&gt; undefined
        }}
    }
}
[standalone@localhost:9999 /]
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> <code>remoting-jmx</code> 方式</h2>
<div class="outline-text-2" id="text-2">
<p>
JBossAS 7.x のJMX情報を参照するには <code>$JBOSS_HOME/bin/jconsole.sh</code> のGUIツールを利用す
るのが一般的だと思います。コマンドから参照するにはJDKのJMX APIを用いて自前のコードで
頑張るか。 <code>jmxterm</code> といゆツールを使うかです。ここでは後者について検証しました。
<code>jmxterm</code> でlocalhostのJBossASのJMX情報参照はOKで、リモートからは認証処理で失敗した。
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> JBossAS接続用のjmxterm起動スクリプト</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<code>jmxterm</code> は <a href="http://wiki.cyclopsgroup.org/jmxterm">ここ</a> からダウンロードできる。
</p>
<pre class="example">
#!/bin/sh

EAP_HOME=/opt/jboss-eap-6.2
HOST_URL=service:jmx:remoting-jmx://localhost:9999

java -classpath `dirname $0`/jmxterm-1.0-alpha-4-uber.jar:$EAP_HOME/bin/client/jboss-cli-client.jar org.codehaus.classworlds.uberjar.boot.Bootstrapper -l "$HOST_URL"
</pre>

<p>
起動時のイメージ
</p>
<pre class="example">
# ./jmxterm.sh
9 30, 2014 12:42:18 午後 org.xnio.Xnio &lt;clinit&gt;
INFO: XNIO Version 3.0.7.GA-redhat-1
9 30, 2014 12:42:18 午後 org.xnio.nio.NioXnio &lt;clinit&gt;
INFO: XNIO NIO Implementation Version 3.0.7.GA-redhat-1
9 30, 2014 12:42:18 午後 org.jboss.remoting3.EndpointImpl &lt;clinit&gt;
INFO: JBoss Remoting version 3.2.18.GA-redhat-1
Welcome to JMX terminal. Type "help" for available commands.
$&gt;
</pre>

<p>
リモートから接続する場合、認証でエラー
</p>
<pre class="example">
$ ./jmxterm.sh
9 30, 2014 12:43:31 午後 org.xnio.Xnio &lt;clinit&gt;
INFO: XNIO Version 3.0.7.GA-redhat-1
9 30, 2014 12:43:31 午後 org.xnio.nio.NioXnio &lt;clinit&gt;
INFO: XNIO NIO Implementation Version 3.0.7.GA-redhat-1
9 30, 2014 12:43:31 午後 org.jboss.remoting3.EndpointImpl &lt;clinit&gt;
INFO: JBoss Remoting version 3.2.18.GA-redhat-1
9 30, 2014 12:43:34 午後 org.jboss.remoting3.remote.RemoteConnection handleException
ERROR: JBREM000200: Remote connection failed: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed
---------------------------------------------------
constituent[0]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/jmxterm.jar
constituent[1]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-beanutils.jar
constituent[2]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-cli.jar
constituent[3]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-collections.jar
constituent[4]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-lang.jar
constituent[5]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-logging.jar
constituent[6]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/commons-io.jar
constituent[7]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/jcli.jar
constituent[8]: jar:file:/opt/jmxterm/jmxterm-1.0-alpha-4-uber.jar!/WORLDS-INF/lib/jline.jar
---------------------------------------------------
javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed
    at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:367)
    at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:229)
    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
    at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)
    at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)
    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
    at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)
    at org.xnio.ssl.JsseConnectedSslStreamChannel.handleReadable(JsseConnectedSslStreamChannel.java:180)
    at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)
    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
    at org.xnio.nio.NioHandle.run(NioHandle.java:90)
    at org.xnio.nio.WorkerThread.run(WorkerThread.java:187)
    at ...asynchronous invocation...(Unknown Source)
    at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:270)
    at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:251)
    at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:349)
    at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:333)
    at org.jboss.remotingjmx.RemotingConnector.internalRemotingConnect(RemotingConnector.java:227)
    at org.jboss.remotingjmx.RemotingConnector.internalConnect(RemotingConnector.java:148)
    at org.jboss.remotingjmx.RemotingConnector.connect(RemotingConnector.java:99)
    at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:270)
    at org.cyclopsgroup.jmxterm.cc.SessionImpl.doConnect(SessionImpl.java:85)
    at org.cyclopsgroup.jmxterm.cc.SessionImpl.connect(SessionImpl.java:49)
    at org.cyclopsgroup.jmxterm.cc.CommandCenter.connect(CommandCenter.java:110)
    at org.cyclopsgroup.jmxterm.boot.CliMain.execute(CliMain.java:139)
    at org.cyclopsgroup.jmxterm.boot.CliMain.main(CliMain.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:483)
    at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:353)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:264)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:483)
    at org.codehaus.classworlds.uberjar.boot.Bootstrapper.bootstrap(Bootstrapper.java:209)
    at org.codehaus.classworlds.uberjar.boot.Bootstrapper.main(Bootstrapper.java:116)
$
</pre>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> jmxterm基本的な使い方</h3>
<div class="outline-text-3" id="text-2-2">
<pre class="example">
★ドメインリストの取得
$&gt;domains
#following domains are available
Catalina
JMImplementation
com.sun.management
java.lang
java.nio
java.util.logging
jboss.as
jboss.as.expr
jboss.jta
jboss.modules
jboss.msc
jboss.remoting.handler
jboss.web
jboss.ws

★特定ドメインのbeanリストの取得
$&gt;beans -d jboss.web
#domain = jboss.web:
jboss.web:J2EEApplication=none,J2EEServer=none,WebModule=//default-host/,j2eeType=Servlet,name=WelcomeContextConsoleServlet
jboss.web:J2EEApplication=none,J2EEServer=none,j2eeType=WebModule,name=//default-host/
jboss.web:J2EEApplication=none,J2EEServer=none,j2eeType=WebModule,name=//default-host/sss
jboss.web:address="/0.0.0.0",port=8080,type=Connector
jboss.web:address="/0.0.0.0",port=8080,type=ProtocolHandler
jboss.web:host=default-host,name=ErrorReportValve,type=Valve
jboss.web:host=default-host,name=SecurityContextAssociationValve,path=/sss,type=Valve
jboss.web:host=default-host,name=StandardContextValve,path=/,type=Valve
jboss.web:host=default-host,name=StandardContextValve,path=/sss,type=Valve
jboss.web:host=default-host,name=StandardHostValve,type=Valve
jboss.web:host=default-host,path=/,type=Cache
jboss.web:host=default-host,path=/,type=Manager
jboss.web:host=default-host,path=/sss,realmPath=/realm0,type=Realm
jboss.web:host=default-host,path=/sss,type=Cache
jboss.web:host=default-host,path=/sss,type=Manager
jboss.web:host=default-host,type=Host
jboss.web:name=StandardEngineValve,type=Valve
jboss.web:name=http--0.0.0.0-8080,type=GlobalRequestProcessor
jboss.web:name=http--0.0.0.0-8080,type=ThreadPool
jboss.web:serviceName=jboss.web,type=Service
jboss.web:type=Engine

★beanの中身を参照する
★ -b の後ろはbeansコマンドで出力した文字列を指定する。
★ *  全部の属性とメソッドを出力する
★ bean所属のドメインを指定する
$&gt;get -b jboss.web:address="/0.0.0.0",port=8080,type=Connector * -d jboss.web
#mbean = jboss.web:address="/0.0.0.0",port=8080,type=Connector:
port = 8080;

protocol = HTTP/1.1;

useIPVHosts = false;

objectName = jboss.web:type=Connector,port=8080,address="/0.0.0.0";

redirectPort = 443;

........
</pre>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Web系ワーカスレッドの情報取得</h3>
<div class="outline-text-3" id="text-2-3">
<font color="red"><strong>
<p>
これはJMX方式しか取れないぽい。
</p>
</strong></font>
<p>
Web系ワーカスレッドの実装はtomcatそのものが取り入れられているぽいで、JBossASに
<code>-Dorg.apache.tomcat.util.ENABLE_MODELER=true</code> オプションを付けて起動する必要がある。
</p>

<pre class="example">
$&gt;get -b jboss.web:address="/0.0.0.0",port=8080,type=Connector * -d jboss.web
#mbean = jboss.web:address="/0.0.0.0",port=8080,type=Connector:
port = 8080;

protocol = HTTP/1.1;

useIPVHosts = false;

objectName = jboss.web:type=Connector,port=8080,address="/0.0.0.0";

redirectPort = 443;

secure = false;

proxyName = null;

enableLookups = false;

maxPostSize = 2097152;

proxyPort = 0;

available = true;

modelerType = org.apache.catalina.connector.Connector;

info = org.apache.catalina.connector.Connector/2.1;

bufferSize = 2048;

scheme = http;

xpoweredBy = false;

allowTrace = false;

domain = jboss.web;

useBodyEncodingForURI = false;

controller = jboss.web:type=Connector,port=8080,address="/0.0.0.0";

uRIEncoding = null;

maxSavePostSize = 4096;

protocolHandlerClassName = org.apache.coyote.http11.Http11Protocol;

$&gt;
</pre>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> リクエストプロセッサーの稼働状況</h3>
<div class="outline-text-3" id="text-2-4">
<pre class="example">
$&gt;get -b jboss.web:name=http--0.0.0.0-8080,type=GlobalRequestProcessor *
#mbean = jboss.web:name=http--0.0.0.0-8080,type=GlobalRequestProcessor:
bytesSent = 0;

bytesReceived = 0;

processingTime = 0;

errorCount = 0;

maxTime = 0;

requestCount = 0;

modelerType = org.apache.coyote.RequestGroupInfo;

$&gt;
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> <code>RESTful</code> 方式</h2>
<div class="outline-text-2" id="text-3">
<pre class="example">
$ curl --digest http://localhost:9990/management?json.pretty -u admin
Enter host password for user 'admin':
{
    "management-major-version" : 1,
    "management-micro-version" : 0,
    "management-minor-version" : 5,
    "name" : "localhost",
    "namespaces" : [],
    "product-name" : "EAP",
    "product-version" : "6.2.4.GA",
    "profile-name" : null,
    "release-codename" : "Janus",
    "release-version" : "7.3.4.Final-redhat-1",
    "schema-locations" : [],
    "core-service" : {
        "management" : null,
        "service-container" : null,
        "module-loading" : null,
        "server-environment" : null,
        "platform-mbean" : null,
        "patching" : null
    },
</pre>
</div>
</div>




<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 参考情報</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><a href="https://docs.jboss.org/author/display/AS71/CLI+Recipes">CLI Recipes</a>
</li>
<li><a href="http://zorka.io/install/jboss7.html">JBoss 7.x and Wildfly 8.0 monitoring</a>
</li>
<li><a href="http://www.denniskanbier.nl/blog/monitoring/jboss-eap-6-monitoring-using-remoting-jmx-and-zabbix/">JBoss EAP 6 monitoring using remoting-jmx and Zabbix</a>
</li>
<li><a href="http://blog.akquinet.de/2014/09/18/jboss-eap-wildfly-management-interfaces-and-clients/">JBoss EAP / Wildfly Management Interfaces and Clients</a>
</li>
</ul>
</div>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[検証]ArchlinuxにJenkins導入]]></title>
    <link href="http://luozengbin.github.io/blog/2014-07-31-%5B%E6%A4%9C%E8%A8%BC%5Darchlinux%E3%81%ABjenkins%E5%B0%8E%E5%85%A5.html"/>
    <updated>2014-07-31T00:00:00+09:00</updated>
    <id>http://luozengbin.github.io/blog/[検証]archlinuxにjenkins導入</id>
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. インストール</a></li>
<li><a href="#sec-2">2. パッケージ構成</a></li>
<li><a href="#sec-3">3. 設定ファイル</a></li>
<li><a href="#sec-4">4. サービス制御ファイル</a></li>
<li><a href="#sec-5">5. サービス実行アカウントの確認</a></li>
<li><a href="#sec-6">6. サービスを起動してみる</a></li>
<li><a href="#sec-7">7. 次やりたいこと</a></li>
</ul>
</div>
</div>


<p>
久々Jenkinsを触っていないので、今回Archlinux入れて検証したいと思います。
</p>




<p>
<!-- more -->
</p>




<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> インストール</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>pacman</code> コマンド一発です。
</p>
<pre class="example">
$ sudo pacman -S jenkins
[sudo] password for akira: 
依存関係を解決しています...
相互衝突をチェックしています...

パッケージ (1): jenkins-1.574-1

Total Download Size:    56.23 MiB
Total Installed Size:   64.72 MiB

:: インストールを行いますか？ [Y/n] 
:: パッケージを取得します ...
 jenkins-1.574-1-any                                                                                 56.2 MiB  1149K/s 00:50 [############################################################################] 100%
(1/1) キーリングのキーを確認                                                                                                 [############################################################################] 100%
(1/1) パッケージの整合性をチェック                                                                                           [############################################################################] 100%
(1/1) パッケージファイルのロード                                                                                             [############################################################################] 100%
(1/1) ファイルの衝突をチェック                                                                                               [############################################################################] 100%
(1/1) 空き容量を確認                                                                                                         [############################################################################] 100%
(1/1) インストール jenkins                                                                                                   [############################################################################] 100%
This installation of Jenkins uses port 8090 by default.
</pre>
<p>
デフォルトポートが <code>8090</code> って言っています！
</p>
</div>
</div>




<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> パッケージ構成</h2>
<div class="outline-text-2" id="text-2">
<pre class="example">
$ pacman -Ql jenkins
jenkins /etc/
jenkins /etc/conf.d/
jenkins /etc/conf.d/jenkins                     ★Jenkins起動パラメータの設定ファイル
jenkins /usr/
jenkins /usr/lib/
jenkins /usr/lib/systemd/
jenkins /usr/lib/systemd/system/
jenkins /usr/lib/systemd/system/jenkins.service ★サービス実行制御ファイル
jenkins /usr/lib/tmpfiles.d/
jenkins /usr/lib/tmpfiles.d/jenkins.conf        ★謎う？
jenkins /usr/share/
jenkins /usr/share/java/
jenkins /usr/share/java/jenkins/
jenkins /usr/share/java/jenkins/jenkins.war     ★Jenkins本体
jenkins /usr/share/licenses/
jenkins /usr/share/licenses/jenkins/
jenkins /usr/share/licenses/jenkins/LICENSE     ★MITライセンスファイル
</pre>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 設定ファイル</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff6347;">JAVA</span>=/usr/bin/java
<span style="color: #ff6347;">JAVA_ARGS</span>=-Xmx512m
<span style="color: #ff6347;">JAVA_OPTS</span>=
<span style="color: #ff6347;">JENKINS_USER</span>=jenkins
<span style="color: #ff6347;">JENKINS_HOME</span>=/var/lib/jenkins                   &#9733;Jenkins&#12518;&#12540;&#12470;&#12398;&#12507;&#12540;&#12512;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;(&#12503;&#12521;&#12464;&#12452;&#12531;&#12289;&#12472;&#12519;&#12502;&#23450;&#32681;&#12394;&#12393;)
<span style="color: #ff6347;">JENKINS_WAR</span>=/usr/share/java/jenkins/jenkins.war
<span style="color: #ff6347;">JENKINS_WEBROOT</span>=--webroot=/var/cache/jenkins    &#9733;&#23455;&#34892;&#26178;&#12395;WAR&#12364;&#12371;&#12371;&#12395;&#23637;&#38283;&#12373;&#12428;&#12427;
<span style="color: #ff6347;">JENKINS_PORT</span>=--httpPort=8090
<span style="color: #ff6347;">JENKINS_AJPPORT</span>=--ajp13Port=-1
<span style="color: #ff6347;">JENKINS_OPTS</span>=
<span style="color: #ff6347;">JENKINS_COMMAND_LINE</span>=<span style="color: #ad7fa8; font-style: italic;">"$JAVA $JAVA_ARGS $JAVA_OPTS -jar $JENKINS_WAR $JENKINS_WEBROOT $JENKINS_PORT $JENKINS_AJPPORT $JENKINS_OPTS"</span>

<span style="color: #888a85;"># </span><span style="color: #888a85;">vim:set ts=2 sw=2 et:</span>
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> サービス制御ファイル</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-sh">$ cat /usr/lib/systemd/system/jenkins.service
[Unit]
<span style="color: #ff6347;">Description</span>=Extendable continuous integration server
<span style="color: #ff6347;">After</span>=network.target

[Service]
<span style="color: #ff6347;">User</span>=jenkins                                 &#9733;&#12469;&#12540;&#12499;&#12473;&#12398;&#23455;&#34892;&#12518;&#12540;&#12470;
<span style="color: #ff6347;">Type</span>=simple
<span style="color: #ff6347;">EnvironmentFile</span>=/etc/conf.d/jenkins
<span style="color: #ff6347;">StandardOutput</span>=syslog                        &#9733;&#27161;&#28310;&#12525;&#12464;&#20986;&#21147;&#20808;
<span style="color: #ff6347;">StandardError</span>=syslog                         &#9733;&#27161;&#28310;&#12456;&#12521;&#12540;&#12525;&#12464;&#20986;&#21147;&#20808;
<span style="color: #ff6347;">SyslogIdentifier</span>=jenkins                     &#9733;&#12471;&#12473;&#12486;&#12512;&#12459;&#12486;&#12468;&#12522;&#21517;
<span style="color: #ff6347;">ExecStart</span>=/bin/sh -c <span style="color: #ad7fa8; font-style: italic;">'eval $JENKINS_COMMAND_LINE'</span>
<span style="color: #888a85;">#</span><span style="color: #888a85;">MemoryLimit=768M</span>
<span style="color: #ff6347;">OOMScoreAdjust</span>=-1000
<span style="color: #ff6347;">LimitCPU</span>=infinity
<span style="color: #ff6347;">LimitFSIZE</span>=infinity
<span style="color: #ff6347;">LimitDATA</span>=infinity
<span style="color: #ff6347;">LimitCORE</span>=0
<span style="color: #ff6347;">LimitAS</span>=infinity
<span style="color: #ff6347;">LimitLOCKS</span>=infinity

[Install]
<span style="color: #ff6347;">WantedBy</span>=multi-user.target
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> サービス実行アカウントの確認</h2>
<div class="outline-text-2" id="text-5">
<pre class="example">
$ cat /etc/passwd
jenkins:x:997:996::/var/lib/jenkins:/bin/bash
</pre>
</div>
</div>


<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> サービスを起動してみる</h2>
<div class="outline-text-2" id="text-6">
<p>
起動コマンド
</p>
<pre class="example">
$ sudo systemctl start jenkins
</pre>

<p>
シスログ
</p>
<pre class="example">
$ sudo tail -f /var/log/everything.log
Jul 31 09:18:00 hakusai systemd[1]: Starting Extendable continuous integration server...
Jul 31 09:18:00 hakusai systemd[1]: Started Extendable continuous integration server.
Jul 31 09:18:02 hakusai jenkins[30946]: Running from: /usr/share/java/jenkins/jenkins.war
Jul 31 09:18:02 hakusai jenkins[30946]: 7 31, 2014 9:18:02 午前 winstone.Logger logInternal
Jul 31 09:18:02 hakusai jenkins[30946]: 情報: Beginning extraction from war file
Jul 31 09:18:03 hakusai jenkins[30946]: 7 31, 2014 9:18:03 午前 org.eclipse.jetty.util.log.JavaUtilLog info
Jul 31 09:18:03 hakusai jenkins[30946]: 情報: jetty-8.y.z-SNAPSHOT
Jul 31 09:18:05 hakusai jenkins[30946]: 7 31, 2014 9:18:05 午前 org.eclipse.jetty.util.log.JavaUtilLog info
Jul 31 09:18:05 hakusai jenkins[30946]: 情報: NO JSP Support for , did not find org.apache.jasper.servlet.JspServlet
Jul 31 09:18:06 hakusai jenkins[30946]: Jenkins home directory: /var/lib/jenkins found at: EnvVars.masterEnvVars.get("JENKINS_HOME")
Jul 31 09:18:06 hakusai jenkins[30946]: 7 31, 2014 9:18:06 午前 org.eclipse.jetty.util.log.JavaUtilLog info
Jul 31 09:18:06 hakusai jenkins[30946]: 情報: Started SelectChannelConnector@0.0.0.0:8090
Jul 31 09:18:06 hakusai jenkins[30946]: 7 31, 2014 9:18:06 午前 winstone.Logger logInternal
Jul 31 09:18:06 hakusai jenkins[30946]: 情報: Winstone Servlet Engine v2.0 running: controlPort=disabled
Jul 31 09:18:07 hakusai jenkins[30946]: 7 31, 2014 9:18:07 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:07 hakusai jenkins[30946]: 情報: Started initialization
Jul 31 09:18:14 hakusai jenkins[30946]: 7 31, 2014 9:18:14 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:14 hakusai jenkins[30946]: 情報: Listed all plugins
Jul 31 09:18:14 hakusai jenkins[30946]: 7 31, 2014 9:18:14 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:14 hakusai jenkins[30946]: 情報: Prepared all plugins
Jul 31 09:18:14 hakusai jenkins[30946]: 7 31, 2014 9:18:14 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:14 hakusai jenkins[30946]: 情報: Started all plugins
Jul 31 09:18:14 hakusai jenkins[30946]: 7 31, 2014 9:18:14 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:14 hakusai jenkins[30946]: 情報: Augmented all extensions
Jul 31 09:18:14 hakusai jenkins[30946]: 7 31, 2014 9:18:14 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:14 hakusai jenkins[30946]: 情報: Loaded all jobs
Jul 31 09:18:17 hakusai jenkins[30946]: 7 31, 2014 9:18:17 午前 org.jenkinsci.main.modules.sshd.SSHD start
Jul 31 09:18:17 hakusai jenkins[30946]: 情報: Started SSHD at port 42690
Jul 31 09:18:17 hakusai jenkins[30946]: 7 31, 2014 9:18:17 午前 jenkins.InitReactorRunner$1 onAttained
Jul 31 09:18:17 hakusai jenkins[30946]: 情報: Completed initialization
Jul 31 09:18:17 hakusai jenkins[30946]: 7 31, 2014 9:18:17 午前 hudson.WebAppMain$3 run
Jul 31 09:18:17 hakusai jenkins[30946]: 情報: Jenkins is fully up and running
</pre>

<p>
起動後 <code>/var/lib/jenkins</code> ディレクトリの様子
</p>
<pre class="example">
/var/lib/jenkins
├── Fingerprint cleanup.log
├── hudson.model.UpdateCenter.xml
├── identity.key.enc
├── jobs
├── nodeMonitors.xml
├── plugins
│   ├── ant
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── ant
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── ant.jpi
│   ├── antisamy-markup-formatter
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── antisamy-markup-formatter
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   ├── antisamy-markup-formatter.jar
│   │       │   └── owasp-html-sanitizer-r88.jar
│   │       └── licenses.xml
│   ├── antisamy-markup-formatter.jpi
│   ├── credentials
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── credentials
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   ├── classes.jar
│   │   │   │   ├── findbugs-annotations-1.3.9-1.jar
│   │   │   │   ├── jcip-annotations-1.0.jar
│   │   │   │   └── jsr305-1.3.9.jar
│   │   │   └── licenses.xml
│   │   ├── help
│   │   │   └── domain
│   │   │       ├── description.html
│   │   │       ├── description_ja.html
│   │   │       ├── name.html
│   │   │       ├── name_ja.html
│   │   │       ├── specification.html
│   │   │       └── specification_ja.html
│   │   └── images
│   │       ├── 16x16
│   │       │   ├── credential.png
│   │       │   ├── credentials.png
│   │       │   ├── domain.png
│   │       │   ├── new-credential.png
│   │       │   └── new-domain.png
│   │       ├── 24x24
│   │       │   ├── credential.png
│   │       │   ├── credentials.png
│   │       │   ├── domain.png
│   │       │   ├── new-credential.png
│   │       │   └── new-domain.png
│   │       ├── 32x32
│   │       │   ├── credential.png
│   │       │   ├── credentials.png
│   │       │   ├── domain.png
│   │       │   ├── new-credential.png
│   │       │   └── new-domain.png
│   │       └── 48x48
│   │           ├── credential.png
│   │           ├── credentials.png
│   │           ├── domain.png
│   │           ├── new-credential.png
│   │           └── new-domain.png
│   ├── credentials.jpi
│   ├── cvs
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── cvs
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   ├── classes.jar
│   │       │   ├── cvsclient-71-jenkins-11.jar
│   │       │   └── jsch-0.1.50.jar
│   │       └── licenses.xml
│   ├── cvs.jpi
│   ├── external-monitor-job
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── external-monitor-job
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── external-monitor-job.jpi
│   ├── javadoc
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── javadoc
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── javadoc.jpi
│   ├── ldap
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── ldap
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   └── classes.jar
│   │   │   └── licenses.xml
│   │   ├── help-cache.html
│   │   ├── help-groupMembershipFilter.html
│   │   └── help-groupSearchFilter.html
│   ├── ldap.jpi
│   ├── mailer
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── mailer
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── mailer.jpi
│   ├── matrix-auth
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── matrix-auth
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── matrix-auth.jpi
│   ├── matrix-project
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── matrix-project
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   └── matrix-project.jar
│   │   │   └── licenses.xml
│   │   └── help
│   │       └── matrix
│   │           ├── axes.html
│   │           ├── axes_de.html
│   │           ├── axes_fr.html
│   │           ├── axes_ja.html
│   │           ├── axes_nl.html
│   │           ├── axes_pt_BR.html
│   │           ├── axes_ru.html
│   │           ├── axes_tr.html
│   │           ├── axes_zh_TW.html
│   │           ├── combinationfilter.html
│   │           ├── combinationfilter_de.html
│   │           ├── combinationfilter_fr.html
│   │           ├── combinationfilter_ja.html
│   │           ├── combinationfilter_zh_TW.html
│   │           ├── jdk.html
│   │           ├── jdk_de.html
│   │           ├── jdk_fr.html
│   │           ├── jdk_ja.html
│   │           ├── jdk_nl.html
│   │           ├── jdk_pt_BR.html
│   │           ├── jdk_ru.html
│   │           ├── jdk_tr.html
│   │           └── jdk_zh_TW.html
│   ├── matrix-project.jpi
│   ├── maven-plugin
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.main
│   │   │           └── maven-plugin
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   ├── aether-api-0.9.0.M3.jar
│   │   │   │   ├── aether-connector-wagon-0.9.0.M2.jar
│   │   │   │   ├── aether-impl-0.9.0.M3.jar
│   │   │   │   ├── aether-spi-0.9.0.M3.jar
│   │   │   │   ├── aether-transport-wagon-0.9.0.M3.jar
│   │   │   │   ├── aether-util-0.9.0.M3.jar
│   │   │   │   ├── ant-1.9.2.jar
│   │   │   │   ├── ant-launcher-1.9.2.jar
│   │   │   │   ├── aopalliance-1.0.jar
│   │   │   │   ├── cdi-api-1.0.jar
│   │   │   │   ├── classes.jar
│   │   │   │   ├── commons-cli-1.2.jar
│   │   │   │   ├── commons-codec-1.6.jar
│   │   │   │   ├── commons-httpclient-3.1.jar
│   │   │   │   ├── commons-io-2.2.jar
│   │   │   │   ├── commons-lang-2.6.jar
│   │   │   │   ├── commons-logging-1.1.1.jar
│   │   │   │   ├── commons-net-3.1.jar
│   │   │   │   ├── doxia-sink-api-1.0.jar
│   │   │   │   ├── guava-11.0.1.jar
│   │   │   │   ├── guice-4.0-beta.jar
│   │   │   │   ├── httpclient-4.2.5.jar
│   │   │   │   ├── httpcore-4.2.4.jar
│   │   │   │   ├── jackrabbit-webdav-2.5.2.jar
│   │   │   │   ├── javax.inject-1.jar
│   │   │   │   ├── jsch-0.1.44-1.jar
│   │   │   │   ├── jsoup-1.7.1.jar
│   │   │   │   ├── jsr250-api-1.0.jar
│   │   │   │   ├── jsr305-1.3.9.jar
│   │   │   │   ├── lib-jenkins-maven-artifact-manager-1.2.jar
│   │   │   │   ├── lib-jenkins-maven-embedder-3.11.jar
│   │   │   │   ├── maven-aether-provider-3.1.0.jar
│   │   │   │   ├── maven-agent-1.5.jar
│   │   │   │   ├── maven-artifact-3.1.0.jar
│   │   │   │   ├── maven-compat-3.1.0.jar
│   │   │   │   ├── maven-core-3.1.0.jar
│   │   │   │   ├── maven-embedder-3.1.0.jar
│   │   │   │   ├── maven-interceptor-1.5.jar
│   │   │   │   ├── maven-model-3.1.0.jar
│   │   │   │   ├── maven-model-builder-3.1.0.jar
│   │   │   │   ├── maven-plugin-api-3.1.0.jar
│   │   │   │   ├── maven-reporting-api-3.0.jar
│   │   │   │   ├── maven-repository-metadata-3.1.0.jar
│   │   │   │   ├── maven-settings-3.1.0.jar
│   │   │   │   ├── maven-settings-builder-3.1.0.jar
│   │   │   │   ├── maven2.1-interceptor-1.2.jar
│   │   │   │   ├── maven3-agent-1.5.jar
│   │   │   │   ├── maven3-interceptor-1.5.jar
│   │   │   │   ├── maven3-interceptor-commons-1.5.jar
│   │   │   │   ├── maven31-agent-1.5.jar
│   │   │   │   ├── maven31-interceptor-1.5.jar
│   │   │   │   ├── org.eclipse.sisu.inject-0.0.0.M5.jar
│   │   │   │   ├── org.eclipse.sisu.plexus-0.0.0.M5.jar
│   │   │   │   ├── plexus-cipher-1.7.jar
│   │   │   │   ├── plexus-classworlds-2.5.1.jar
│   │   │   │   ├── plexus-component-annotations-1.5.5.jar
│   │   │   │   ├── plexus-interactivity-api-1.0-alpha-6.jar
│   │   │   │   ├── plexus-interpolation-1.16.jar
│   │   │   │   ├── plexus-sec-dispatcher-1.3.jar
│   │   │   │   ├── plexus-utils-3.0.10.jar
│   │   │   │   ├── slf4j-api-1.7.4.jar
│   │   │   │   ├── wagon-file-2.4.jar
│   │   │   │   ├── wagon-ftp-2.4.jar
│   │   │   │   ├── wagon-http-2.4.jar
│   │   │   │   ├── wagon-http-shared-2.4.jar
│   │   │   │   ├── wagon-http-shared4-2.4.jar
│   │   │   │   ├── wagon-provider-api-2.4.jar
│   │   │   │   ├── wagon-ssh-2.4.jar
│   │   │   │   ├── wagon-ssh-common-2.4.jar
│   │   │   │   ├── wagon-ssh-external-2.4.jar
│   │   │   │   └── wagon-webdav-jackrabbit-2.4.jar
│   │   │   └── licenses.xml
│   │   ├── aggregator.html
│   │   ├── aggregator_de.html
│   │   ├── aggregator_fr.html
│   │   ├── aggregator_ja.html
│   │   ├── aggregator_pt_BR.html
│   │   ├── aggregator_ru.html
│   │   ├── aggregator_tr.html
│   │   ├── aggregator_zh_TW.html
│   │   ├── archivingDisabled.html
│   │   ├── archivingDisabled_de.html
│   │   ├── archivingDisabled_ja.html
│   │   ├── archivingDisabled_zh_TW.html
│   │   ├── downstreamDisabled.html
│   │   ├── downstreamDisabled_de.html
│   │   ├── downstreamDisabled_ja.html
│   │   ├── downstreamDisabled_zh_TW.html
│   │   ├── fingerprintingDisabled.html
│   │   ├── goals.html
│   │   ├── goals_de.html
│   │   ├── goals_fr.html
│   │   ├── goals_ja.html
│   │   ├── goals_pt_BR.html
│   │   ├── goals_ru.html
│   │   ├── goals_tr.html
│   │   ├── goals_zh_TW.html
│   │   ├── ignore-upstrem-changes.html
│   │   ├── ignore-upstrem-changes_de.html
│   │   ├── ignore-upstrem-changes_fr.html
│   │   ├── ignore-upstrem-changes_ja.html
│   │   ├── ignore-upstrem-changes_zh_TW.html
│   │   ├── incremental.html
│   │   ├── incremental_de.html
│   │   ├── incremental_zh_TW.html
│   │   ├── maven-opts.html
│   │   ├── maven-opts_de.html
│   │   ├── maven-opts_fr.html
│   │   ├── maven-opts_ja.html
│   │   ├── maven-opts_pt_BR.html
│   │   ├── maven-opts_ru.html
│   │   ├── maven-opts_tr.html
│   │   ├── maven-opts_zh_CN.html
│   │   ├── maven-opts_zh_TW.html
│   │   ├── module-goals.html
│   │   ├── module-goals_de.html
│   │   ├── module-goals_fr.html
│   │   ├── module-goals_ja.html
│   │   ├── module-goals_pt_BR.html
│   │   ├── module-goals_ru.html
│   │   ├── module-goals_tr.html
│   │   ├── module-goals_zh_TW.html
│   │   ├── per-module-email.html
│   │   ├── per-module-email_de.html
│   │   ├── per-module-email_ja.html
│   │   ├── per-module-email_zh_TW.html
│   │   ├── private-repository.html
│   │   ├── private-repository_de.html
│   │   ├── private-repository_fr.html
│   │   ├── private-repository_ja.html
│   │   ├── private-repository_tr.html
│   │   ├── private-repository_zh_TW.html
│   │   ├── root-pom.html
│   │   ├── root-pom_de.html
│   │   ├── root-pom_fr.html
│   │   ├── root-pom_ja.html
│   │   ├── root-pom_pt_BR.html
│   │   ├── root-pom_ru.html
│   │   ├── root-pom_tr.html
│   │   ├── root-pom_zh_TW.html
│   │   ├── run-headless.html
│   │   ├── run-headless_de.html
│   │   ├── run-headless_fr.html
│   │   ├── run-headless_ja.html
│   │   ├── run-headless_zh_TW.html
│   │   ├── siteArchivingDisabled.html
│   │   └── siteArchivingDisabled_de.html
│   ├── maven-plugin.jpi
│   ├── pam-auth
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── pam-auth
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   ├── classes.jar
│   │       │   ├── jna-3.4.0.jar
│   │       │   └── libpam4j-1.6.jar
│   │       └── licenses.xml
│   ├── pam-auth.jpi
│   ├── ssh-credentials
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── ssh-credentials
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── ssh-credentials.jpi
│   ├── ssh-slaves
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── ssh-slaves
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   └── classes.jar
│   │       └── licenses.xml
│   ├── ssh-slaves.jpi
│   ├── subversion
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── subversion
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   ├── antlr-runtime-3.4.jar
│   │   │   │   ├── classes.jar
│   │   │   │   ├── sequence-library-1.0.2.jar
│   │   │   │   ├── sqljet-1.1.7.jar
│   │   │   │   ├── svnkit-1.7.10-jenkins-1.jar
│   │   │   │   └── trilead-ssh2-build217-jenkins-3.jar
│   │   │   └── licenses.xml
│   │   ├── pass-phrase.html
│   │   ├── pass-phrase_de.html
│   │   ├── pass-phrase_fr.html
│   │   ├── pass-phrase_ja.html
│   │   ├── pass-phrase_pt_BR.html
│   │   ├── pass-phrase_ru.html
│   │   ├── pass-phrase_tr.html
│   │   └── pass-phrase_zh_TW.html
│   ├── subversion.jpi
│   ├── translation
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── translation
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   ├── WEB-INF
│   │   │   ├── lib
│   │   │   │   └── classes.jar
│   │   │   └── licenses.xml
│   │   ├── dialog.js
│   │   └── flags.png
│   ├── translation.jpi
│   ├── windows-slaves
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── org.jenkins-ci.plugins
│   │   │           └── windows-slaves
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── lib
│   │       │   ├── j-interop-2.0.6-kohsuke-1.jar
│   │       │   ├── j-interopdeps-2.0.6-kohsuke-1.jar
│   │       │   ├── jcifs-1.3.17-kohsuke-1.jar
│   │       │   ├── jinterop-proxy-1.1.jar
│   │       │   ├── jinterop-wmi-1.1.jar
│   │       │   ├── tiger-types-1.1.jar
│   │       │   ├── windows-remote-command-1.4.jar
│   │       │   └── windows-slaves.jar
│   │       └── licenses.xml
│   └── windows-slaves.jpi
├── secret.key
├── secret.key.not-so-secret
├── secrets
│   ├── master.key
│   └── org.jenkinsci.main.modules.instance_identity.InstanceIdentity.KEY
└── userContent
    └── readme.txt
</pre>

<p>
起動後 <code>/var/lib/jenkins</code> ディレクトリの様子
</p>
<pre class="example">
/var/cache/jenkins
├── ColorFormatter.class
├── JNLPMain.class
├── LogFileOutputStream$1.class
├── LogFileOutputStream$2.class
├── LogFileOutputStream.class
├── META-INF
│   ├── JENKINS.RSA
│   ├── JENKINS.SF
│   ├── MANIFEST.MF
│   └── maven
│       └── org.jenkins-ci.main
│           └── jenkins-war
│               ├── pom.properties
│               └── pom.xml
├── Main$FileAndDescription.class
├── Main.class
├── MainDialog$1$1.class
├── MainDialog$1.class
├── MainDialog.class
├── WEB-INF
│   ├── classes
│   │   ├── META-INF
│   │   │   ├── licenses.html
│   │   │   └── licenses.xml
│   │   └── dependencies.txt
│   ├── hudson
│   ├── ibm-web-bnd.xmi
│   ├── jenkins-cli.jar
│   ├── jonas-web.xml
│   ├── lib
│   │   ├── access-modifier-annotation-1.4.jar
│   │   ├── acegi-security-1.0.7.jar
│   │   ├── activation-1.1.1-hudson-1.jar
│   │   ├── akuma-1.9.jar
│   │   ├── annotation-indexer-1.7.jar
│   │   ├── ant-1.8.3.jar
│   │   ├── ant-launcher-1.8.3.jar
│   │   ├── antlr-2.7.6.jar
│   │   ├── aopalliance-1.0.jar
│   │   ├── args4j-2.0.23.jar
│   │   ├── asm-4.0.jar
│   │   ├── asm-analysis-4.0.jar
│   │   ├── asm-commons-4.0.jar
│   │   ├── asm-tree-4.0.jar
│   │   ├── asm-util-4.0.jar
│   │   ├── asm5-5.0.1.jar
│   │   ├── bcpkix-jdk15on-1.47.jar
│   │   ├── bcprov-jdk15on-1.47.jar
│   │   ├── bridge-method-annotation-1.9.jar
│   │   ├── bytecode-compatibility-transformer-1.5.jar
│   │   ├── cli-1.574.jar
│   │   ├── commons-beanutils-1.8.3.jar
│   │   ├── commons-codec-1.8.jar
│   │   ├── commons-collections-3.2.1.jar
│   │   ├── commons-digester-2.1.jar
│   │   ├── commons-discovery-0.4.jar
│   │   ├── commons-fileupload-1.2.1.jar
│   │   ├── commons-httpclient-3.1.jar
│   │   ├── commons-io-2.4.jar
│   │   ├── commons-jelly-1.1-jenkins-20120928.jar
│   │   ├── commons-jelly-tags-define-1.0.1-hudson-20071021.jar
│   │   ├── commons-jelly-tags-fmt-1.0.jar
│   │   ├── commons-jelly-tags-xml-1.1.jar
│   │   ├── commons-jexl-1.1-jenkins-20111212.jar
│   │   ├── commons-lang-2.6.jar
│   │   ├── commons-logging-1.1.3.jar
│   │   ├── constant-pool-scanner-1.2.jar
│   │   ├── crypto-util-1.1.jar
│   │   ├── dom4j-1.6.1-hudson-3.jar
│   │   ├── embedded_su4j-1.1.jar
│   │   ├── ezmorph-1.0.6.jar
│   │   ├── groovy-all-1.8.9.jar
│   │   ├── guava-11.0.1.jar
│   │   ├── guice-4.0-beta-no_aop.jar
│   │   ├── hamcrest-core-1.3.jar
│   │   ├── instance-identity-1.4.jar
│   │   ├── j-interop-2.0.6-kohsuke-1.jar
│   │   ├── j-interopdeps-2.0.6-kohsuke-1.jar
│   │   ├── jansi-1.9.jar
│   │   ├── javax.annotation-api-1.2.jar
│   │   ├── javax.inject-1.jar
│   │   ├── jaxen-1.1-beta-11.jar
│   │   ├── jbcrypt-0.3m.jar
│   │   ├── jcifs-1.3.17-kohsuke-1.jar
│   │   ├── jcommon-1.0.12.jar
│   │   ├── jenkins-core-1.574.jar
│   │   ├── jffi-1.2.7-native.jar
│   │   ├── jffi-1.2.7.jar
│   │   ├── jfreechart-1.0.9.jar
│   │   ├── jline-0.9.94.jar
│   │   ├── jmdns-3.4.0-jenkins-3.jar
│   │   ├── jna-3.3.0-jenkins-3.jar
│   │   ├── jna-posix-1.0.3.jar
│   │   ├── jnr-constants-0.8.5.jar
│   │   ├── jnr-ffi-1.0.7.jar
│   │   ├── jnr-posix-3.0.1.jar
│   │   ├── jnr-x86asm-1.0.2.jar
│   │   ├── json-lib-2.4-jenkins-2.jar
│   │   ├── jsr305-1.3.9.jar
│   │   ├── jstl-1.1.0.jar
│   │   ├── jtidy-4aug2000r7-dev-hudson-1.jar
│   │   ├── junit-4.11.jar
│   │   ├── jzlib-1.1.3-kohsuke-1.jar
│   │   ├── launchd-slave-installer-1.2.jar
│   │   ├── libpam4j-1.6.jar
│   │   ├── libzfs-0.5.jar
│   │   ├── localizer-1.10.jar
│   │   ├── log4j-1.2.9.jar
│   │   ├── mail-1.4.4.jar
│   │   ├── memory-monitor-1.8.jar
│   │   ├── mina-core-2.0.5.jar
│   │   ├── oro-2.0.8.jar
│   │   ├── relaxngDatatype-20020414.jar
│   │   ├── remoting-2.43.jar
│   │   ├── robust-http-client-1.2.jar
│   │   ├── sezpoz-1.9.jar
│   │   ├── slave-installer-1.3.jar
│   │   ├── slf4j-api-1.7.7.jar
│   │   ├── slf4j-jdk14-1.7.7.jar
│   │   ├── spring-aop-2.5.6.SEC03.jar
│   │   ├── spring-beans-2.5.6.SEC03.jar
│   │   ├── spring-context-2.5.6.SEC03.jar
│   │   ├── spring-context-support-2.5.6.SEC03.jar
│   │   ├── spring-core-2.5.6.SEC03.jar
│   │   ├── spring-dao-1.2.9.jar
│   │   ├── spring-jdbc-1.2.9.jar
│   │   ├── spring-web-2.5.6.SEC03.jar
│   │   ├── spring-webmvc-2.5.6.SEC03.jar
│   │   ├── ssh-cli-auth-1.2.jar
│   │   ├── sshd-1.6.jar
│   │   ├── sshd-core-0.8.0.jar
│   │   ├── stapler-1.227.jar
│   │   ├── stapler-adjunct-codemirror-1.3.jar
│   │   ├── stapler-adjunct-timeline-1.4.jar
│   │   ├── stapler-adjunct-zeroclipboard-1.1.7-1.jar
│   │   ├── stapler-groovy-1.227.jar
│   │   ├── stapler-jelly-1.227.jar
│   │   ├── stapler-jrebel-1.227.jar
│   │   ├── stax-api-1.0-2.jar
│   │   ├── stax-api-1.0.1.jar
│   │   ├── systemd-slave-installer-1.1.jar
│   │   ├── task-reactor-1.4.jar
│   │   ├── tiger-types-1.3.jar
│   │   ├── trilead-putty-extension-1.2.jar
│   │   ├── trilead-ssh2-build217-jenkins-5.jar
│   │   ├── txw2-20110809.jar
│   │   ├── upstart-slave-installer-1.1.jar
│   │   ├── version-number-1.1.jar
│   │   ├── windows-package-checker-1.0.jar
│   │   ├── windows-slave-installer-1.4.jar
│   │   ├── winp-1.20.jar
│   │   ├── wstx-asl-3.2.9.jar
│   │   ├── xpp3-1.1.4c.jar
│   │   └── xstream-1.4.7-jenkins-1.jar
│   ├── plugins
│   │   ├── ant.hpi
│   │   ├── antisamy-markup-formatter.hpi
│   │   ├── credentials.hpi
│   │   ├── cvs.hpi
│   │   ├── external-monitor-job.hpi
│   │   ├── javadoc.hpi
│   │   ├── ldap.hpi
│   │   ├── mailer.hpi
│   │   ├── matrix-auth.hpi
│   │   ├── matrix-project.hpi
│   │   ├── maven-plugin.hpi
│   │   ├── pam-auth.hpi
│   │   ├── ssh-credentials.hpi
│   │   ├── ssh-slaves.hpi
│   │   ├── subversion.hpi
│   │   ├── translation.hpi
│   │   └── windows-slaves.hpi
│   ├── remoting.jar
│   ├── security
│   │   ├── AbstractPasswordBasedSecurityRealm.groovy
│   │   └── SecurityFilters.groovy
│   ├── slave.jar
│   ├── sun-web.xml
│   ├── update-center-rootCAs
│   │   ├── hudson-community
│   │   ├── hudson-community.txt
│   │   ├── jenkins-update-center-root-ca
│   │   └── jenkins-update-center-root-ca.txt
│   └── web.xml
├── css
│   ├── color.css
│   ├── responsive-grid.css
│   └── style.css
├── dc-license.txt
├── executable
│   └── Executable.class
├── favicon.ico
├── help
│   ├── LogRecorder
│   │   ├── logger.html
│   │   ├── logger_de.html
│   │   ├── logger_fr.html
│   │   ├── logger_ja.html
│   │   ├── logger_zh_TW.html
│   │   ├── name.html
│   │   ├── name_de.html
│   │   ├── name_fr.html
│   │   ├── name_ja.html
│   │   └── name_zh_TW.html
│   ├── parameter
│   │   ├── boolean-default.html
│   │   ├── boolean-default_de.html
│   │   ├── boolean-default_fr.html
│   │   ├── boolean-default_ja.html
│   │   ├── boolean-default_zh_TW.html
│   │   ├── boolean.html
│   │   ├── boolean_de.html
│   │   ├── boolean_fr.html
│   │   ├── boolean_ja.html
│   │   ├── boolean_zh_TW.html
│   │   ├── choice-choices.html
│   │   ├── choice-choices_de.html
│   │   ├── choice-choices_fr.html
│   │   ├── choice-choices_ja.html
│   │   ├── choice-choices_zh_TW.html
│   │   ├── choice.html
│   │   ├── choice_de.html
│   │   ├── choice_fr.html
│   │   ├── choice_ja.html
│   │   ├── choice_zh_TW.html
│   │   ├── description.html
│   │   ├── description_de.html
│   │   ├── description_fr.html
│   │   ├── description_ja.html
│   │   ├── description_zh_TW.html
│   │   ├── file-name.html
│   │   ├── file-name_de.html
│   │   ├── file-name_fr.html
│   │   ├── file-name_ja.html
│   │   ├── file-name_zh_TW.html
│   │   ├── file.html
│   │   ├── file_de.html
│   │   ├── file_fr.html
│   │   ├── file_ja.html
│   │   ├── file_zh_TW.html
│   │   ├── name.html
│   │   ├── name_de.html
│   │   ├── name_fr.html
│   │   ├── name_ja.html
│   │   ├── name_zh_TW.html
│   │   ├── run-filter.html
│   │   ├── run-project.html
│   │   ├── run-project_de.html
│   │   ├── run-project_fr.html
│   │   ├── run-project_ja.html
│   │   ├── run-project_zh_TW.html
│   │   ├── run.html
│   │   ├── run_de.html
│   │   ├── run_fr.html
│   │   ├── run_ja.html
│   │   ├── run_zh_TW.html
│   │   ├── string-default.html
│   │   ├── string-default_de.html
│   │   ├── string-default_fr.html
│   │   ├── string-default_ja.html
│   │   ├── string-default_zh_TW.html
│   │   ├── string.html
│   │   ├── string_de.html
│   │   ├── string_fr.html
│   │   ├── string_ja.html
│   │   └── string_zh_TW.html
│   ├── project-config
│   │   ├── batch.html
│   │   ├── batch_de.html
│   │   ├── batch_fr.html
│   │   ├── batch_ja.html
│   │   ├── batch_pt_BR.html
│   │   ├── batch_ru.html
│   │   ├── batch_tr.html
│   │   ├── batch_zh_TW.html
│   │   ├── block-downstream-building.html
│   │   ├── block-downstream-building_ja.html
│   │   ├── block-downstream-building_zh_TW.html
│   │   ├── block-upstream-building.html
│   │   ├── block-upstream-building_de.html
│   │   ├── block-upstream-building_ja.html
│   │   ├── block-upstream-building_zh_TW.html
│   │   ├── custom-workspace.html
│   │   ├── custom-workspace_de.html
│   │   ├── custom-workspace_fr.html
│   │   ├── custom-workspace_ja.html
│   │   ├── custom-workspace_tr.html
│   │   ├── custom-workspace_zh_TW.html
│   │   ├── defaultView.html
│   │   ├── defaultView_de.html
│   │   ├── defaultView_ja.html
│   │   ├── defaultView_zh_TW.html
│   │   ├── description.html
│   │   ├── description_de.html
│   │   ├── description_fr.html
│   │   ├── description_ja.html
│   │   ├── description_pt_BR.html
│   │   ├── description_ru.html
│   │   ├── description_tr.html
│   │   ├── description_zh_TW.html
│   │   ├── disable.html
│   │   ├── disable_de.html
│   │   ├── disable_fr.html
│   │   ├── disable_ja.html
│   │   ├── disable_pt_BR.html
│   │   ├── disable_ru.html
│   │   ├── disable_tr.html
│   │   ├── disable_zh_TW.html
│   │   ├── downstream.html
│   │   ├── downstream_de.html
│   │   ├── downstream_fr.html
│   │   ├── downstream_ja.html
│   │   ├── downstream_pt_BR.html
│   │   ├── downstream_ru.html
│   │   ├── downstream_tr.html
│   │   ├── downstream_zh_TW.html
│   │   ├── fingerprint.html
│   │   ├── fingerprint_de.html
│   │   ├── fingerprint_fr.html
│   │   ├── fingerprint_ja.html
│   │   ├── fingerprint_pt_BR.html
│   │   ├── fingerprint_ru.html
│   │   ├── fingerprint_tr.html
│   │   ├── fingerprint_zh_TW.html
│   │   ├── javadoc-keep-all.html
│   │   ├── javadoc-keep-all_de.html
│   │   ├── javadoc-keep-all_fr.html
│   │   ├── javadoc-keep-all_ja.html
│   │   ├── javadoc-keep-all_tr.html
│   │   ├── javadoc-keep-all_zh_TW.html
│   │   ├── log-rotation.html
│   │   ├── log-rotation_de.html
│   │   ├── log-rotation_fr.html
│   │   ├── log-rotation_ja.html
│   │   ├── log-rotation_pt_BR.html
│   │   ├── log-rotation_ru.html
│   │   ├── log-rotation_tr.html
│   │   ├── log-rotation_zh_TW.html
│   │   ├── parameterized-build.html
│   │   ├── parameterized-build_de.html
│   │   ├── parameterized-build_fr.html
│   │   ├── parameterized-build_ja.html
│   │   ├── parameterized-build_tr.html
│   │   ├── parameterized-build_zh_TW.html
│   │   ├── scmCheckoutRetryCount.html
│   │   ├── scmCheckoutRetryCount_de.html
│   │   ├── scmCheckoutRetryCount_ja.html
│   │   ├── scmCheckoutRetryCount_zh_CN.html
│   │   ├── scmCheckoutRetryCount_zh_TW.html
│   │   ├── triggerRemotely.html
│   │   ├── triggerRemotely_de.html
│   │   ├── triggerRemotely_fr.html
│   │   ├── triggerRemotely_ja.html
│   │   ├── triggerRemotely_pt_BR.html
│   │   ├── triggerRemotely_ru.html
│   │   ├── triggerRemotely_tr.html
│   │   └── triggerRemotely_zh_TW.html
│   ├── run-config
│   │   ├── description.html
│   │   ├── description_de.html
│   │   ├── description_ja.html
│   │   ├── description_zh_TW.html
│   │   ├── displayName.html
│   │   ├── displayName_de.html
│   │   ├── displayName_ja.html
│   │   └── displayName_zh_TW.html
│   ├── scm-browsers
│   │   ├── list.html
│   │   ├── list_de.html
│   │   ├── list_ja.html
│   │   └── list_zh_TW.html
│   ├── security
│   │   ├── container-realm.html
│   │   ├── container-realm_de.html
│   │   ├── container-realm_fr.html
│   │   ├── container-realm_ja.html
│   │   ├── container-realm_pt_BR.html
│   │   ├── container-realm_ru.html
│   │   ├── container-realm_tr.html
│   │   ├── container-realm_zh_CN.html
│   │   ├── container-realm_zh_TW.html
│   │   ├── full-control-once-logged-in.html
│   │   ├── full-control-once-logged-in_de.html
│   │   ├── full-control-once-logged-in_fr.html
│   │   ├── full-control-once-logged-in_ja.html
│   │   ├── full-control-once-logged-in_pt_BR.html
│   │   ├── full-control-once-logged-in_ru.html
│   │   ├── full-control-once-logged-in_tr.html
│   │   ├── full-control-once-logged-in_zh_CN.html
│   │   ├── full-control-once-logged-in_zh_TW.html
│   │   ├── ldap
│   │   │   ├── groupSearchBase.html
│   │   │   ├── groupSearchBase_de.html
│   │   │   ├── groupSearchBase_fr.html
│   │   │   ├── groupSearchBase_ja.html
│   │   │   ├── groupSearchBase_tr.html
│   │   │   ├── groupSearchBase_zh_TW.html
│   │   │   ├── managerDN.html
│   │   │   ├── managerDN_de.html
│   │   │   ├── managerDN_fr.html
│   │   │   ├── managerDN_ja.html
│   │   │   ├── managerDN_pt_BR.html
│   │   │   ├── managerDN_tr.html
│   │   │   ├── managerDN_zh_TW.html
│   │   │   ├── managerPassword.html
│   │   │   ├── managerPassword_de.html
│   │   │   ├── managerPassword_fr.html
│   │   │   ├── managerPassword_ja.html
│   │   │   ├── managerPassword_pt_BR.html
│   │   │   ├── managerPassword_tr.html
│   │   │   ├── managerPassword_zh_TW.html
│   │   │   ├── rootDN.html
│   │   │   ├── rootDN_de.html
│   │   │   ├── rootDN_fr.html
│   │   │   ├── rootDN_ja.html
│   │   │   ├── rootDN_pt_BR.html
│   │   │   ├── rootDN_ru.html
│   │   │   ├── rootDN_tr.html
│   │   │   ├── rootDN_zh_TW.html
│   │   │   ├── server.html
│   │   │   ├── server_de.html
│   │   │   ├── server_fr.html
│   │   │   ├── server_ja.html
│   │   │   ├── server_pt_BR.html
│   │   │   ├── server_ru.html
│   │   │   ├── server_tr.html
│   │   │   ├── server_zh_TW.html
│   │   │   ├── userSearchBase.html
│   │   │   ├── userSearchBase_de.html
│   │   │   ├── userSearchBase_fr.html
│   │   │   ├── userSearchBase_ja.html
│   │   │   ├── userSearchBase_pt_BR.html
│   │   │   ├── userSearchBase_ru.html
│   │   │   ├── userSearchBase_tr.html
│   │   │   ├── userSearchBase_zh_TW.html
│   │   │   ├── userSearchFilter.html
│   │   │   ├── userSearchFilter_de.html
│   │   │   ├── userSearchFilter_fr.html
│   │   │   ├── userSearchFilter_ja.html
│   │   │   ├── userSearchFilter_pt_BR.html
│   │   │   ├── userSearchFilter_ru.html
│   │   │   ├── userSearchFilter_tr.html
│   │   │   └── userSearchFilter_zh_TW.html
│   │   ├── legacy-auth-strategy.html
│   │   ├── legacy-auth-strategy_de.html
│   │   ├── legacy-auth-strategy_fr.html
│   │   ├── legacy-auth-strategy_ja.html
│   │   ├── legacy-auth-strategy_pt_BR.html
│   │   ├── legacy-auth-strategy_ru.html
│   │   ├── legacy-auth-strategy_tr.html
│   │   ├── legacy-auth-strategy_zh_CN.html
│   │   ├── legacy-auth-strategy_zh_TW.html
│   │   ├── no-authorization.html
│   │   ├── no-authorization_de.html
│   │   ├── no-authorization_fr.html
│   │   ├── no-authorization_ja.html
│   │   ├── no-authorization_pt_BR.html
│   │   ├── no-authorization_ru.html
│   │   ├── no-authorization_tr.html
│   │   ├── no-authorization_zh_CN.html
│   │   ├── no-authorization_zh_TW.html
│   │   ├── private-realm
│   │   │   ├── allow-signup.html
│   │   │   ├── allow-signup_de.html
│   │   │   ├── allow-signup_fr.html
│   │   │   ├── allow-signup_ja.html
│   │   │   ├── allow-signup_tr.html
│   │   │   ├── allow-signup_zh_CN.html
│   │   │   └── allow-signup_zh_TW.html
│   │   ├── private-realm.html
│   │   ├── private-realm_de.html
│   │   ├── private-realm_fr.html
│   │   ├── private-realm_ja.html
│   │   ├── private-realm_pt_BR.html
│   │   ├── private-realm_ru.html
│   │   ├── private-realm_tr.html
│   │   ├── private-realm_zh_CN.html
│   │   └── private-realm_zh_TW.html
│   ├── shell
│   │   ├── shellexe.html
│   │   ├── shellexe_de.html
│   │   ├── shellexe_fr.html
│   │   ├── shellexe_ja.html
│   │   ├── shellexe_nl.html
│   │   ├── shellexe_pt_BR.html
│   │   ├── shellexe_zh_CN.html
│   │   └── shellexe_zh_TW.html
│   ├── system-config
│   │   ├── cvs-browser.html
│   │   ├── cvs-browser_de.html
│   │   ├── cvs-browser_fr.html
│   │   ├── cvs-browser_ja.html
│   │   ├── cvs-browser_pt_BR.html
│   │   ├── cvs-browser_ru.html
│   │   ├── cvs-browser_tr.html
│   │   ├── cvs-browser_zh_TW.html
│   │   ├── defaultJobNamingStrategy.html
│   │   ├── defaultJobNamingStrategy_de.html
│   │   ├── defaultJobNamingStrategy_ja.html
│   │   ├── defaultJobNamingStrategy_zh_TW.html
│   │   ├── globalEnvironmentVariables.html
│   │   ├── globalEnvironmentVariables_de.html
│   │   ├── globalEnvironmentVariables_fr.html
│   │   ├── globalEnvironmentVariables_ja.html
│   │   ├── globalEnvironmentVariables_zh_CN.html
│   │   ├── globalEnvironmentVariables_zh_TW.html
│   │   ├── homeDirectory.html
│   │   ├── homeDirectory_de.html
│   │   ├── homeDirectory_fr.html
│   │   ├── homeDirectory_ja.html
│   │   ├── homeDirectory_pt_BR.html
│   │   ├── homeDirectory_ru.html
│   │   ├── homeDirectory_tr.html
│   │   ├── homeDirectory_zh_CN.html
│   │   ├── homeDirectory_zh_TW.html
│   │   ├── master-slave
│   │   │   ├── availability.html
│   │   │   ├── availability_de.html
│   │   │   ├── availability_fr.html
│   │   │   ├── availability_ja.html
│   │   │   ├── availability_nl.html
│   │   │   ├── availability_tr.html
│   │   │   ├── availability_zh_TW.html
│   │   │   ├── clock.html
│   │   │   ├── clock_de.html
│   │   │   ├── clock_fr.html
│   │   │   ├── clock_ja.html
│   │   │   ├── clock_nl.html
│   │   │   ├── clock_pt_BR.html
│   │   │   ├── clock_ru.html
│   │   │   ├── clock_tr.html
│   │   │   ├── clock_zh_TW.html
│   │   │   ├── demand
│   │   │   │   ├── idleDelay.html
│   │   │   │   ├── idleDelay_de.html
│   │   │   │   ├── idleDelay_fr.html
│   │   │   │   ├── idleDelay_ja.html
│   │   │   │   ├── idleDelay_nl.html
│   │   │   │   ├── idleDelay_tr.html
│   │   │   │   ├── idleDelay_zh_TW.html
│   │   │   │   ├── inDemandDelay.html
│   │   │   │   ├── inDemandDelay_de.html
│   │   │   │   ├── inDemandDelay_fr.html
│   │   │   │   ├── inDemandDelay_ja.html
│   │   │   │   ├── inDemandDelay_nl.html
│   │   │   │   ├── inDemandDelay_tr.html
│   │   │   │   └── inDemandDelay_zh_TW.html
│   │   │   ├── description.html
│   │   │   ├── description_de.html
│   │   │   ├── description_fr.html
│   │   │   ├── description_ja.html
│   │   │   ├── description_pt_BR.html
│   │   │   ├── description_ru.html
│   │   │   ├── description_tr.html
│   │   │   ├── description_zh_TW.html
│   │   │   ├── jnlp-tunnel.html
│   │   │   ├── jnlp-tunnel_de.html
│   │   │   ├── jnlp-tunnel_fr.html
│   │   │   ├── jnlp-tunnel_ja.html
│   │   │   ├── jnlp-tunnel_zh_TW.html
│   │   │   ├── jnlpSecurity.html
│   │   │   ├── jnlpSecurity_de.html
│   │   │   ├── jnlpSecurity_fr.html
│   │   │   ├── jnlpSecurity_ja.html
│   │   │   ├── jnlpSecurity_pt_BR.html
│   │   │   ├── jnlpSecurity_ru.html
│   │   │   ├── jnlpSecurity_tr.html
│   │   │   ├── jnlpSecurity_zh_TW.html
│   │   │   ├── numExecutors.html
│   │   │   ├── numExecutors_de.html
│   │   │   ├── numExecutors_fr.html
│   │   │   ├── numExecutors_ja.html
│   │   │   ├── numExecutors_pt_BR.html
│   │   │   ├── numExecutors_ru.html
│   │   │   ├── numExecutors_tr.html
│   │   │   ├── numExecutors_zh_CN.html
│   │   │   ├── numExecutors_zh_TW.html
│   │   │   ├── usage.html
│   │   │   ├── usage_de.html
│   │   │   ├── usage_fr.html
│   │   │   ├── usage_ja.html
│   │   │   ├── usage_pt_BR.html
│   │   │   ├── usage_ru.html
│   │   │   ├── usage_tr.html
│   │   │   ├── usage_zh_CN.html
│   │   │   └── usage_zh_TW.html
│   │   ├── nodeEnvironmentVariables.html
│   │   ├── nodeEnvironmentVariables_de.html
│   │   ├── nodeEnvironmentVariables_fr.html
│   │   ├── nodeEnvironmentVariables_ja.html
│   │   ├── nodeEnvironmentVariables_zh_TW.html
│   │   ├── patternJobNamingStrategy.html
│   │   ├── patternJobNamingStrategy_de.html
│   │   ├── patternJobNamingStrategy_ja.html
│   │   ├── patternJobNamingStrategy_zh_TW.html
│   │   ├── quietPeriod.html
│   │   ├── quietPeriod_de.html
│   │   ├── quietPeriod_fr.html
│   │   ├── quietPeriod_ja.html
│   │   ├── quietPeriod_pt_BR.html
│   │   ├── quietPeriod_ru.html
│   │   ├── quietPeriod_tr.html
│   │   ├── quietPeriod_zh_TW.html
│   │   ├── systemMessage.html
│   │   ├── systemMessage_de.html
│   │   ├── systemMessage_fr.html
│   │   ├── systemMessage_ja.html
│   │   ├── systemMessage_pt_BR.html
│   │   ├── systemMessage_ru.html
│   │   ├── systemMessage_tr.html
│   │   ├── systemMessage_zh_CN.html
│   │   └── systemMessage_zh_TW.html
│   ├── tasks
│   │   ├── aggregate-test
│   │   │   ├── auto-aggregate.html
│   │   │   ├── auto-aggregate_de.html
│   │   │   ├── auto-aggregate_fr.html
│   │   │   ├── auto-aggregate_ja.html
│   │   │   ├── auto-aggregate_nl.html
│   │   │   ├── auto-aggregate_pt_BR.html
│   │   │   ├── auto-aggregate_tr.html
│   │   │   ├── auto-aggregate_zh_TW.html
│   │   │   ├── help.html
│   │   │   ├── help_de.html
│   │   │   ├── help_fr.html
│   │   │   ├── help_ja.html
│   │   │   ├── help_nl.html
│   │   │   ├── help_pt_BR.html
│   │   │   ├── help_tr.html
│   │   │   ├── help_zh_TW.html
│   │   │   ├── manual-list.html
│   │   │   ├── manual-list_de.html
│   │   │   ├── manual-list_fr.html
│   │   │   ├── manual-list_ja.html
│   │   │   ├── manual-list_nl.html
│   │   │   ├── manual-list_pt_BR.html
│   │   │   ├── manual-list_tr.html
│   │   │   └── manual-list_zh_TW.html
│   │   ├── fingerprint
│   │   │   ├── keepDependencies.html
│   │   │   ├── keepDependencies_de.html
│   │   │   ├── keepDependencies_fr.html
│   │   │   ├── keepDependencies_ja.html
│   │   │   ├── keepDependencies_nl.html
│   │   │   ├── keepDependencies_pt_BR.html
│   │   │   ├── keepDependencies_ru.html
│   │   │   ├── keepDependencies_tr.html
│   │   │   └── keepDependencies_zh_TW.html
│   │   ├── junit
│   │   │   ├── report.html
│   │   │   ├── report_de.html
│   │   │   ├── report_fr.html
│   │   │   ├── report_ja.html
│   │   │   ├── report_nl.html
│   │   │   ├── report_pt_BR.html
│   │   │   ├── report_ru.html
│   │   │   ├── report_tr.html
│   │   │   └── report_zh_TW.html
│   │   └── maven
│   │       ├── properties.html
│   │       ├── properties_de.html
│   │       ├── properties_fr.html
│   │       ├── properties_ja.html
│   │       └── properties_zh_TW.html
│   ├── tools
│   │   ├── help-label.html
│   │   ├── help-label_de.html
│   │   ├── help-label_ja.html
│   │   ├── help-label_zh_CN.html
│   │   ├── help-label_zh_TW.html
│   │   ├── tool-location-node-property.html
│   │   ├── tool-location-node-property_de.html
│   │   ├── tool-location-node-property_fr.html
│   │   ├── tool-location-node-property_ja.html
│   │   ├── tool-location-node-property_zh_CN.html
│   │   └── tool-location-node-property_zh_TW.html
│   ├── user
│   │   ├── description.html
│   │   ├── description_de.html
│   │   ├── description_fr.html
│   │   ├── description_ja.html
│   │   ├── description_nl.html
│   │   ├── description_pt_BR.html
│   │   ├── description_ru.html
│   │   ├── description_tr.html
│   │   ├── description_zh_TW.html
│   │   ├── fullName.html
│   │   ├── fullName_de.html
│   │   ├── fullName_fr.html
│   │   ├── fullName_ja.html
│   │   ├── fullName_nl.html
│   │   ├── fullName_pt_BR.html
│   │   ├── fullName_ru.html
│   │   ├── fullName_tr.html
│   │   └── fullName_zh_TW.html
│   └── view-config
│       ├── description.html
│       ├── description_de.html
│       ├── description_fr.html
│       ├── description_ja.html
│       ├── description_nl.html
│       ├── description_pt_BR.html
│       ├── description_ru.html
│       ├── description_tr.html
│       ├── description_zh_TW.html
│       ├── filter-executors.html
│       ├── filter-executors_de.html
│       ├── filter-executors_ja.html
│       ├── filter-executors_zh_TW.html
│       ├── filter-queue.html
│       ├── filter-queue_de.html
│       ├── filter-queue_ja.html
│       ├── filter-queue_zh_TW.html
│       ├── includeregex.html
│       ├── includeregex_de.html
│       ├── includeregex_fr.html
│       ├── includeregex_ja.html
│       ├── includeregex_nl.html
│       ├── includeregex_pt_BR.html
│       ├── includeregex_ru.html
│       ├── includeregex_tr.html
│       ├── includeregex_zh_TW.html
│       ├── statusFilter.html
│       ├── statusFilter_ja.html
│       └── statusFilter_zh_TW.html
├── images
│   ├── 16x16
│   │   ├── aborted.gif
│   │   ├── aborted.png
│   │   ├── aborted_anime.gif
│   │   ├── accept.png
│   │   ├── attribute.png
│   │   ├── blue.gif
│   │   ├── blue.png
│   │   ├── blue_anime.gif
│   │   ├── clock.gif
│   │   ├── clock.png
│   │   ├── clock_anime.gif
│   │   ├── collapse.png
│   │   ├── computer-flash.gif
│   │   ├── computer-x.gif
│   │   ├── computer-x.png
│   │   ├── computer.gif
│   │   ├── computer.png
│   │   ├── disabled.gif
│   │   ├── disabled.png
│   │   ├── disabled_anime.gif
│   │   ├── document_add.gif
│   │   ├── document_add.png
│   │   ├── document_delete.gif
│   │   ├── document_delete.png
│   │   ├── document_edit.gif
│   │   ├── document_edit.png
│   │   ├── edit-delete.gif
│   │   ├── edit-delete.png
│   │   ├── edit-select-all.gif
│   │   ├── edit-select-all.png
│   │   ├── empty.gif
│   │   ├── empty.png
│   │   ├── error.gif
│   │   ├── error.png
│   │   ├── expand.png
│   │   ├── fingerprint.gif
│   │   ├── fingerprint.png
│   │   ├── folder-error.gif
│   │   ├── folder-error.png
│   │   ├── folder-open.gif
│   │   ├── folder-open.png
│   │   ├── folder.gif
│   │   ├── folder.png
│   │   ├── gear2.gif
│   │   ├── gear2.png
│   │   ├── go-next.gif
│   │   ├── go-next.png
│   │   ├── green.gif
│   │   ├── green_anime.gif
│   │   ├── grey.gif
│   │   ├── grey.png
│   │   ├── grey_anime.gif
│   │   ├── health-00to19.gif
│   │   ├── health-00to19.png
│   │   ├── health-20to39.gif
│   │   ├── health-20to39.png
│   │   ├── health-40to59.gif
│   │   ├── health-40to59.png
│   │   ├── health-60to79.gif
│   │   ├── health-60to79.png
│   │   ├── health-80plus.gif
│   │   ├── health-80plus.png
│   │   ├── help.gif
│   │   ├── help.png
│   │   ├── hourglass.gif
│   │   ├── hourglass.png
│   │   ├── lock.gif
│   │   ├── lock.png
│   │   ├── nobuilt.gif
│   │   ├── nobuilt.png
│   │   ├── nobuilt_anime.gif
│   │   ├── notepad.gif
│   │   ├── notepad.png
│   │   ├── orange-square.png
│   │   ├── package.gif
│   │   ├── package.png
│   │   ├── person.gif
│   │   ├── person.png
│   │   ├── plugin.gif
│   │   ├── plugin.png
│   │   ├── red.gif
│   │   ├── red.png
│   │   ├── red_anime.gif
│   │   ├── redo.gif
│   │   ├── redo.png
│   │   ├── save.gif
│   │   ├── save.png
│   │   ├── search.gif
│   │   ├── search.png
│   │   ├── secure.png
│   │   ├── setting.png
│   │   ├── star-gold.gif
│   │   ├── star-gold.png
│   │   ├── star.gif
│   │   ├── star.png
│   │   ├── stop.gif
│   │   ├── stop.png
│   │   ├── terminal.gif
│   │   ├── terminal.png
│   │   ├── text-error.gif
│   │   ├── text-error.png
│   │   ├── text.gif
│   │   ├── text.png
│   │   ├── user.gif
│   │   ├── user.png
│   │   ├── warning.gif
│   │   ├── warning.png
│   │   ├── yellow.gif
│   │   ├── yellow.png
│   │   └── yellow_anime.gif
│   ├── 24x24
│   │   ├── aborted.gif
│   │   ├── aborted.png
│   │   ├── aborted_anime.gif
│   │   ├── accept.png
│   │   ├── attribute.png
│   │   ├── blue.gif
│   │   ├── blue.png
│   │   ├── blue_anime.gif
│   │   ├── clipboard.gif
│   │   ├── clipboard.png
│   │   ├── clock.gif
│   │   ├── clock.png
│   │   ├── clock_anime.gif
│   │   ├── computer-flash.gif
│   │   ├── computer-x.gif
│   │   ├── computer-x.png
│   │   ├── computer.gif
│   │   ├── computer.png
│   │   ├── delete-document.gif
│   │   ├── delete-document.png
│   │   ├── disabled.gif
│   │   ├── disabled.png
│   │   ├── disabled_anime.gif
│   │   ├── document-properties.gif
│   │   ├── document-properties.png
│   │   ├── document.gif
│   │   ├── document.png
│   │   ├── edit-delete.gif
│   │   ├── edit-delete.png
│   │   ├── empty.gif
│   │   ├── empty.png
│   │   ├── fingerprint.gif
│   │   ├── fingerprint.png
│   │   ├── folder-delete.gif
│   │   ├── folder-delete.png
│   │   ├── folder.gif
│   │   ├── folder.png
│   │   ├── gear.gif
│   │   ├── gear.png
│   │   ├── gear2.gif
│   │   ├── gear2.png
│   │   ├── graph.gif
│   │   ├── graph.png
│   │   ├── green.gif
│   │   ├── green_anime.gif
│   │   ├── grey.gif
│   │   ├── grey.png
│   │   ├── grey_anime.gif
│   │   ├── health-00to19.gif
│   │   ├── health-00to19.png
│   │   ├── health-20to39.gif
│   │   ├── health-20to39.png
│   │   ├── health-40to59.gif
│   │   ├── health-40to59.png
│   │   ├── health-60to79.gif
│   │   ├── health-60to79.png
│   │   ├── health-80plus.gif
│   │   ├── health-80plus.png
│   │   ├── help.gif
│   │   ├── help.png
│   │   ├── installer.gif
│   │   ├── installer.png
│   │   ├── lock.png
│   │   ├── monitor.gif
│   │   ├── monitor.png
│   │   ├── new-computer.gif
│   │   ├── new-computer.png
│   │   ├── new-document.gif
│   │   ├── new-document.png
│   │   ├── new-package.gif
│   │   ├── new-package.png
│   │   ├── new-user.gif
│   │   ├── new-user.png
│   │   ├── next.gif
│   │   ├── next.png
│   │   ├── nobuilt.gif
│   │   ├── nobuilt.png
│   │   ├── nobuilt_anime.gif
│   │   ├── notepad.gif
│   │   ├── notepad.png
│   │   ├── orange-square.gif
│   │   ├── orange-square.png
│   │   ├── package.gif
│   │   ├── package.png
│   │   ├── plugin.png
│   │   ├── previous.gif
│   │   ├── previous.png
│   │   ├── red.gif
│   │   ├── red.png
│   │   ├── red_anime.gif
│   │   ├── redo.gif
│   │   ├── redo.png
│   │   ├── refresh.gif
│   │   ├── refresh.png
│   │   ├── save.gif
│   │   ├── save.png
│   │   ├── search.gif
│   │   ├── search.png
│   │   ├── secure.png
│   │   ├── setting.gif
│   │   ├── setting.png
│   │   ├── star-gold.gif
│   │   ├── star-gold.png
│   │   ├── star.gif
│   │   ├── star.png
│   │   ├── terminal.gif
│   │   ├── terminal.png
│   │   ├── up.gif
│   │   ├── up.png
│   │   ├── user.gif
│   │   ├── user.png
│   │   ├── yellow.gif
│   │   ├── yellow.png
│   │   └── yellow_anime.gif
│   ├── 32x32
│   │   ├── aborted.gif
│   │   ├── aborted.png
│   │   ├── aborted_anime.gif
│   │   ├── accept.png
│   │   ├── attribute.png
│   │   ├── blue.gif
│   │   ├── blue.png
│   │   ├── blue_anime.gif
│   │   ├── clipboard.gif
│   │   ├── clipboard.png
│   │   ├── clock.gif
│   │   ├── clock.png
│   │   ├── clock_anime.gif
│   │   ├── computer-flash.gif
│   │   ├── computer-x.gif
│   │   ├── computer-x.png
│   │   ├── computer.gif
│   │   ├── computer.png
│   │   ├── disabled.gif
│   │   ├── disabled.png
│   │   ├── disabled_anime.gif
│   │   ├── empty.gif
│   │   ├── empty.png
│   │   ├── error.gif
│   │   ├── error.png
│   │   ├── folder.gif
│   │   ├── folder.png
│   │   ├── gear2.png
│   │   ├── graph.gif
│   │   ├── graph.png
│   │   ├── green.gif
│   │   ├── green_anime.gif
│   │   ├── grey.gif
│   │   ├── grey.png
│   │   ├── grey_anime.gif
│   │   ├── health-00to19.gif
│   │   ├── health-00to19.png
│   │   ├── health-20to39.gif
│   │   ├── health-20to39.png
│   │   ├── health-40to59.gif
│   │   ├── health-40to59.png
│   │   ├── health-60to79.gif
│   │   ├── health-60to79.png
│   │   ├── health-80plus.gif
│   │   ├── health-80plus.png
│   │   ├── lock.png
│   │   ├── nobuilt.gif
│   │   ├── nobuilt.png
│   │   ├── nobuilt_anime.gif
│   │   ├── orange-square.png
│   │   ├── package.png
│   │   ├── plugin.gif
│   │   ├── plugin.png
│   │   ├── red.gif
│   │   ├── red.png
│   │   ├── red_anime.gif
│   │   ├── secure.png
│   │   ├── setting.gif
│   │   ├── setting.png
│   │   ├── star-gold.gif
│   │   ├── star-gold.png
│   │   ├── star.gif
│   │   ├── star.png
│   │   ├── user.gif
│   │   ├── user.png
│   │   ├── yellow.gif
│   │   ├── yellow.png
│   │   └── yellow_anime.gif
│   ├── 48x48
│   │   ├── aborted.gif
│   │   ├── aborted.png
│   │   ├── aborted_anime.gif
│   │   ├── accept.png
│   │   ├── attribute.png
│   │   ├── blue.gif
│   │   ├── blue.png
│   │   ├── blue_anime.gif
│   │   ├── clipboard.gif
│   │   ├── clipboard.png
│   │   ├── computer-flash.gif
│   │   ├── computer-x.gif
│   │   ├── computer-x.png
│   │   ├── computer.gif
│   │   ├── computer.png
│   │   ├── disabled.gif
│   │   ├── disabled.png
│   │   ├── disabled_anime.gif
│   │   ├── document.gif
│   │   ├── document.png
│   │   ├── empty.gif
│   │   ├── empty.png
│   │   ├── error.gif
│   │   ├── error.png
│   │   ├── fingerprint.gif
│   │   ├── fingerprint.png
│   │   ├── folder-delete.gif
│   │   ├── folder-delete.png
│   │   ├── folder.gif
│   │   ├── folder.png
│   │   ├── gear2.gif
│   │   ├── gear2.png
│   │   ├── graph.gif
│   │   ├── graph.png
│   │   ├── green.gif
│   │   ├── green_anime.gif
│   │   ├── grey.gif
│   │   ├── grey.png
│   │   ├── grey_anime.gif
│   │   ├── health-00to19.gif
│   │   ├── health-00to19.png
│   │   ├── health-20to39.gif
│   │   ├── health-20to39.png
│   │   ├── health-40to59.gif
│   │   ├── health-40to59.png
│   │   ├── health-60to79.gif
│   │   ├── health-60to79.png
│   │   ├── health-80plus.gif
│   │   ├── health-80plus.png
│   │   ├── help.gif
│   │   ├── help.png
│   │   ├── installer.gif
│   │   ├── installer.png
│   │   ├── lock.png
│   │   ├── monitor.gif
│   │   ├── monitor.png
│   │   ├── network.gif
│   │   ├── network.png
│   │   ├── nobuilt.gif
│   │   ├── nobuilt.png
│   │   ├── nobuilt_anime.gif
│   │   ├── notepad.gif
│   │   ├── notepad.png
│   │   ├── orange-square.gif
│   │   ├── orange-square.png
│   │   ├── package.gif
│   │   ├── package.png
│   │   ├── plugin.gif
│   │   ├── plugin.png
│   │   ├── red.gif
│   │   ├── red.png
│   │   ├── red_anime.gif
│   │   ├── redo.gif
│   │   ├── redo.png
│   │   ├── refresh.gif
│   │   ├── refresh.png
│   │   ├── search.gif
│   │   ├── search.png
│   │   ├── secure.gif
│   │   ├── secure.png
│   │   ├── setting.gif
│   │   ├── setting.png
│   │   ├── star-gold.gif
│   │   ├── star-gold.png
│   │   ├── star.gif
│   │   ├── star.png
│   │   ├── system-log-out.gif
│   │   ├── system-log-out.png
│   │   ├── terminal.gif
│   │   ├── terminal.png
│   │   ├── user.gif
│   │   ├── user.png
│   │   ├── warning.gif
│   │   ├── warning.png
│   │   ├── yellow.gif
│   │   ├── yellow.png
│   │   └── yellow_anime.gif
│   ├── RRZEIconSet-License.url
│   ├── RRZEIconSet.url
│   ├── TangoProject-License.url
│   ├── atom-license.txt
│   ├── atom.gif
│   ├── bottom-sticker-top-edge.png
│   ├── grip.png
│   ├── headless.png
│   ├── jenkins-redbg.png
│   ├── jenkins.png
│   ├── none.gif
│   ├── progress-unknown-red.gif
│   ├── progress-unknown.gif
│   ├── rage.png
│   ├── spinner.gif
│   ├── textarea-handle.gif
│   ├── title.png
│   ├── title.svg
│   ├── title.xcf
│   ├── top-sticker-bottom-edge.png
│   ├── topbar.png
│   ├── topbar.svg
│   └── webstart.gif
├── robots.txt
├── scripts
│   ├── behavior.js
│   ├── combobox-readme.txt
│   ├── combobox.js
│   ├── hudson-behavior.js
│   ├── msie.js
│   ├── prototype.js
│   ├── sortable.js
│   ├── utilities.js
│   └── yui
│       ├── animation
│       │   ├── animation-debug.js
│       │   └── animation-min.js
│       ├── assets
│       │   └── skins
│       │       └── sam
│       │           ├── ajax-loader.gif
│       │           ├── asc.gif
│       │           ├── autocomplete.css
│       │           ├── back-h.png
│       │           ├── back-v.png
│       │           ├── bar-h.png
│       │           ├── bar-v.png
│       │           ├── bg-h.gif
│       │           ├── bg-v.gif
│       │           ├── blankimage.png
│       │           ├── button.css
│       │           ├── calendar.css
│       │           ├── carousel.css
│       │           ├── check0.gif
│       │           ├── check1.gif
│       │           ├── check2.gif
│       │           ├── colorpicker.css
│       │           ├── container.css
│       │           ├── datatable.css
│       │           ├── desc.gif
│       │           ├── dt-arrow-dn.png
│       │           ├── dt-arrow-up.png
│       │           ├── editor-knob.gif
│       │           ├── editor-sprite-active.gif
│       │           ├── editor-sprite.gif
│       │           ├── editor.css
│       │           ├── header_background.png
│       │           ├── hue_bg.png
│       │           ├── imagecropper.css
│       │           ├── layout.css
│       │           ├── layout_sprite.png
│       │           ├── loading.gif
│       │           ├── logger.css
│       │           ├── menu-button-arrow-disabled.png
│       │           ├── menu-button-arrow.png
│       │           ├── menu.css
│       │           ├── menubaritem_submenuindicator.png
│       │           ├── menubaritem_submenuindicator_disabled.png
│       │           ├── menuitem_checkbox.png
│       │           ├── menuitem_checkbox_disabled.png
│       │           ├── menuitem_submenuindicator.png
│       │           ├── menuitem_submenuindicator_disabled.png
│       │           ├── paginator.css
│       │           ├── picker_mask.png
│       │           ├── profilerviewer.css
│       │           ├── progressbar.css
│       │           ├── resize.css
│       │           ├── simpleeditor.css
│       │           ├── skin.css
│       │           ├── slider.css
│       │           ├── split-button-arrow-active.png
│       │           ├── split-button-arrow-disabled.png
│       │           ├── split-button-arrow-focus.png
│       │           ├── split-button-arrow-hover.png
│       │           ├── split-button-arrow.png
│       │           ├── sprite.png
│       │           ├── sprite.psd
│       │           ├── tabview.css
│       │           ├── treeview-loading.gif
│       │           ├── treeview-sprite.gif
│       │           ├── treeview.css
│       │           ├── wait.gif
│       │           └── yuitest.css
│       ├── autocomplete
│       │   ├── assets
│       │   │   ├── autocomplete-core.css
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── autocomplete-skin.css
│       │   │           └── autocomplete.css
│       │   ├── autocomplete-debug.js
│       │   └── autocomplete-min.js
│       ├── base
│       │   ├── base-min.css
│       │   └── base.css
│       ├── button
│       │   ├── assets
│       │   │   ├── button-core.css
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── button-skin.css
│       │   │           ├── button.css
│       │   │           ├── menu-button-arrow-disabled.png
│       │   │           ├── menu-button-arrow.png
│       │   │           ├── split-button-arrow-active.png
│       │   │           ├── split-button-arrow-disabled.png
│       │   │           ├── split-button-arrow-focus.png
│       │   │           ├── split-button-arrow-hover.png
│       │   │           └── split-button-arrow.png
│       │   ├── button-debug.js
│       │   └── button-min.js
│       ├── connection
│       │   ├── connection-debug.js
│       │   ├── connection-min.js
│       │   ├── connection.swf
│       │   ├── connection_core-debug.js
│       │   └── connection_core-min.js
│       ├── container
│       │   ├── assets
│       │   │   ├── alrt16_1.gif
│       │   │   ├── blck16_1.gif
│       │   │   ├── close12_1.gif
│       │   │   ├── container-core.css
│       │   │   ├── container.css
│       │   │   ├── hlp16_1.gif
│       │   │   ├── info16_1.gif
│       │   │   ├── skins
│       │   │   │   └── sam
│       │   │   │       ├── container-skin.css
│       │   │   │       └── container.css
│       │   │   ├── tip16_1.gif
│       │   │   └── warn16_1.gif
│       │   ├── container-debug.js
│       │   ├── container-min.js
│       │   ├── container_core-debug.js
│       │   └── container_core-min.js
│       ├── cookie
│       │   ├── cookie-debug.js
│       │   └── cookie-min.js
│       ├── cutdown.sh
│       ├── datasource
│       │   ├── datasource-debug.js
│       │   └── datasource-min.js
│       ├── dom
│       │   ├── dom-debug.js
│       │   └── dom-min.js
│       ├── dragdrop
│       │   ├── dragdrop-debug.js
│       │   └── dragdrop-min.js
│       ├── editor
│       │   ├── assets
│       │   │   ├── editor-core.css
│       │   │   ├── simpleeditor-core.css
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── blankimage.png
│       │   │           ├── editor-knob.gif
│       │   │           ├── editor-skin.css
│       │   │           ├── editor-sprite-active.gif
│       │   │           ├── editor-sprite.gif
│       │   │           ├── editor.css
│       │   │           ├── simpleeditor-skin.css
│       │   │           └── simpleeditor.css
│       │   ├── editor-debug.js
│       │   ├── editor-min.js
│       │   ├── simpleeditor-debug.js
│       │   └── simpleeditor-min.js
│       ├── element
│       │   ├── element-debug.js
│       │   └── element-min.js
│       ├── event
│       │   ├── event-debug.js
│       │   └── event-min.js
│       ├── fonts
│       │   ├── fonts-min.css
│       │   └── fonts.css
│       ├── logger
│       │   ├── assets
│       │   │   ├── logger-core.css
│       │   │   ├── logger.css
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── logger-skin.css
│       │   │           └── logger.css
│       │   ├── logger-debug.js
│       │   └── logger-min.js
│       ├── menu
│       │   ├── assets
│       │   │   ├── menu-core.css
│       │   │   ├── menu.css
│       │   │   ├── menu_down_arrow.png
│       │   │   ├── menu_down_arrow_disabled.png
│       │   │   ├── menu_up_arrow.png
│       │   │   ├── menu_up_arrow_disabled.png
│       │   │   ├── menubaritem_submenuindicator.png
│       │   │   ├── menubaritem_submenuindicator_disabled.png
│       │   │   ├── menubaritem_submenuindicator_selected.png
│       │   │   ├── menuitem_checkbox.png
│       │   │   ├── menuitem_checkbox_disabled.png
│       │   │   ├── menuitem_checkbox_selected.png
│       │   │   ├── menuitem_submenuindicator.png
│       │   │   ├── menuitem_submenuindicator_disabled.png
│       │   │   ├── menuitem_submenuindicator_selected.png
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── menu-skin.css
│       │   │           ├── menu.css
│       │   │           ├── menubaritem_submenuindicator.png
│       │   │           ├── menubaritem_submenuindicator_disabled.png
│       │   │           ├── menuitem_checkbox.png
│       │   │           ├── menuitem_checkbox_disabled.png
│       │   │           ├── menuitem_submenuindicator.png
│       │   │           └── menuitem_submenuindicator_disabled.png
│       │   ├── menu-debug.js
│       │   └── menu-min.js
│       ├── resize
│       │   ├── assets
│       │   │   ├── resize-core.css
│       │   │   └── skins
│       │   │       └── sam
│       │   │           ├── layout_sprite.png
│       │   │           ├── resize-skin.css
│       │   │           └── resize.css
│       │   ├── resize-debug.js
│       │   └── resize-min.js
│       ├── storage
│       │   ├── storage-debug.js
│       │   └── storage-min.js
│       ├── tabview
│       │   ├── assets
│       │   │   ├── border_tabs.css
│       │   │   ├── loading.gif
│       │   │   ├── skin-sam.css
│       │   │   ├── skins
│       │   │   │   └── sam
│       │   │   │       ├── tabview-skin.css
│       │   │   │       └── tabview.css
│       │   │   ├── tabview-core.css
│       │   │   └── tabview.css
│       │   ├── tabview-debug.js
│       │   └── tabview-min.js
│       ├── treeview
│       │   ├── assets
│       │   │   ├── skins
│       │   │   │   └── sam
│       │   │   │       ├── check0.gif
│       │   │   │       ├── check1.gif
│       │   │   │       ├── check2.gif
│       │   │   │       ├── loading.gif
│       │   │   │       ├── treeview-loading.gif
│       │   │   │       ├── treeview-skin.css
│       │   │   │       ├── treeview-sprite.gif
│       │   │   │       └── treeview.css
│       │   │   └── treeview-core.css
│       │   ├── treeview-debug.js
│       │   └── treeview-min.js
│       └── yahoo
│           ├── yahoo-debug.js
│           └── yahoo-min.js
└── winstone.jar
</pre>
</div>
</div>




<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 次やりたいこと</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>Jenkins Master-Slave構成の構築
</li>
<li>音声キャストサービスとの連携（喋るようにする）
</li>
</ul>
</div>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[検証]Weblogicのインスツルメンテーション機能]]></title>
    <link href="http://luozengbin.github.io/blog/2014-07-22-%5B%E6%A4%9C%E8%A8%BC%5Dweblogic%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%84%E3%83%AB%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%A9%9F%E8%83%BD.html"/>
    <updated>2014-07-22T00:00:00+09:00</updated>
    <id>http://luozengbin.github.io/blog/[検証]weblogicのインスツルメンテーション機能</id>
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 検証アプリの作成</a></li>
<li><a href="#sec-2">2. インスツルメンテーション設定手順</a>
<ul>
<li><a href="#sec-2-1">2.1. 診断システム・モジュールの作成</a></li>
<li><a href="#sec-2-2">2.2. アプリケーションの設定</a></li>
<li><a href="#sec-2-3">2.3. 採集されたイベントデータの確認</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 参考リンク</a></li>
</ul>
</div>
</div>


<p>
トラブルシューティング時にログでアプリケーションの動作を追うことが常套手段と言えるで
しょう。しかし、アプリケーションにログ出力処理が実装されていないケースもあり得るで
しょう。先日そのようなケースに遭遇してまして、メソッドのエントリとリターンのポイント
ですらログ出力してくれなかった。コード規模が小さいのであれば、すぐログ出力処理を実装
すればいいでしょうけど、大規模の場合それなりに大変でしょう。
</p>




<p>
幸い、Weblogicサーバにはアプリケーションケーションの動作イベントを記録するような機能
が提供されている。それはWebLogic診断フレームワークのインスツルメンテーション機能で
す。以下はインスツルメンテーション機能の使い方を検証します。
</p>




<p>
<!-- more -->
</p>




<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 検証アプリの作成</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>jspxページ１枚、ボタンとテキストを適当に配置する
</li>
<li>ボタンイベントをハンドリングするためのManagedBeanを作成する
</li>
</ul>
</div>
</div>




<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> インスツルメンテーション設定手順</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 診断システム・モジュールの作成</h3>
<div class="outline-text-3" id="text-2-1">
<p>
診断システム・モジュール一覧にモジュールがあればそれを利用する、なければ適当に新規作成
する。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-01.png" alt="2014-07-12-wls-01.png" />
</p>
</div>

<p>
モジュールをインスツルメンテーション画面へ辿って、「有効」チェックボックスがONである
状態を確認する。OFFの状態場合、状態をONへ変更する。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-02.png" alt="2014-07-12-wls-02.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> アプリケーションの設定</h3>
<div class="outline-text-3" id="text-2-2">
<p>
デプロイメントリストから検証用アプリの「構成→インスツルメンテーション」設定画面へ辿っ
て、「有効」チェックボックスをONにする。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-03.png" alt="2014-07-12-wls-03.png" />
</p>
</div>

<p>
同じ画面の下にある「カスタム監視を追加」ボタンから監視ポイントの登録を行う。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-04.png" alt="2014-07-12-wls-04.png" />
</p>
</div>

<p>
<code>ポイントカット</code> に監視対象クラスやメソッドを指定することができます。ここの例
<code>execution(public * view.* *(...))</code> ではviewパッケージ下のすべてのクラスのすべての
メソッドにマッチします。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-05.png" alt="2014-07-12-wls-05.png" />
</p>
</div>

<p>
続いて診断アクション（ポイントカットでマッチした箇所が実行された時に実行する診断アク
ション）を指定する。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-06.png" alt="2014-07-12-wls-06.png" />
</p>
</div>

<p>
ここは <code>TraceAction</code> アクションを選択する。各アクションで取得できる情報は <a href="http://docs.oracle.com/cd/E28389_01/web.1111/b60994/appendix_instrum_library.htm#i1060289">ここ</a> を参照する。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-07.png" alt="2014-07-12-wls-07.png" />
</p>
</div>

<p>
これで設定が終わります。サーバを再起動する。
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 採集されたイベントデータの確認</h3>
<div class="outline-text-3" id="text-2-3">
<p>
採集されたイベントデータは <code>EventsDataArchive</code> ログファイルに保存される。ログファイル
リストの <code>EventsDataArchive</code> から参照することができる。
</p>


<div class="figure">
<p><img src="img/2014-07-12-wls-08.png" alt="2014-07-12-wls-08.png" />
</p>
</div>

<p>
取れた <code>TraceAction</code> イベントレコード
<img src="img/2014-07-12-wls-09.png" alt="2014-07-12-wls-09.png" />
</p>

<p>
<code>TraceAction</code> イベントレコードの詳細イメージ
<img src="img/2014-07-12-wls-10.png" alt="2014-07-12-wls-10.png" />
</p>

<p>
イベントログのファイル実体が <code>domain/servers/DefaultServer/data/store/diagnostics/</code>
の配下に <code>*.DAT</code> バイナリファイルとして保存されている。
</p>
</div>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 参考リンク</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><a href="http://docs.oracle.com/cd/E28389_01/web.1111/b60994/config_instrumentation.htm#g1105001">インストゥルメンテーションの構成</a>
</li>
<li><a href="http://docs.oracle.com/cd/E28389_01/web.1111/b60994/appendix_instrum_library.htm#g1082590">WLDFインストゥルメンテーション・ライブラリ</a>
</li>
<li><a href="http://redstack.wordpress.com/2012/06/19/method-run/">How to know that a method was run, when you didn’t write that method</a>
</li>
</ul>
</div>
</div>

]]></content>
  </entry>
  
</feed>
