#+TITLE: [調査]X環境で起動中ウィンドウのアイコンを取得する方法
#+DATE: 2014-07-24
#+SETUPFILE: ~/.emacs.d/blogs/octopress/setupfile.org
#+JEKYLL_LAYOUT: post
#+JEKYLL_CATEGORIES: linux
#+JEKYLL_TAGS: xlib
#+JEKYLL_COMMENTS: true
#+JEKYLL_PUBLISHED: true

Emacsの =helm= 入力補講

* 起動中ウィンドウリストの取得
=xwininfo= を使うと情報が溢れている！ウィンドウの情報以外にパネル、システムトレイなど
目に見えるもの、見えないものすべて取れてしまう。ほしい情報はウィンドウリストだけなの
で、 =grep= で絞れるかが分からないため =xwininfo= を置いといた。

#+begin_example
$ xwininfo -root -all
[akira@jizai ~]$ xwininfo -root -all

xwininfo: Window id: 0x8f (the root window) (has no name)

  Root window id: 0x8f (the root window) (has no name)
  Parent window id: 0x0 (none)
     98 children:
     0x2600004 "Fcitx Input Window": ("fcitx" "fcitx")  120x39+305+949  +305+949
     0x22033f1 "A Byteman Tutorial | Community": ("Popup" "Firefox")  238x27+1047+99  +1047+99
        1 child:
        0x22033f2 (has no name): ()  1x1+-1+-1  +1046+98
     0x22364d6 "Firefox": ("Popup" "Firefox")  200x200+0+0  +0+0
        1 child:
        0x22364d7 (has no name): ()  1x1+-1+-1  +-1+-1
     0x1a00064 "仲間リスト": ("Pidgin" "Pidgin")  455x751+1171+27  +1171+27
        2 children:
        0x1a01f08 (has no name): ()  200x200+-1+-1  +1170+26
        0x1a00065 (has no name): ()  1x1+-1+-1  +1170+26
     0x260031a (has no name): ()  1x1+0+0  +0+0
     0x22016d4 "Firefox": ("Popup" "Firefox")  177x20+1412+414  +1412+414
        1 child:
     ★★省略★★

  Absolute upper-left X:  0
  Absolute upper-left Y:  0
  Relative upper-left X:  0
  Relative upper-left Y:  0
  Width: 1680
  Height: 1050
  Depth: 24
  Visual: 0x20
  Visual Class: TrueColor
  Border width: 0
  Class: InputOutput
  Colormap: 0x22 (installed)
  Bit Gravity State: NorthWestGravity
  Window Gravity State: NorthWestGravity
  Backing Store State: NotUseful
  Save Under State: no
  Map State: IsViewable
  Override Redirect State: no
  Corners:  +0+0  -0+0  -0-0  +0-0
  -geometry 1680x1050+0+0

  Bit gravity: NorthWestGravity
  Window gravity: NorthWestGravity
  Backing-store hint: NotUseful
  Backing-planes to be preserved: 0xffffffff
  Backing pixel: 0
  Save-unders: No

  Someone wants these events:
      KeyPress
      KeyRelease
      StructureNotify
      SubstructureNotify
      SubstructureRedirect
      PropertyChange
      ColormapChange
  Do not propagate these events:
  Override redirection?: No

  Window manager hints:
      Process id: (unknown)

  No normal window size hints defined
  No zoom window size hints defined

  No window shape defined
  No border shape defined
#+end_example

=wmcrtl= を実行してみたら、いい感じに必要な分の情報だけを出力してくれた。

#+begin_example
$ wmctrl -l
0x03200004  0 jizai akira@jizai:~
0x00c0004b  0 jizai /home/akira/.emacs.d/blogs/octopress/source/blog/draft/2014-07-24-[調査]x環境で起動中ウィンドウのアイコンを取得する方法.org - Emacs@jizai
0x02400001  0 N/A   xfreerdp-remote-lab001
0x022001c7  0 jizai abc - Google 検索 - Mozilla Firefox
0x02800853  0 jizai //etc/httpd/conf/httpd.conf () - Sublime Text 2 (UNREGISTERED)
$
#+end_example


{{{more}}}
