#+TITLE: [メモ]SNMPで監視する
#+DATE: 2014-10-26
#+SETUPFILE: ~/.emacs.d/blogs/octopress/setupfile.org
#+JEKYLL_LAYOUT: post
#+JEKYLL_CATEGORIES: linux
#+JEKYLL_TAGS: snmp
#+JEKYLL_COMMENTS: true
#+JEKYLL_PUBLISHED: true

{{{more}}}

* net-snmpのおさらい
** v1とv2の認証
コミュニティ名によりSNMPマネージャとエージェント間の認証を行います。

** v3の認証
SNMPv3では通信内容の認証、および暗号化に対応しています。
- USM (User-based Security Model)
- VACM (View-based Access Control Model)

** GUIツール
- [[http://ireasoning.com/mibbrowser.shtml][mibbrowser]]
- [[http://sourceforge.net/projects/mbrowse/][mbrowser]]
- [[http://qtmib.sourceforge.net/][qtmib]]
** SMI
Structure of Management Information、管理情報構造といい。
MIBツリー上に、オブジェクトの構成と値の型定義情報のことを指している。
http://www.hitachi.co.jp/Prod/comp/soft1/manual/pc/d3T0400/SNMP0075.HTM
** MIB
管理情報のフォーマットのことです。以下 [[http://www.itbook.info/network/nwope10.html][itbook]] からの引用
#+begin_example
★標準MIBと拡張MIB
MIBには、大きく標準MIBと拡張MIBという2つのグループに分けることができます。標準MIBは、
「iso.org.dod.internet.mgmt.mib-2（1.3.6.1.2.1）」配下にあるOIDのこと。標準MIBは一般的
な機器の名称やインタフェースの情報、稼働時間などの、一般的によく利用される情報が定義さ
れています。

一方の拡張MIBは、「iso.org.dod.internet.private.enterprises（1.3.6.1.4.1）」配下にある
OIDのことで、各ベンダー独自の管理情報が定義されています。
#+end_example
** 標準MIB
標準MIBとして位置づけられているのが「MIB-2」です。当初はMIB-1が標準MIBとして、[[http://www.ietf.org/rfc/rfc1156.txt][RFC1156]]
で定義されていました。その後、[[http://www.ietf.org/rfc/rfc1213.txt][RFC1213]] で見直しが図られ、OIDを11個のグループに分けて管理
する「MIB-2」が定義されました。11個のグループは以下のとおりです。

|-------------------------+-------------------------------------------------------------|
| System (1)              | ノード名や機器の起動時間など                                |
| Interface (2)           | インタフェース名や各インタフェースの受信/送信パケット数など |
| Address Translation (3) | MIB-1との互換性のために残されていますが、MIB-2では未使用。  |
| IP (4)                  | 正常に送受信したデータ数やエラー数など                      |
| ICMP (5)                | ICMPメッセージの受信/送信数など                             |
| TCP (6)                 | TCPの接続回数や失敗回数、リセット回数など                   |
| UDP (7)                 | UDPデータの送受信数など                                     |
| EGP (8)                 | EGPの動作に関する情報を管理するグループ                     |
| OIM (9)                 | MIB-2では未使用                                             |
| Transmission (10)       | データの転送に関する情報を管理するグループ                  |
| SNMP (11)               | SNMPメッセージの送受信数やエラー数など                      |
|-------------------------+-------------------------------------------------------------|

各グループ配下の詳細項目の解説はJP1のマニュアルが参考になります。
[[http://www.hitachi.co.jp/Prod/comp/soft1/manual/pc/d3T0400/SNMP0075.HTM][標準MIBオブジェクトの内容]]

** 設定ファイル
|--------------------------+------------------------------------------------------------|
| /etc/snmp/snmpd.conf     | SNMPエージェント(snmpd)の設定ファイル                      |
| /var/net-snmp/snmpd.conf | snmpdデーモン自動生成した設定ファイル ※１                 |
| /etc/snmp/snmp.conf      | アプリケーション（コマンド）のデフォルト動作を定義します。 |
|--------------------------+------------------------------------------------------------|
※１: 一般的にこのファイルを変更してはいけない、認証・暗号化用パスワードの設定のみ許容される

** コマンド
=snmpconf= snmpサービスの設定ファイルを生成するコマンド

=snmpwalk= でlocalhostすべての情報を取得する
#+begin_example
snmpwalk -v 2c -c public localhost .
#+end_example

=snmpget= で特定の項目を取得する
#+begin_example
$ snmpget -v 2c -c public 192.168.100.1 system.sysDescr.0
SNMPv2-MIB::sysDescr.0 = STRING: RTX810 Rev.xxxx (Mon Jul 29 15:27:26 2013)
#+end_example
|-------------------+------------------------|
| -v 1              | バージョン1を使用する  |
| -c public         | 接続ユーザ名を指定する |
| localhost         | 接続先                 |
| system.sysDescr.0 | 参照したい情報のOID    |
|-------------------+------------------------|
* Linuxサーバの監視
** 環境
#+begin_example
CentOS Linux release 7.0.1406 (Core)
#+end_example

** インストール
#+begin_example
$ sudo yum install net-snmp
$ sudo yum install net-snmp-utils
#+end_example

** v1とv2の認証設定
読み取りのみ可能なコミュニティー名の登録
#+begin_example
$ sudo -u root sh -c "echo rocommunity public >> /etc/snmp/snmpd.conf"
#+end_example

読書可能なコミュニティー名の登録
#+begin_example
$ sudo -u root sh -c "echo rwcommunity private localhost >> /etc/snmp/snmpd.conf"
#+end_example
|---------------------------------+-----------|
| ユーザコミュニティー名          | private   |
| localhostからの接続のみ使用可能 | localhost |
|---------------------------------+-----------|

** v3認証設定
ユーザ登録
#+begin_example
$ sudo -u root sh -c "echo rouser v3public >> /etc/snmp/snmpd.conf"
#+end_example

ユーザパスワードの登録
#+begin_example
$ sudo -u root sh -c "echo createUser v3public SHA password1 AES password2 >> /var/net-snmp/snmpd.conf"
#+end_example

* RTX810ルータを監視する
RTX810へ接続して、SNMP機能を有効化する。
#+begin_example
> snmpv2c host 192.168.100.12
#+end_example

snmpのlistenポートを確認する
#+begin_example
$ sudo nmap -sU 192.168.100.1
Starting Nmap 6.47 ( http://nmap.org ) at 2014-10-26 11:43 JST
Nmap scan report for 192.168.100.1
Host is up (0.030s latency).
Not shown: 991 closed ports
PORT     STATE         SERVICE
53/udp   open|filtered domain
67/udp   open|filtered dhcps
69/udp   open|filtered tftp
123/udp  open          ntp
161/udp  open|filtered snmp                       ★これです
500/udp  open          isakmp
1701/udp open|filtered L2TP
2002/udp open|filtered globe
4500/udp open|filtered nat-t-ike
MAC Address: 00:A0:DE:84:27:22 (Yamaha)
#+end_example

=snmpwalk= でMIB-2のsystemグループの値を確かめる。
#+begin_example
$ snmpwalk -v 2c -c public 192.168.100.1 mib-2.system
SNMPv2-MIB::sysDescr.0 = STRING: RTX810 Rev.******** (Mon Jul 29 15:27:26 2013)
SNMPv2-MIB::sysObjectID.0 = OID: YAMAHA-PRODUCTS-MIB::rtx810
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (482162000) 55 days, 19:20:20.00
SNMPv2-MIB::sysContact.0 = STRING: 
SNMPv2-MIB::sysName.0 = STRING: 
SNMPv2-MIB::sysLocation.0 = STRING: 
SNMPv2-MIB::sysServices.0 = INTEGER: 12
#+end_example

ヤマハルーターはMIB(Management information Base) として RFC1213 (MIB-II) とプライベー
トMIBに対応しています。 =snmpwalk= などのコマンドの出力結果を確認しやすくためにプライ
ベートMIBの定義を =/usr/share/snmp/mibs= に格納する。 また、 =/etc/snmp/snmp.conf= 設
定ファイルに次の定義を追加する。

プライベートMIBのインストール
#+begin_example
$ wget http://www.rtpro.yamaha.co.jp/RT/docs/mib/yamaha-private-mib.tar.gz
$ sudo tar xzvf yamaha-private-mib.tar.gz -C /usr/share/snmp/mibs/
$ ls -al /usr/share/snmp/mibs/yamaha-*
-rw-r--r-- 1 1001 wheel  2467 12月 11  2013 /usr/share/snmp/mibs/yamaha-product.mib.txt
-rw-r--r-- 1 1001 wheel  5789 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt-firmware.mib.txt
-rw-r--r-- 1 1001 wheel 11119 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt-hardware.mib.txt
-rw-r--r-- 1 1001 wheel 51885 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt-interfaces.mib.txt
-rw-r--r-- 1 1001 wheel  5424 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt-ip.mib.txt
-rw-r--r-- 1 1001 wheel  7931 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt-switch.mib.txt
-rw-r--r-- 1 1001 wheel   445 12月 11  2013 /usr/share/snmp/mibs/yamaha-rt.mib.txt
-rw-r--r-- 1 1001 wheel   308 12月 11  2013 /usr/share/snmp/mibs/yamaha-smi.mib.txt
#+end_example

=/etc/snmp/snmp.conf=
#+begin_example
mibs +ALL
#+end_example

=snmptranslate=  コマンドでヤマハルータのプライベートMIBツリーを確認する。一部出力を
省略しました。
#+begin_example
$ snmptranslate -Tp
+--iso(1)
   |
   +--org(3)
      |
      +--dod(6)
         |
         +--internet(1)
            |
            +--mgmt(2)
            |  |
            |  +--mib-2(1)                    ★MIB-II（1.3.6.1.2.1）の定義、RFC1213
            |     |
            |     +--system(1)
            |     +--interfaces(2)
            |     +--at(3)
            |     +--ip(4)
            |     +--icmp(5)
            |     +--udp(7)
            |     +--egp(8)
            |     +--transmission(10)
            |     +--snmp(11)
            |
            +--private(4)
               |
               +--enterprises(1)
                  |
                  +--yamaha(1182)             ★ヤマハルータのMIBツリー(1.3.6.1.4.1.1182）
                     |
                     +--yamahaProducts(1)
                     |  |
                     |  +--rtx810(41)
                     |
                     +--yamahaRT(2)
                        |
                        +--yamahaRTHardware(1)   ★CPU、メモリなどの利用状況
                        |
                        +--yamahaRTFirmware(2)   ★Firmwareの設定情報
                        |
                        +--yamahaRTInterfaces(3) ★各ポートの状況
                        |
                        +--yamahaRTIp(4)         ★ハードビート
                        |
                        +--yamahaRTSwitch(5)     ★Switch状況
#+end_example

CPU使用率、メモリ使用率の確認
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 yamahaRTHardware
YAMAHA-RT-HARDWARE::yrhCpuType.0 = INTEGER: c1000(13)
YAMAHA-RT-HARDWARE::yrhMemorySize.0 = INTEGER: 134217728
YAMAHA-RT-HARDWARE::yrhFlashROMSize.0 = INTEGER: 16777216
YAMAHA-RT-HARDWARE::yrhMemoryUtil.0 = Gauge32: 10
YAMAHA-RT-HARDWARE::yrhCpuUtil5sec.0 = Gauge32: 5     ★過去5秒のCPUの使用率
YAMAHA-RT-HARDWARE::yrhCpuUtil1min.0 = Gauge32: 0
YAMAHA-RT-HARDWARE::yrhCpuUtil5min.0 = Gauge32: 0
YAMAHA-RT-HARDWARE::yrhMemoryUtilTrapThreshold.0 = Gauge32: 0
YAMAHA-RT-HARDWARE::yrhCpuUtil5secTrapThreshold.0 = Gauge32: 0
YAMAHA-RT-HARDWARE::yrhCpuUtil1minTrapThreshold.0 = Gauge32: 0
YAMAHA-RT-HARDWARE::yrhCpuUtil5minTrapThreshold.0 = Gauge32: 0
#+end_example

各ポートのリンク状態の確認
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 yrIfPortLinkState
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.1 = INTEGER: up(1)
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.2 = INTEGER: down(2)
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.3 = INTEGER: up(1)
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.4 = INTEGER: down(2)
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.5 = INTEGER: up(1)
YAMAHA-RT-INTERFACES::yrIfPortLinkState.1.6 = INTEGER: down(2)
#+end_example

MIB-2のInterface(2)からルータ各インタフェース名の受送信パケット数を確認することができる。
まずは各インタフェースのインデックスを確認しましょう
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifDescr
IF-MIB::ifDescr.1 = STRING: LAN1            ★内側のポート
IF-MIB::ifDescr.2 = STRING: LAN2            ★外側のポート
IF-MIB::ifDescr.3 = STRING: WAN1
IF-MIB::ifDescr.58 = STRING: NULL
IF-MIB::ifDescr.59 = STRING: LOOPBACK1
IF-MIB::ifDescr.60 = STRING: LOOPBACK2
IF-MIB::ifDescr.61 = STRING: LOOPBACK3
IF-MIB::ifDescr.62 = STRING: LOOPBACK4
IF-MIB::ifDescr.63 = STRING: LOOPBACK5
IF-MIB::ifDescr.64 = STRING: LOOPBACK6
IF-MIB::ifDescr.65 = STRING: LOOPBACK7
IF-MIB::ifDescr.66 = STRING: LOOPBACK8
IF-MIB::ifDescr.67 = STRING: LOOPBACK9
#+end_example

インタフェースの転送スピード
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifSpeed
IF-MIB::ifSpeed.1 = Gauge32: 1000000000    ★1000BASE-T
IF-MIB::ifSpeed.2 = Gauge32: 100000000     ★100BASE-TX
以降は省略
#+end_example

インタフェースで受信した総オクテット数
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifInOctets
IF-MIB::ifInOctets.1 = Counter32: 3495582505
IF-MIB::ifInOctets.2 = Counter32: 2207073917
#+end_example

インタフェース上から送出した総オクテット数
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifOutOctets
IF-MIB::ifOutOctets.1 = Counter32: 2125464701
IF-MIB::ifOutOctets.2 = Counter32: 175749648
#+end_example

不明または未定義のプロトコルのため廃棄された受信パケット数
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifInUnknownProtos
IF-MIB::ifInUnknownProtos.1 = Counter32: 2299680
IF-MIB::ifInUnknownProtos.2 = Counter32: 3102302
#+end_example

インタフェース上出力パケットキューの長さ（パケット数）
#+begin_example
$ snmpwalk  -v2c -c public 192.168.100.1 IF-MIB::ifOutQLen
IF-MIB::ifOutQLen.1 = Gauge32: 2846016
IF-MIB::ifOutQLen.2 = Gauge32: 2822827
#+end_example

* JDKのSNMP監視
Java7のmibファイルを入手する。
#+begin_example
$ cd /usr/share/snmp/mibs
$ sudo wget http://docs.oracle.com/javase/7/docs/jre/api/management/JVM-MANAGEMENT-MIB.mib
#+end_example

JVMのMIBツリーを確認する。
#+begin_example
+--sun(42)
   |
   +--products(2)
      |
      +--jmgt(145)
         |
         +--standard(3)
            |
            +--jsr163(163)
               |
               +--jvmMgtMIB(1)
                  |
                  +--jvmMgtMIBObjects(1)
                  |  |
                  |  +--jvmClassLoading(1)
                  |  |  |
                  |  |  +-- -R-- Gauge     jvmClassesLoadedCount(1)
                  |  |  +-- -R-- Counter64 jvmClassesTotalLoadedCount(2)
                  |  |  +-- -R-- Counter64 jvmClassesUnloadedCount(3)
                  |  |  +-- -RW- EnumVal   jvmClassesVerboseLevel(4)
                  |  |           Textual Convention: JvmVerboseLevelTC
                  |  |           Values: silent(1), verbose(2)
                  |  |
                  |  +--jvmMemory(2)
                  |  |  |
                  |  |  +-- -R-- Gauge     jvmMemoryPendingFinalCount(1)
                  |  |  +-- -RW- EnumVal   jvmMemoryGCVerboseLevel(2)
                  |  |  |        Textual Convention: JvmVerboseLevelTC
                  |  |  |        Values: silent(1), verbose(2)
                  |  |  +-- -RW- EnumVal   jvmMemoryGCCall(3)
                  |  |  |        Values: unsupported(1), supported(2), start(3), started(4), failed(5)
                  |  |  +-- -R-- Counter64 jvmMemoryHeapInitSize(10)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryHeapUsed(11)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryHeapCommitted(12)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryHeapMaxSize(13)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryNonHeapInitSize(20)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryNonHeapUsed(21)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryNonHeapCommitted(22)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  +-- -R-- Counter64 jvmMemoryNonHeapMaxSize(23)
                  |  |  |        Textual Convention: JvmUnsigned64TC
                  |  |  |
                  |  |  +--jvmMemManagerTable(100)
                  |  |  |  |
                  |  |  |  +--jvmMemManagerEntry(1)
                  |  |  |     |  Index: jvmMemManagerIndex
                  |  |  |     |
                  |  |  |     +-- ---- Integer32 jvmMemManagerIndex(1)
                  |  |  |     |        Textual Convention: JvmPositive32TC
                  |  |  |     |        Range: 0..2147483647
                  |  |  |     +-- -R-- String    jvmMemManagerName(2)
                  |  |  |     |        Textual Convention: JvmJavaObjectNameTC
                  |  |  |     |        Size: 0..1023
                  |  |  |     +-- -R-- EnumVal   jvmMemManagerState(3)
                  |  |  |              Textual Convention: JvmValidityStateTC
                  |  |  |              Values: invalid(1), valid(2)
                  |  |  |
                  |  |  +--jvmMemGCTable(101)
                  |  |  |  |
                  |  |  |  +--jvmMemGCEntry(1)
                  |  |  |     |  Index: jvmMemManagerIndex
                  |  |  |     |
                  |  |  |     +-- -R-- Counter64 jvmMemGCCount(2)
                  |  |  |     +-- -R-- Counter64 jvmMemGCTimeMs(3)
                  |  |  |              Textual Convention: JvmTimeMillis64TC
                  |  |  |
                  |  |  +--jvmMemPoolTable(110)
                  |  |  |  |
                  |  |  |  +--jvmMemPoolEntry(1)
                  |  |  |     |  Index: jvmMemPoolIndex
                  |  |  |     |
                  |  |  |     +-- ---- Integer32 jvmMemPoolIndex(1)
                  |  |  |     |        Textual Convention: JvmPositive32TC
                  |  |  |     |        Range: 0..2147483647
                  |  |  |     +-- -R-- String    jvmMemPoolName(2)
                  |  |  |     |        Textual Convention: JvmJavaObjectNameTC
                  |  |  |     |        Size: 0..1023
                  |  |  |     +-- -R-- EnumVal   jvmMemPoolType(3)
                  |  |  |     |        Textual Convention: JvmManagedMemoryTypeTC
                  |  |  |     |        Values: nonheap(1), heap(2)
                  |  |  |     +-- -R-- EnumVal   jvmMemPoolState(4)
                  |  |  |     |        Textual Convention: JvmValidityStateTC
                  |  |  |     |        Values: invalid(1), valid(2)
                  |  |  |     +-- -RW- Counter64 jvmMemPoolPeakReset(5)
                  |  |  |     |        Textual Convention: JvmTimeMillis64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolInitSize(10)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolUsed(11)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolCommitted(12)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolMaxSize(13)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolPeakUsed(21)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolPeakCommitted(22)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolPeakMaxSize(23)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolCollectUsed(31)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolCollectCommitted(32)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolCollectMaxSize(33)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -RW- Counter64 jvmMemPoolThreshold(110)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolThreshdCount(111)
                  |  |  |     +-- -R-- EnumVal   jvmMemPoolThreshdSupport(112)
                  |  |  |     |        Textual Convention: JvmImplSupportStateTC
                  |  |  |     |        Values: unsupported(1), supported(2)
                  |  |  |     +-- -RW- Counter64 jvmMemPoolCollectThreshold(131)
                  |  |  |     |        Textual Convention: JvmUnsigned64TC
                  |  |  |     +-- -R-- Counter64 jvmMemPoolCollectThreshdCount(132)
                  |  |  |     +-- -R-- EnumVal   jvmMemPoolCollectThreshdSupport(133)
                  |  |  |              Textual Convention: JvmImplSupportStateTC
                  |  |  |              Values: unsupported(1), supported(2)
                  |  |  |
                  |  |  +--jvmMemMgrPoolRelTable(120)
                  |  |     |
                  |  |     +--jvmMemMgrPoolRelEntry(1)
                  |  |        |  Index: jvmMemManagerIndex, jvmMemPoolIndex
                  |  |        |
                  |  |        +-- -R-- String    jvmMemMgrRelManagerName(2)
                  |  |        |        Textual Convention: JvmJavaObjectNameTC
                  |  |        |        Size: 0..1023
                  |  |        +-- -R-- String    jvmMemMgrRelPoolName(3)
                  |  |                 Textual Convention: JvmJavaObjectNameTC
                  |  |                 Size: 0..1023
                  |  |
                  |  +--jvmThreading(3)
                  |  |  |
                  |  |  +-- -R-- Gauge     jvmThreadCount(1)
                  |  |  +-- -R-- Gauge     jvmThreadDaemonCount(2)
                  |  |  +-- -R-- Counter   jvmThreadPeakCount(3)
                  |  |  +-- -R-- Counter64 jvmThreadTotalStartedCount(4)
                  |  |  +-- -RW- EnumVal   jvmThreadContentionMonitoring(5)
                  |  |  |        Textual Convention: JvmImplOptFeatureStateTC
                  |  |  |        Values: unsupported(1), enabled(3), disabled(4)
                  |  |  +-- -RW- EnumVal   jvmThreadCpuTimeMonitoring(6)
                  |  |  |        Textual Convention: JvmImplOptFeatureStateTC
                  |  |  |        Values: unsupported(1), enabled(3), disabled(4)
                  |  |  +-- -RW- Counter64 jvmThreadPeakCountReset(7)
                  |  |  |        Textual Convention: JvmTimeMillis64TC
                  |  |  |
                  |  |  +--jvmThreadInstanceTable(10)
                  |  |     |
                  |  |     +--jvmThreadInstanceEntry(1)
                  |  |        |  Index: jvmThreadInstIndex
                  |  |        |
                  |  |        +-- ---- String    jvmThreadInstIndex(1)
                  |  |        |        Textual Convention: JvmIndex64TC
                  |  |        |        Size: 8
                  |  |        +-- -R-- Counter64 jvmThreadInstId(2)
                  |  |        |        Textual Convention: JvmUnsigned64TC
                  |  |        +-- -R-- BitString jvmThreadInstState(3)
                  |  |        |        Textual Convention: JvmThreadStateTC
                  |  |        |        Values: inNative(1), suspended(2), newThread(3), runnable(4), blocked(5), terminated(6), waiting(7), timedWaiting(8), other(9)
                  |  |        +-- -R-- Counter64 jvmThreadInstBlockCount(4)
                  |  |        +-- -R-- Counter64 jvmThreadInstBlockTimeMs(5)
                  |  |        |        Textual Convention: JvmTimeMillis64TC
                  |  |        +-- -R-- Counter64 jvmThreadInstWaitCount(6)
                  |  |        +-- -R-- Counter64 jvmThreadInstWaitTimeMs(7)
                  |  |        |        Textual Convention: JvmTimeMillis64TC
                  |  |        +-- -R-- Counter64 jvmThreadInstCpuTimeNs(8)
                  |  |        |        Textual Convention: JvmTimeNanos64TC
                  |  |        +-- -R-- String    jvmThreadInstName(9)
                  |  |        |        Textual Convention: JvmJavaObjectNameTC
                  |  |        |        Size: 0..1023
                  |  |        +-- -R-- String    jvmThreadInstLockName(10)
                  |  |        |        Textual Convention: JvmJavaObjectNameTC
                  |  |        |        Size: 0..1023
                  |  |        +-- -R-- ObjID     jvmThreadInstLockOwnerPtr(11)
                  |  |                 Textual Convention: RowPointer
                  |  |
                  |  +--jvmRuntime(4)
                  |  |  |
                  |  |  +-- -R-- String    jvmRTName(1)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTVMName(2)
                  |  |  |        Textual Convention: JvmJavaObjectNameTC
                  |  |  |        Size: 0..1023
                  |  |  +-- -R-- String    jvmRTVMVendor(3)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTVMVersion(4)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTSpecName(5)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTSpecVendor(6)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTSpecVersion(7)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- String    jvmRTManagementSpecVersion(8)
                  |  |  |        Textual Convention: DisplayString
                  |  |  |        Size: 0..255
                  |  |  +-- -R-- EnumVal   jvmRTBootClassPathSupport(9)
                  |  |  |        Textual Convention: JvmImplSupportStateTC
                  |  |  |        Values: unsupported(1), supported(2)
                  |  |  +-- -R-- Integer32 jvmRTInputArgsCount(10)
                  |  |  |        Textual Convention: JvmPositive32TC
                  |  |  |        Range: 0..2147483647
                  |  |  +-- -R-- Counter64 jvmRTUptimeMs(11)
                  |  |  |        Textual Convention: JvmTimeMillis64TC
                  |  |  +-- -R-- Counter64 jvmRTStartTimeMs(12)
                  |  |  |        Textual Convention: JvmTimeMillis64TC
                  |  |  |
                  |  |  +--jvmRTInputArgsTable(20)
                  |  |  |  |
                  |  |  |  +--jvmRTInputArgsEntry(1)
                  |  |  |     |  Index: jvmRTInputArgsIndex
                  |  |  |     |
                  |  |  |     +-- ---- Integer32 jvmRTInputArgsIndex(1)
                  |  |  |     |        Textual Convention: JvmPositive32TC
                  |  |  |     |        Range: 0..2147483647
                  |  |  |     +-- -R-- String    jvmRTInputArgsItem(2)
                  |  |  |              Textual Convention: JvmArgValueTC
                  |  |  |              Size: 0..1023
                  |  |  |
                  |  |  +--jvmRTBootClassPathTable(21)
                  |  |  |  |
                  |  |  |  +--jvmRTBootClassPathEntry(1)
                  |  |  |     |  Index: jvmRTBootClassPathIndex
                  |  |  |     |
                  |  |  |     +-- ---- Integer32 jvmRTBootClassPathIndex(1)
                  |  |  |     |        Textual Convention: JvmPositive32TC
                  |  |  |     |        Range: 0..2147483647
                  |  |  |     +-- -R-- String    jvmRTBootClassPathItem(2)
                  |  |  |              Textual Convention: JvmPathElementTC
                  |  |  |              Size: 0..1023
                  |  |  |
                  |  |  +--jvmRTClassPathTable(22)
                  |  |  |  |
                  |  |  |  +--jvmRTClassPathEntry(1)
                  |  |  |     |  Index: jvmRTClassPathIndex
                  |  |  |     |
                  |  |  |     +-- ---- Integer32 jvmRTClassPathIndex(1)
                  |  |  |     |        Textual Convention: JvmPositive32TC
                  |  |  |     |        Range: 0..2147483647
                  |  |  |     +-- -R-- String    jvmRTClassPathItem(2)
                  |  |  |              Textual Convention: JvmPathElementTC
                  |  |  |              Size: 0..1023
                  |  |  |
                  |  |  +--jvmRTLibraryPathTable(23)
                  |  |     |
                  |  |     +--jvmRTLibraryPathEntry(1)
                  |  |        |  Index: jvmRTLibraryPathIndex
                  |  |        |
                  |  |        +-- ---- Integer32 jvmRTLibraryPathIndex(1)
                  |  |        |        Textual Convention: JvmPositive32TC
                  |  |        |        Range: 0..2147483647
                  |  |        +-- -R-- String    jvmRTLibraryPathItem(2)
                  |  |                 Textual Convention: JvmPathElementTC
                  |  |                 Size: 0..1023
                  |  |
                  |  +--jvmCompilation(5)
                  |  |  |
                  |  |  +-- -R-- String    jvmJITCompilerName(1)
                  |  |  |        Textual Convention: JvmJavaObjectNameTC
                  |  |  |        Size: 0..1023
                  |  |  +-- -R-- Counter64 jvmJITCompilerTimeMs(2)
                  |  |  |        Textual Convention: JvmTimeMillis64TC
                  |  |  +-- -R-- EnumVal   jvmJITCompilerTimeMonitoring(3)
                  |  |           Textual Convention: JvmImplSupportStateTC
                  |  |           Values: unsupported(1), supported(2)
                  |  |
                  |  +--jvmOS(6)
                  |     |
                  |     +-- -R-- String    jvmOSName(1)
                  |     |        Textual Convention: JvmJavaObjectNameTC
                  |     |        Size: 0..1023
                  |     +-- -R-- String    jvmOSArch(2)
                  |     |        Textual Convention: DisplayString
                  |     |        Size: 0..255
                  |     +-- -R-- String    jvmOSVersion(3)
                  |     |        Textual Convention: DisplayString
                  |     |        Size: 0..255
                  |     +-- -R-- Integer32 jvmOSProcessorCount(4)
                  |
                  +--jvmMgtMIBNotifications(2)
                  |  |
                  |  +--jvmMgtMIBMemoryNotifs(2)
                  |     |
                  |     +--jvmMgtMIBLowMemoryNotifs(1)
                  |        |
                  |        +--jvmLowMemoryPrefix(0)
                  |           |
                  |           +--jvmLowMemoryPoolUsageNotif(1)
                  |           +--jvmLowMemoryPoolCollectNotif(2)
                  |
                  +--jvmMgtMIBConformance(3)
                     |
                     +--jvmMgtMIBCompliances(1)
                     |  |
                     |  +--jvmManagementCompliance(1)
                     |
                     +--jvmMgtMIBGroups(2)
                        |
                        +--jvmClassLoadingGroups(1)
                        |  |
                        |  +--jvmClassLoadingBasicGroup(1)
                        |  +--jvmClassLoadingSetGroup(2)
                        |
                        +--jvmMemoryGroups(2)
                        |  |
                        |  +--jvmMemoryBasicGroup(1)
                        |  +--jvmMemoryHeapUsageGroup(2)
                        |  +--jvmMemoryNonHeapUsageGroup(3)
                        |  +--jvmMemorySetGroup(4)
                        |  +--jvmMemManagerGroup(5)
                        |  +--jvmMemGCGroup(6)
                        |  |
                        |  +--jvmMemPoolGroups(7)
                        |  |  |
                        |  |  +--jvmMemPoolBasicGroup(1)
                        |  |  +--jvmMemPoolMonitoringGroup(2)
                        |  |  +--jvmMemPoolUsageGroup(3)
                        |  |  +--jvmMemPoolPeakUsageGroup(4)
                        |  |  +--jvmMemPoolCollectUsageGroup(5)
                        |  |  +--jvmMemPoolCollectMonitoringGroup(6)
                        |  |
                        |  +--jvmMemMgrPoolRelationGroup(8)
                        |
                        +--jvmThreadGroups(3)
                        |  |
                        |  +--jvmThreadBasicGroup(1)
                        |  |
                        |  +--jvmThreadInstanceGroups(2)
                        |     |
                        |     +--jvmThreadInstanceBasicGroup(1)
                        |     +--jvmThreadInstanceCpuGroup(2)
                        |     +--jvmThreadInstanceBlockGroup(3)
                        |
                        +--jvmRuntimeGroups(4)
                        |  |
                        |  +--jvmRuntimeBasicGroup(1)
                        |  +--jvmRuntimeBootCPGroup(2)
                        |
                        +--jvmJITCompilerGroups(5)
                        |  |
                        |  +--jvmJITCompilerBasicGroup(1)
                        |  +--jvmJITCompilerTimeStatGroup(2)
                        |
                        +--jvmOSGroup(6)
                        +--jvmLowMemoryUsageNotifGroup(7)
                        +--jvmLowMemoryCollectNotifGroup(8)
#+end_example

* 参考情報
- [[http://fyshung.blogspot.jp/2014/09/centos-65-mrtg.html][CentOS 6.5 安裝MRTG]]
- [[http://ngyuki.hatenablog.com/entry/20110620/p1][NetSNMP の snmpd で v3 を設定する]]
- [[http://d.hatena.ne.jp/ike-dai/20100913/1284385067][snmpwalkで全MIB取得する方法]]
- [[http://blog.ogatomo.com/blog/2014/01/13/how-to-monitor-rtx810-in-zabbix/][zabbixでRTX-810をSNMPv2で監視する方法]]
- [[http://docs.oracle.com/cd/E19253-01/819-0387/configure-62/index.html][Solaris のシステム管理 (システム管理エージェント)]]
- [[http://changineer.info/server/monitoring/monitoring_snmpd.html][snmpd 設定方法]]
